[{"categories":["spring"],"contents":"ğŸ“• AOP AOPëŠ” OOPë¥¼ ë”ìš± OOPë‹µê²Œ í”„ë¡œê·¸ë˜ë° í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ê²ƒìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ì ì¸ ê¸°ëŠ¥ê³¼ ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ ë¶„ë¦¬í•´ Aspectë¼ëŠ” ëª¨ë“ˆë¡œ ë§Œë“¤ì–´ ì„¤ê³„í•˜ê³  ê°œë°œí•˜ëŠ” ë°©ë²•ì´ë‹¤. ì‹¤ì œë¡œ Spring doc document ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ë§í•˜ê³  ìˆë‹¤. 1 2 3 4 5  Aspect-oriented Programming (AOP) complements Object-oriented Programming (OOP) by providing another way of thinking about program structure AOPëŠ” í”„ë¡œê·¸ë¨ êµ¬ì¡°ì— ëŒ€í•œ ë‹¤ë¥¸ ìƒê°ì˜ ë°©í–¥ì„ ì œê³µí•´ì£¼ë©´ì„œ OOPë¥¼ ë³´ì™„í•˜ê³  ìˆë‹¤.   ì˜ˆë¥¼ ë“¤ë©´ ì–´ë– í•œ í´ë˜ìŠ¤ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•µì‹¬ ê¸°ëŠ¥ê³¼ ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì˜ ê´€ì ìœ¼ë¡œ ê³µí†µ ì‚¬ìš© ë¶€ê°€ ê¸°ëŠ¥ë“¤ì„ ì™¸ë¶€ì˜ ë…ë¦½ëœ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ê³  ì´ë¥¼ ëª¨ë“ˆí™”í•˜ì—¬ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë” í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ë²•ì´ë‹¤. ğŸ“˜ AOP ìš©ì–´    ìš©ì–´ ì„¤ëª…     Aspect(Advisor) âœ” íŠ¹ì • í•œ ê°€ì§€ ê¸°ëŠ¥ì— ëŒ€í•´ í©ì–´ì§„ ê´€ì‹¬ì‚¬ë¥¼ ëª¨ë“ˆí™”í•˜ì—¬ ë¬¶ì€ í´ë˜ìŠ¤ - PointCut + Adviceë¥¼ ë¬¶ì€ ë©”ì„œë“œë¥¼ ì •ì˜ ë° ê´€ë¦¬í•œë‹¤.   Target âœ” ë¹„ì¦ˆë‹ˆìŠ¤(í•µì‹¬) ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” AOPì˜ ëŒ€ìƒ \u0026lsquo;í´ë˜ìŠ¤\u0026rsquo;   Advice âœ” AOP ë©”ì„œë“œ : ë¶€ê°€ ê¸°ëŠ¥ì„ ì ìš©ì‹œí‚¤ëŠ” ë©”ì„œë“œ(ë¶€ê°€ ê¸°ëŠ¥ ë¡œì§ ë©”ì„œë“œ) ì ìš© ì‹œì ë„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. - before : ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ ì‹¤í–‰ ì „ì— ë™ì‘ - after : ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ ì‹¤í–‰ í›„ì— ë™ì‘ - after-returning : ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ ì‹¤í–‰ ì¤‘ ë¦¬í„´ ë˜ëŠ” ìˆœê°„ - after-throwing : ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ ì‹¤í–‰ ì¤‘ ì—ëŸ¬ ë°œìƒ ìˆœê°„ - around\t: ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ ì‹¤í–‰ ì „/í›„ì— ë™ì‘   JoinPoint âœ” AOPê°€ ì ìš©ë  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œ, í•„ë“œ, ê°ì²´, ìƒì„±ì ë“±ì˜ ìš”ì†Œ - íƒ€ê²Ÿ í´ë˜ìŠ¤ì˜ ìš”ì†Œë“¤ì„ ì˜ë¯¸í•˜ë©° PointCutì˜ í›„ë³´ - Spring AOPì—ì„œëŠ” ë©”ì„œë“œë§Œ ì§€ì • ê°€ëŠ¥   PointCut âœ” AOP ì ìš© ê°€ëŠ¥ ìš”ì†Œë“¤ ì¤‘ì—ì„œ \u0026lsquo;ì‹¤ì œ ì ìš©ë  ìš”ì†Œë“¤\u0026rsquo;ì„ ì˜ë¯¸í•œë‹¤. - JoinPointì—ì„œ ì‹¤ì œ Adviceê°€ ì ìš©ë  ì§€ì  - Spring AOP ì—ì„œëŠ” adviceê°€ ì ìš©ë  ë©”ì„œë“œë¥¼ ì˜ë¯¸   Weaving âœ” PointCutì´ í˜¸ì¶œë  ë•Œ Adviceê°€ í˜¸ì¶œë˜ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤. ì¦‰, PointCutì— Advice ë©”ì„œë“œê°€ ì‚½ì…ë˜ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤. - ì»´íŒŒì¼ ì „ì—ëŠ” í•µì‹¬ ë¡œì§ê³¼ ì¸í”„ë¼ ë¡œì§ì´ ë¶„ë¦¬ë˜ì–´ìˆì§€ë§Œ - ì»´íŒŒì¼íƒ€ì„ì— ë°”ì´íŠ¸ ì½”ë“œë¥¼ ë„£ëŠ”ë‹¤ë˜ì§€ ëŸ°íƒ€ì„ì— í”„ë¡ì‹œë¥¼ ë§Œë“¤ë˜ì§€ - ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•œ ì½”ë“œë¥¼ ë¹„ì¦ˆë‹ˆìŠ¤ ì½”ë“œì™€ ë³‘í•©í•˜ëŠ” ì‘ì—…ì„ ì˜ë¯¸í•œë‹¤. Weaving ì²˜ë¦¬ ë°©ì‹ (AOP êµ¬í˜„ ë°©ë²•) - ì»´íŒŒì¼ íƒ€ì„ ìœ„ë¹™ : a.java -\u0026gt; a.clss ì»´íŒŒì¼ ë  ë•Œ - ë¡œë”© íƒ€ì„ ìœ„ë¹™ : í´ë˜ìŠ¤íŒŒì¼ì„ í´ë˜ìŠ¤ ë¡œë”ê°€ ë©”ëª¨ë¦¬ì— ë¡œë“œí•  ë•Œ - ëŸ°íƒ€ì„/í”„ë¡ì‹œ ìœ„ë¹™ : íƒ€ê²Ÿ í´ë˜ìŠ¤ì— ë¶€ê°€ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë„ë¡ Proxy ê°ì²´ë¥¼ ë§Œë“¤ì–´(ê°ì‹¸ì„œ) ì‹¤í–‰ - ìŠ¤í”„ë§ AOPëŠ” ëŸ°íƒ€ì„ ìœ„ë¹™ë§Œì„ ì§€ì›í•œë‹¤.(IOC/DIë¥¼ ì´ìš©í•œ ë°©ë²•)   proxy âœ” Target ê°ì²´ì— Adviceë¥¼ ì ìš©ì‹œí‚¤ëŠ” ë˜í¼ í´ë˜ìŠ¤     ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìì—°ìŠ¤ëŸ½ê²Œ ì—¬ëŸ¬ ë©”ì„œë“œ(Join Point)ë¥¼ í˜¸ì¶œí•œë‹¤. ì´ë•Œ íŠ¹ì • PointCutìœ¼ë¡œ ì§€ì •í•œ ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ëŠ” ìˆœê°„ Aspect ì˜ Advice ë©”ì†Œë“œê°€ í˜¸ì¶œëœë‹¤. Advice ë©”ì†Œë“œì˜ ë™ì‘ ì‹œì ì€ 5ê°€ì§€ë¡œ ì •í•  ìˆ˜ ìˆë‹¤. ì• ìŠ¤íŒ©íŠ¸ ì„¤ì •ì— ë”°ë¼ ìœ„ë¹™ ì²˜ë¦¬ë˜ì–´ í”„ë¡ì‹œ ê°ì²´ê°€ ìƒì„±ëœë‹¤.(ë™ì  í”„ë¡ì‹œ ìƒì„±) í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ë¶€ê°€ê¸°ëŠ¥ì´ í¬í•¨ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤.  ğŸ“– AOP êµ¬í˜„ 1  implementation \u0026#39;org.springframework.boot:spring-boot-starter-aop\u0026#39;   1 2 3 4 5  // @EnableAspectJAutoProxy ìƒëµ ê°€ëŠ¥ @SpringBootApplication public class Application { public static void main(String[] args) { SpringApplication.run(Application.class,args); } }   1 2 3 4 5 6  @Service public class AuthServiceImpl { public void businessLogicMethod(){ System.out.println(\u0026#34;businessLogicMethod process!\u0026#34;); } }   ğŸ“„ ì¼ë°˜ì ì¸ êµ¬í˜„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  @Aspect @Configuration public class UselessAspect { Logger log = LoggerFactory.getLogger(UselessAdvisor.class); @Around(\u0026#34;execution(* com.demo.study.service.AuthServiceImpl.*(..))\u0026#34;) public Object stopWatch(ProceedingJoinPoint joinPoint) throws Throwable { StopWatch stopWatch = new StopWatch(); try { stopWatch.start(); return joinPoint.proceed(); } finally { stopWatch.stop(); log.info(\u0026#34;request spent {} ms\u0026#34;, stopWatch.getLastTaskTimeMillis()); } } /** * @Before * @AfterReturning * @AfterThrowing */ @After(\u0026#34;execution(* com.demo.study.service.AuthServiceImpl.*(..))\u0026#34;) public void After() throws Throwable { log.info(\u0026#34;After ì–´ë“œë°”ì´ìŠ¤\u0026#34;); } }   ğŸ“„ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ êµ¬í˜„ 1 2 3 4  @Target(ElementType.METHOD) @Retention(RetentionPolicy.CLASS) public @interface PerformanceCheck { }   1 2 3 4 5 6 7  @Service public class AuthServiceImpl { @PerformanceCheck public void businessLogicMethod(){ System.out.println(\u0026#34;businessLogicMethod process!\u0026#34;); } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  @Aspect @Component public class UselessAspect { Logger log = LoggerFactory.getLogger(UselessAdvisor.class); @Around(\u0026#34;@annotation(com.demo.study.annotation.PerformanceCheck)\u0026#34;) public Object stopWatch(ProceedingJoinPoint joinPoint) throws Throwable { StopWatch stopWatch = new StopWatch(); try { stopWatch.start(); return joinPoint.proceed(); } finally { stopWatch.stop(); log.info(\u0026#34;request spent {} ms\u0026#34;, stopWatch.getLastTaskTimeMillis()); } } /** * @Before * @AfterReturning * @AfterThrowing */ @After(\u0026#34;@annotation(com.demo.study.annotation.PerformanceCheck)\u0026#34;) public void After() throws Throwable { log.info(\u0026#34;After ì–´ë“œë°”ì´ìŠ¤\u0026#34;); } }    ì–´ë…¸í…Œì´ì…˜ê³¼ Aspectê°€ ë™ì¼ ìœ„ì¹˜ë©´ ì–´ë…¸í…Œì´ì…˜ë§Œ ì ì–´ë„ ëœë‹¤. íŒ¨í‚¤ì§€ê°€ ë‹¤ë¥´ë©´ FQCN(Fully qualified Class Name)ì„ ë‹¤ ì…ë ¥í•´ì£¼ì–´ì•¼ í•œë‹¤.  ğŸ“„ ë¹ˆìœ¼ë¡œ êµ¬í˜„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  @Aspect @Component public class UselessAspect { Logger log = LoggerFactory.getLogger(UselessAdvisor.class); @Around(\u0026#34;bean(com.demo.study.service.AuthServiceImpl)\u0026#34;) public Object stopWatch(ProceedingJoinPoint joinPoint) throws Throwable { StopWatch stopWatch = new StopWatch(); try { stopWatch.start(); return joinPoint.proceed(); } finally { stopWatch.stop(); log.info(\u0026#34;request spent {} ms\u0026#34;, stopWatch.getLastTaskTimeMillis()); } } /** * @Before * @AfterReturning * @AfterThrowing */ @After(\u0026#34;bean(com.demo.study.service.AuthServiceImpl)\u0026#34;) public void After() throws Throwable { log.info(\u0026#34;After ì–´ë“œë°”ì´ìŠ¤\u0026#34;); } }    ë¹ˆê³¼ Aspectê°€ ë™ì¼ ìœ„ì¹˜ë©´ ì–´ë…¸í…Œì´ì…˜ë§Œ ì ì–´ë„ ëœë‹¤. íŒ¨í‚¤ì§€ê°€ ë‹¤ë¥´ë©´ FQCN(Fully qualified Class Name)ì„ ë‹¤ ì…ë ¥í•´ì£¼ì–´ì•¼ í•œë‹¤.  ğŸ“– AOP PointCut ì„¤ì • 1  execution(* com.springbook.biz..*Impl.get*(..))\u0026#34;    * : ë¦¬í„´ê°’ com.springbook.biz.. : íŒ¨í‚¤ì§€ *Impl: í´ë˜ìŠ¤ ì´ë¦„ get* : ë©”ì„œë“œ ì´ë¦„ (..) : ë§¤ê°œë³€ìˆ˜ ì¤‘ê°„ë§ˆë‹¤ì˜ . : êµ¬ë¶„ì   ğŸ“„ execution í¬ì¸íŠ¸ ì»· ë¦¬í„´    í‘œí˜„ì‹ ì„¤ëª…     * ëª¨ë“  ë¦¬í„´íƒ€ì… í—ˆìš©   void ë¦¬í„´íƒ€ì…ì´ voidì¸ ë©”ì„œë“œ ì„ íƒ   !void ë¦¬í„´íƒ€ì…ì´ voidê°€ ì•„ë‹Œ ë©”ì„œë“œ ì„ íƒ    ğŸ“„ execution í¬ì¸íŠ¸ ì»· íŒ¨í‚¤ì§€    í‘œí˜„ì‹ ì„¤ëª…     com.springbook.biz ì •í•™í•˜ê²Œ í•´ë‹¹ íŒ¨í‚¤ì§€ë§Œ ì„ íƒ   com.springbook.biz.. í•´ë‹¹ íŒ¨í‚¤ì§€ ë° ëª¨ë“  í•˜ìœ„ íŒ¨í‚¤ì§€ ì„ íƒ   com.springbook..impl ..ì• íŒ¨í‚¤ì§€ë¡œ ì‹œì‘í•˜ë©´ì„œ ë§ˆì§€ë§‰ íŒ¨í‚¤ì§€ ì´ë¦„ì´ ..ë’¤ë¡œ ëë‚˜ëŠ” íŒ¨í‚¤ì§€ ì„ íƒ    ğŸ“„ execution í¬ì¸íŠ¸ ì»· í´ë˜ìŠ¤    í‘œí˜„ì‹ ì„¤ëª…     BoardServiceImpl ì •í•™í•˜ê²Œ í•´ë‹¹ í´ë˜ìŠ¤ë§Œ ì„ íƒ   *Impl í´ë˜ìŠ¤ ì´ë¦„ì´ *ë’· ê¸€ìë¡œ ëë‚˜ëŠ” í´ë˜ìŠ¤ë§Œ ì„ íƒ   BoardService+ í•´ë‹¹ í´ë˜ìŠ¤ëŠ” ë¬¼ë¡  íŒŒìƒëœ ëª¨ë“  ìì‹ í´ë˜ìŠ¤ë„ ì„ íƒ ê°€ëŠ¥   variable+ í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ëª¨ë“  í´ë˜ìŠ¤ ì„ íƒ ê°€ëŠ¥    ğŸ“„ execution execution í¬ì¸íŠ¸ ì»· ë©”ì„œë“œ    í‘œí˜„ì‹ ì„¤ëª…     *(..) ê°€ì¥ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ ëª¨ë“  ë©”ì„œë“œ ì„ íƒ   get*(..) ë©”ì„œë“œ ì´ë¦„ì´ getìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ëª¨ë“  ë©”ì„œë“œ ì„ íƒ   ë§¤ì„œë“œì´ë¦„(..) íŠ¹ì • ë©”ì„œë“œ ì´ë¦„ì„ ê°€ì§„ ë©”ì„œë“œ ì„ íƒ    ğŸ“„ execution í¬ì¸íŠ¸ ì»· ë§¤ê°œë³€ìˆ˜    í‘œí˜„ì‹ ì„¤ëª…     (..) ê°€ì¥ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œì„œ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì˜ ì œí•œì´ ì—†ìŒì„ ì˜ë¯¸   (*) ë°˜ë“œì‹œ 1ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§€ëŠ” ë©”ì„œë“œë§Œ í—ˆìš©í•œë‹¤ëŠ” ì˜ë¯¸   (com.spring.user.User) í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ í´ë˜ìŠ¤ë¥¼ ê°€ì§€ëŠ” ë©”ì„œë“œë§Œ í—ˆìš©í•œë‹¤ëŠ” ì˜ë¯¸   (!com.spring.user.User) í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ í´ë˜ìŠ¤ë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” ë©”ì„œë“œë§Œ í—ˆìš©í•œë‹¤ëŠ” ì˜ë¯¸   (Integer, ..) í•œ ê°œ ì´ìƒì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§€ë˜, ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ integerì¸ ë©”ì„œë“œë§Œ í—ˆìš©   (Integer, *) ë°˜ë“œì‹œ ë‘ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§€ë˜, ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ integerì¸ ë©”ì„œë“œë§Œ í—ˆìš©    ğŸ“— ìŠ¤í”„ë§ AOP ìŠ¤í”„ë§ AOP ëŠ” ëŸ°íƒ€ì„ ìœ„ë¹™ì„ ì§€ì›í•˜ê¸°ì— Proxy ê¸°ë°˜ì˜ AOP êµ¬í˜„ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤. ì´ëŸ¬í•œ Proxy ê¸°ë°˜ì˜ AOPëŠ” ìŠ¤í”„ë§ ë¹ˆì—ë§Œ ì ìš©ê°€ëŠ¥í•˜ê¸°ì— ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ ëŒ€ìƒë§Œ AOP ëŒ€ìƒì´ ëœë‹¤. ë˜í•œ, ìŠ¤í”„ë§ AOP íŠ¹ì§•ìƒ ë©”ì„œë“œë§Œì„ ì§€ì›í•  ìˆ˜ ìˆë‹¤. í”„ë¡ì‹œ íŒ¨í„´ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  @Primary @Service public class ProxySimpleEventService implements EventService{ private final EventService simpleEventService; ProxySimpleEventService(EventService simpleEventService) { this.simpleEventService = simpleEventService; } @Override public void createEvent() { long begin = System.currentTimeMillis(); simpleEventService.createEvent(); System.out.println(\u0026#34;createEvent ì‹¤í–‰ì‹œê°„: \u0026#34;+(System.currentTimeMillis()-begin)); } @Override public void publishEvent() { long begin = System.currentTimeMillis(); simpleEventService.publishEvent(); System.out.println(\u0026#34;createEvent ì‹¤í–‰ì‹œê°„: \u0026#34;+(System.currentTimeMillis()-begin)); } @Override public void deleteEvent() { simpleEventService.deleteEvent(); } }   í”„ë¡ì‹œ íŒ¨í„´ì€ AOPì—ì„œ ê¸°ì¡´ ì½”ë“œì˜ ë³€ê²½ ì—†ì´ ì ‘ê·¼ ì œì–´ ë˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤. ê·¸ëŸ¬ë‚˜ ì¼ë°˜ì ì¸ ë°©ë²•ìœ¼ë¡œ í”„ë¡ì‹œ íŒ¨í„´ì„ êµ¬í˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ë¬¸ì œì ì´ ë°œìƒí•œë‹¤. ë¬¸ì œì   ë§¤ë²ˆ Proxy í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤. í•˜ë‚˜ì˜ í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ì—¬ëŸ¬ í´ë˜ìŠ¤ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì ìš©í•˜ê¸° í˜ë“¤ë‹¤. ê°ì²´ ê´€ê³„ê°€ ë³µì¡í•´ì§€ê³  ê´€ë¦¬í•˜ê¸° ì–´ë µë‹¤.  ì´ëŸ¬í•œ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ê²ƒì´ ë°”ë¡œ Spring AOPì™€ Dynamic Proxyë‹¤. ìŠ¤í”„ë§ IoC ì»¨í…Œì´ë„ˆê°€ ì œê³µí•˜ëŠ” ê¸°ë°˜ ì‹œì„¤ê³¼ Dynamic Proxyë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ë³µì¡í•œ ë¬¸ì œ í•´ê²°í–ˆë‹¤.  Dynamic Proxy : ë™ì ìœ¼ë¡œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±í•˜ëŠ” ë°©ë²• JDK Dynamic Proxy : ìë°”ê°€ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬  CGlib : ìë°”ê°€ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬   Spring IoC : ê¸°ì¡´ ë¹ˆì„ ëŒ€ì²´í•˜ëŠ” \u0026lsquo;ë™ì  í”„ë¡ì‹œ ë¹ˆ\u0026rsquo;ì„ ë§Œë“¤ì–´ ë“±ë¡í•œë‹¤.  í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ë³€ê²½ì´ ì—†ë‹¤. AbstractAutoProxyCreator implements BeanPostProcessorë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“ ë‹¤. ì¦‰ ë¹ˆì´ ìƒì„±ëœ í›„, í”„ë¡ì‹œë¥¼ ìƒì„±í•˜ëŠ” ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤.    ì´ë ‡ë“¯ ëŸ°íƒ€ì„ì‹œì— ë™ì ìœ¼ë¡œ í”„ë¡ì‹œ ë¹ˆì„ ìƒì„±í•˜ê³  AOPë¥¼ ì ìš©ì‹œí‚¤ëŠ” ê²ƒì„ ëŸ°íƒ€ì„ ìœ„ë¹™ì´ë¼ ë¶€ë¥¸ë‹¤. ğŸ” ëŸ°íƒ€ì„ ìœ„ë¹™(í”„ë¡ì‹œ ìœ„ë¹™) ëŸ°íƒ€ì„ ìœ„ë¹™ì€ ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ Proxyë¥¼ ìƒì„±í•˜ì—¬ ì‹¤ì œ Target ê°ì²´ì˜ ë³€í˜•ì—†ì´ AOPë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ìŠ¤í”„ë§ì„ ê¸°ì¤€ìœ¼ë¡œ ë§í•˜ìë©´ ë©”ì„œë“œë§Œì´ JoinPointê°€ ë  ìˆ˜ ìˆê¸°ì— Method í˜¸ì¶œ ì‹œì— ìœ„ë¹™ì´ ì´ë£¨ì–´ ì§€ëŠ” ë°©ì‹ì´ë‹¤. ëŸ°íƒ€ì„ ìœ„ë¹™ ë˜í•œ, ì¼ë°˜ì ì¸ Proxy íŒ¨í„´ì„ ê°œì„ í•œ Dynamic Proxyë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ ì•„ë˜ì™€ ê°™ì€ ë¬¸ì œê°€ ìˆë‹¤.  í¬ì¸íŠ¸ ì»·ì— ëŒ€í•œ ì–´ë“œë°”ì´ìŠ¤ ì ìš© ê°¯ìˆ˜ê°€ ëŠ˜ì–´ ë‚ ìˆ˜ë¡ ì„±ëŠ¥ì´ ë–¨ì–´ì§„ë‹¤. ë©”ì†Œë“œ í˜¸ì¶œì— ëŒ€í•´ì„œë§Œ ì–´ë“œë°”ì´ìŠ¤ë¥¼ ì ìš© í•  ìˆ˜ ìˆë‹¤.(í”„ë¡ì‹œì´ê¸°ì—)  AOP í”„ë¡ì‹œ ê°ì²´ 1  org.woowacourse.aoppractice.service.AuthServiceImpl$$EnhancerBySpringCGLIB$$dbdb402d   ìœ„ ì½”ë“œë¥¼ ë³´ë©´, Target í´ë˜ìŠ¤ ìì²´ë¥¼ í”„ë¡ì‹œë¡œ ê°ì‹¸ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. í”„ë¡ì‹œ ìœ„ë¹™ì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ” ìƒì†ì„ ì´ìš©í•œ ë°©ì‹ì´ê¸°ì— ë‹¤í˜•ì„±ì„ ì ìš©ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì¦‰, ìœ„ ê·¸ë¦¼ì—ì„œ AuthControllerê°€ AuthServiceì˜ í”„ë¡ì‹œ í´ë˜ìŠ¤ì¸ AuthService$$ë¸”ë¼ë¸”ë¼ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë˜ ê²ƒì´ë‹¤. ê·¸ëŸ°ë° í•œê°€ì§€ ìƒê°í•´ë³¼ ì ì´ ìˆë‹¤. DynamicProxyëŠ” ìƒì†/êµ¬í˜„ì„ ì ìš©í•˜ë‹ˆ ì•„ë˜ì™€ ê°™ì€ ìš”ì†Œë“¤ì€ ê°€ëŠ¥í• ê¹Œ? ğŸ¤”  final í´ë˜ìŠ¤ final ë©”ì„œë“œ private ë©”ì„œë“œ  ë‹¹ì—°í•˜ê²Œë„, ìë°” ë¬¸ë²•ì ìœ¼ë¡œ ìƒì† ë° ì˜¤ë²„ë¼ì´ë”©ì„ ì§€ì›í•˜ì§€ ëª»í•˜ë¯€ë¡œ ì ìš©ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ì™€ ë¹„ìŠ·í•˜ê²Œ Springì—ì„œ ì§€ì›í•´ì£¼ëŠ” @Trancsactional ì–´ë…¸í…Œì´ì…˜ì´ ìˆëŠ”ë° @Trancsactional ì–´ë…¸í…Œì´ì…˜ ë˜í•œ AOPê¸°ë°˜ì´ê¸°ì— private ë©”ì„œë“œë¥¼ ë¶™ì´ë©´ ì‘ë™ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤. @Trancsactional  ë¡œì§ ì‹œì‘ì‹œ íŠ¸ëœì­ì…˜ì„ ì—´ì–´ì¤Œ ë¡œì§ ëë‚ ì‹œ commití•˜ê³  íŠ¸ëœì­ì…˜ì„ ë‹«ì•„ì¤Œ íŠ¸ëœì­ì…˜ì— ê´€ë ¨ëœ ì¸í”„ë¼ ë¡œì§ì„ ì§€ì›í•˜ê¸°ì— ìš°ë¦¬ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œí•´ì¤€ë‹¤.   ì°¸ê³  ë°±ê¸°ì„ -ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ í•µì‹¬ ê¸°ìˆ  ìŠ¤í”„ë§ í€µ ìŠ¤íƒ€íŠ¸ í…Œì½”í†¡-ìŠ¤í”„ë§ AOP ì¥ì¸ ê°œë°œìë¥¼ ê¿ˆê¾¸ëŠ” : ê¸°ë¡í•˜ëŠ” ê³µê°„ Carrey\u0026rsquo;s ê¸°ìˆ ë¸”ë¡œê·¸ ì§„ì§œ ê°œë°œì ê¸°ì–µë³´ë‹¨ ê¸°ë¡ì„ ë¦¬ë‹¤ì–‘ì˜ ê°œë°œ ì„¸ìƒ Carrey\u0026rsquo;s ê¸°ìˆ ë¸”ë¡œê·¸-AspectJ ë‚˜ì¤‘ì— ì°¸ê³ í•˜ë©´ ì¢‹ìŒ ë…¼ë¦¬ì  ì½”ë”© ","permalink":"https://youngeun-in.github.io/aop/","tags":["spring-aop","dynamic-proxy"],"title":"AOP"},{"categories":["java"],"contents":"ì„œë¸”ë¦¿ì´ í˜¸ì¶œë˜ëŠ” ê³¼ì • ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ì„œë¸”ë¦¿ì„ ë‹´ì•„ ê´€ë¦¬í•œë‹¤. ì„œë¸”ë¦¿ì€ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬ëœë‹¤.  Servlet Request / Servlet Response ê°ì²´ ìƒì„± ì„¤ì • íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ ë§¤í•‘í•  Servletì„ í™•ì¸  1 2 3 4 5 6 7 8 9  \u0026lt;servlet\u0026gt; \u0026lt;servlet-name\u0026gt;MyServlet\u0026lt;/servlet-name\u0026gt; \u0026lt;servlet-class\u0026gt;com.jsp.web.MyServlet\u0026lt;/servlet-class\u0026gt; \u0026lt;/servlet\u0026gt; \u0026lt;servlet-mapping\u0026gt; \u0026lt;servlet-name\u0026gt;MyServlet\u0026lt;/servlet-name\u0026gt; \u0026lt;url-pattern\u0026gt;/hello\u0026lt;/url-pattern\u0026gt; \u0026lt;/servlet-mapping\u0026gt;   í•´ë‹¹ ì„œë¸”ë¦¿ ì¸ìŠ¤í„´ìŠ¤ ì¡´ì¬ë¥¼ ìœ ë¬´ë¥¼ í™•ì¸í•˜ì—¬ ì—†ìœ¼ë©´ ìƒì„±(init()) Servlet Containerì— ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê³ , res reqë¥¼ ì¸ìë¡œ service ì‹¤í–‰  ì°¸ê³  https://youtu.be/calGCwG_B4Y ","permalink":"https://youngeun-in.github.io/servlet-%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D/","tags":["servlet-container"],"title":"Servlet ë™ì‘ ë°©ì‹"},{"categories":["java"],"contents":"Array ì™€ Cache Locality Array ëŠ” ê°™ì€ íƒ€ì…ì„ ê°€ì§„ ì—¬ëŸ¬ ìš”ì†Œë“¤ì€ í•œ ê³³ì— ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ê³ ì•ˆë˜ì—ˆë‹¤. Array ëŠ” í• ë‹¹í•˜ëŠ” í¬ê¸° ë§Œí¼ì´ ë©”ëª¨ë¦¬ì— ì—°ì†ì ìœ¼ë¡œ í• ë‹¹ ë˜ëŠ”ë° ì´ë¡œ ì¸í•´ cache locality ì„ ì´ìš©í•œ ë¹ ë¥¸ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. ìœ„ ì‚¬ì§„ì„ ë³´ë©´ array ë‚´ì— ìˆëŠ” ê° element ë“¤ì´ ê°€ì§€ëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ì—°ì†ì ìœ¼ë¡œ í• ë‹¹ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ìºì‹œ ë©”ëª¨ë¦¬ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì½ì–´ë³´ë©´ ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ëœë‹¤.  ìºì‹œ ë©”ëª¨ë¦¬ëŠ” ë°ì´í„° ì§€ì—­ì„±(Locality)ì˜ ì›ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤. ë°ì´í„° ì§€ì—­ì„±ì€ ëŒ€í‘œì ìœ¼ë¡œ ì‹œê°„ ì§€ì—­ì„±(Temporal locality)ê³¼ ê³µê°„ ì§€ì—­ì„±(Spatial Locality)ìœ¼ë¡œ ë‚˜ë‰˜ëŠ”ë°, ì‹œê°„ ì§€ì—­ì„±ì´ë€ forë‚˜ while ê°™ì€ ë°˜ë³µë¬¸ì— ì‚¬ìš©í•˜ëŠ” ì¡°ê±´ ë³€ìˆ˜ì²˜ëŸ¼ í•œ ë²ˆ ì°¸ì¡°ëœ ë°ì´í„°ëŠ” ì ì‹œ í›„ì— ë˜ ì°¸ì¡°ë  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤ëŠ” ê²ƒì´ê³ , ê³µê°„ ì§€ì—­ì„±ì´ë€ A[0], A[1]ê³¼ ê°™ì€ ë°ì´í„° ë°°ì—´ì— ì—°ì†ìœ¼ë¡œ ì ‘ê·¼í•  ë•Œ ì°¸ì¡°ëœ ë°ì´í„° ê·¼ì²˜ì— ìˆëŠ” ë°ì´í„°ê°€ ì ì‹œ í›„ì— ì‚¬ìš©ë  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤ëŠ” ê²ƒì´ë‹¤. - ë‚˜ë¬´ìœ„í‚¤  Array ëŠ” ì—°ì†ì ì¸ memory block ìœ¼ë¡œ, array ì— ì²˜ìŒ ì ‘ê·¼í•  ë•Œ ì „ì²´ array ê°€ cache ì— ë¡œë“œëœë‹¤. ì²« ì•¡ì„¸ìŠ¤ ì´í›„ë¡œëŠ” ê³µê°„ ì§€ì—­ì„±ì´ ìƒê¸°ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜ java ëŠ” jvm ì´ ì•Œì•„ì„œ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬ í•˜ê¸° ë•Œë¬¸ì— array ì‚¬ìš©ì‹œ cache locality ê°€ ì ìš©ë˜ëŠ”ì§€ ì—¬ë¶€ëŠ” jvm ì´ ë©”ëª¨ë¦¬ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ê³µë¶€í•´ì„œ ì¢€ ë” ì•Œì•„ë´ì•¼ í•  ê²ƒ ê°™ë‹¤. ì§€ê¸ˆ ìì„¸í•œ ì„¤ëª…ì„ í•  ì§€ì‹ì€ ì—†ì§€ë§Œ ì•„ë§ˆ java ì—ì„œëŠ” â€˜í•´ë‹¹ì‚¬í•­ ì—†ìŒâ€™ ì´ë¼ëŠ” ê²°ë¡ ì´ ë‚  ê²ƒ ê°™ë‹¤. ArrayList Java ì˜ ArrayList ëŠ” AbstractList ë¥¼ ìƒì†ë°›ê³  List ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì´ë‹¤. Array ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ size ê°€ dynamic í•˜ê²Œ ì¡°ì ˆëœë‹¤. ArrayList.java ì½”ë“œë¥¼ ì—´ì–´ë³´ë©´ default size ëŠ” 10 ì¸ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. 1  private static final int DEFAULT_CAPACITY = 10;   ArrayList ì—ì„œ ìƒˆë¡œìš´ element ë¥¼ ì¶”ê°€í•˜ëŠ” ë©”ì†Œë“œëŠ” add() ë¡œ, ë‘ ê°€ì§€ ë°©ì‹ì˜ ì˜¤ë²„ë¡œë”© ëœ ë©”ì†Œë“œê°€ ì •ì˜ë˜ì–´ ìˆë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  /** * Appends the specified element to the end of this list. * * @param e element to be appended to this list * @return \u0026lt;tt\u0026gt;true\u0026lt;/tt\u0026gt; (as specified by {@link Collection#add}) */ public boolean add(E e) { ensureCapacityInternal(size + 1); // Increments modCount!!  elementData[size++] = e; return true; } /** * Inserts the specified element at the specified position in this * list. Shifts the element currently at that position (if any) and * any subsequent elements to the right (adds one to their indices). * * @param index index at which the specified element is to be inserted * @param element element to be inserted * @throws IndexOutOfBoundsException {@inheritDoc} */ public void add(int index, E element) { rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!!  System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++; }   ì•„ë˜ì— ìˆëŠ” add() ë©”ì†Œë“œëŠ” íŠ¹ì • index ì— element ë¥¼ ì‚½ì…í•˜ëŠ” ë©”ì†Œë“œë¡œ, ì–´ë–¤ ì‘ì—…ì„ í•œ ë‹¤ìŒì— ê¸°ì¡´ array ë¥¼ copy í•œ ë” í° size ë¥¼ ê°€ì§„ ìƒˆë¡œìš´ array ë¥¼ ë§Œë“¤ì–´ ë‚¸ë‹¤. ê²°êµ­ copy ë¼ëŠ” ì‘ì—…ì´ í•„ìš”í•œ ê²ƒì´ë‹¤. ê·¸ëŸ¼ ë§¤ê°œë³€ìˆ˜ í•˜ë‚˜ë§Œ ë°›ëŠ” ìœ„ì—ìˆëŠ” add() ëŠ” ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ” ê±¸ê¹Œ? ë°©ê¸ˆ ì–¸ê¸‰í•œ ì–´ë–¤ ì‘ì—… ì—ì„œ ensureCapacityInternal() ë©”ì†Œë“œê°€ ì‚¬ì´ì¦ˆ ì¡°ì ˆì„ ë‹´ë‹¹í•œë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  private void ensureCapacityInternal(int minCapacity) { if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) { minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); } ensureExplicitCapacity(minCapacity); } private void ensureExplicitCapacity(int minCapacity) { modCount++; // overflow-conscious code  if (minCapacity - elementData.length \u0026gt; 0) grow(minCapacity); }   ensureCapacityInternal() ë©”ì†Œë“œë¡œ ê°€ë³´ë©´, ì‚¬ì´ì¦ˆ ì¡°ì ˆì„ ìœ„í•´ ensureExplicitCapacity() ë¥¼ ë˜ í˜¸ì¶œí•œë‹¤. ensureExplicitCapacity() ë©”ì†Œë“œì—ì„œëŠ” if (minCapacity - elementData.length \u0026gt; 0) ì´ if ë¬¸ì— ì˜í•´ í˜„ì¬ data ë¥¼ ë‹´ê³  ìˆëŠ” array ì˜ length ê°€ full ì´ë©´ grow() ë¼ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ size ë¥¼ ëŠ˜ë¦°ë‹¤. grow() í•¨ìˆ˜ë¡œ ê°€ë³´ë©´ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  /** * Increases the capacity to ensure that it can hold at least the * number of elements specified by the minimum capacity argument. * * @param minCapacity the desired minimum capacity */ private void grow(int minCapacity) { // overflow-conscious code  int oldCapacity = elementData.length; int newCapacity = oldCapacity + (oldCapacity \u0026gt;\u0026gt; 1); if (newCapacity - minCapacity \u0026lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE \u0026gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win:  elementData = Arrays.copyOf(elementData, newCapacity); }   int newCapacity = oldCapacity + (oldCapacity \u0026raquo; 1); ì—¬ê¸°ê°€ í¬ì¸íŠ¸ë‹¤. ë¹„íŠ¸ì—°ì‚°ìœ¼ë¡œ ê¸°ì¡´ size ì˜ 1/2 ë§Œí¼ ìƒˆë¡œìš´ capacity ë¥¼ í• ë‹¹í•˜ë„ë¡ í•œë‹¤. oldCapacity ê°’ì´ 10 (default) ì´ì—ˆë‹¤ë©´, 10 \u0026raquo; 1 ì˜ ê²½ìš° 10 ì˜ 2ì§„ìˆ˜ì¸ 1010(2) ì„ 1-bit right shifting í•œ ê°’ì¸ 0101(2) , ì¦‰ 10ì§„ìˆ˜ 5 ë§Œí¼ size ë¥¼ í‚¤ìš°ëŠ” ê²ƒì´ë‹¤. ì´ë ‡ê²Œ size í‚¤ì›Œì„œ ê²°êµ­ í•œë‹¤ëŠ” ê²Œ copy ë‹¤. ê²°êµ­ java ì—ì„œ ì œê³µí•˜ëŠ” ArrayList ë„ ë³„ë‹¤ë¥¸ ì‹ ë°•í•œ ë°©ë²•ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” array ê°€ ì•„ë‹ˆë¼ ê·¸ëƒ¥ array ì¸ ê²ƒì´ë‹¤. ì¦‰, size ê°€ ê³ ì •ë˜ì§€ ì•Šê²Œ í•˜ë ¤ë©´ ë¹„ìš©ì´ ë§ì´ ë“ ë‹¤ëŠ” ë‹¨ì ì´ ìˆëŠ” ê²ƒì€ í™•ì‹¤í•˜ë‹¤. ","permalink":"https://youngeun-in.github.io/array-arraylist/","tags":["array","array-list"],"title":"Array \u0026 ArrayList"},{"categories":["java"],"contents":"Nested Class? í´ë˜ìŠ¤ ë‚´ë¶€ì— ì„ ì–¸í•œ í´ë˜ìŠ¤ë¡œ Static Nested í´ë˜ìŠ¤ì™€ Inner í´ë˜ìŠ¤ë¡œ ë‚˜ë‰œë‹¤. ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ë˜ ë©¤ë²„í´ë˜ìŠ¤, ì§€ì—­ í´ë˜ìŠ¤ì™€ ìµëª… í´ë˜ìŠ¤ë¡œ ë‚˜ë‰œë‹¤. ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” ê²½ìš° ë…¼ë¦¬ì ìœ¼ë¡œ ë¬¶ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ê±°ë‚˜ ìº¡ìŠí™”ë¥¼ í†µí•´ êµ¬í˜„ë˜ì–´ì•¼ í•  ë•Œ ì‚¬ìš©ëœë‹¤. ì´ì™€ ê°™ì€ ì´ìœ ë¡œ ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ìº¡ìˆ í™”ì˜ íŠ¹ì§•ì„ ê°€ì§€ê²Œ ë˜ëŠ”ë°, í´ë˜ìŠ¤ ë‚´ë¶€ë¥¼ ìˆ¨ê¸°ê±°ë‚˜ ì€ë‹‰í•˜ëŠ”ë° ìœ ìš©í•˜ë©°, ì£¼ë¡œ Java GUIì—ì„œ ì‚¬ìš©ëœë‹¤. Nested Classì˜ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. Static Nested Inner Class í´ë˜ìŠ¤ ë‚´ë¶€ì— êµ¬í˜„ëœ í´ë˜ìŠ¤ì— static ì˜ˆì•½ì–´ë¥¼ ë¶™ì—¬ ë…¼ë¦¬ì ìœ¼ë¡œ ë‚´ë¶€ í´ë˜ìŠ¤ì™€ ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ ê´€ê³„ë¥¼ ë¬¶ì–´ì¤€ë‹¤. Static ì„ ì–¸ì´ ê°–ëŠ” íŠ¹ì„±ì´ ë°˜ì˜ëœ í´ë˜ìŠ¤ì´ë‹¤. ë”°ë¼ì„œ ìì‹ ì„ ê°ì‹¸ëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì™€ ìƒê´€ì—†ì´ static ë„¤ìŠ¤í‹°ë“œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤. í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œë§Œ ê³µìœ í•˜ê³ ì í•˜ëŠ” ë³€ìˆ˜ê°€ ìˆì„ ë•Œ private static í‚¤ì›Œë“œë¡œ ì„ ì–¸í•˜ê³  static nest classë¡œ ì„ ì–¸í•˜ì—¬ ìº¡ìŠí™”í•  ìˆ˜ ìˆë‹¤. Member Class ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜, ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œì™€ ë™ì¼í•œ ìœ„ì¹˜ì— ì •ì˜ ë©¤ë²„ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ì¢…ì†ì ì´ë‹¤. í´ë˜ìŠ¤ì˜ ì •ì˜ë¥¼ ê°ì¶”ì–´ì•¼ í•  ë•Œ ì‚¬ìš©ëœë‹¤. ë°˜ë³µìëŠ” ë©¤ë²„í´ë˜ìŠ¤ì´ë‹¤. Local Class ì¤‘ê´„í˜¸ ë‚´ì—, íŠ¹íˆ ë©”ì†Œë“œ ë‚´ì— ì •ì˜ Anonymous Class í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ê°ì²´ë¡œ ì„ ì–¸í•˜ê¸° ìœ„í•´ì„œëŠ” ìƒì„±ì í˜¹ì€ ë©”ì†Œë“œ ë‚´ë¶€ì—ì„œ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ê³ , ì´ ë•Œ ì¤‘ê´„í˜¸ë¥¼ ë§Œë“¤ì–´ ê·¸ ë‚´ë¶€ì— í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ì—¬ êµ¬í˜„í•œë‹¤. ìµëª… í´ë˜ìŠ¤ëŠ” ëŸ°íƒ€ì„ ì‹œ, JVMì´ ì½ì–´ì•¼ í•˜ëŠ” í´ë˜ìŠ¤ íŒŒì¼ì´ ì¤„ì–´ ì‹¤í–‰ ì†ë„ê°€ í–¥ìƒë  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, ë‚¨ë°œí•  ê²½ìš° ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ","permalink":"https://youngeun-in.github.io/%EC%9E%90%EB%B0%94%EC%9D%98-nested-class/","tags":["nested-class"],"title":"ìë°”ì˜ Nested Class"},{"categories":["java"],"contents":"equals ë©”ì†Œë“œ Object í´ë˜ìŠ¤ì— ì •ì˜ëœ equals ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3  public boolean equals(Object obj) { return (this == obj); }   ë‹¨ìˆœíˆ Objectì˜ ==ë¡œ ë¹„êµí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë‘ ê°ì²´ì˜ ë‚´ìš©ì´ ê°™ì€ì§€ í™•ì¸í•˜ë ¤ë©´ equals ë©”ì†Œë“œë¥¼ Overrideí•˜ë©´ ëœë‹¤. 1 2 3 4 5 6 7  @Override public boolean equals(Object o) { if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; AttachFile that = (AttachFile) o; return Objects.equals(id, that.id) \u0026amp;\u0026amp; Objects.equals(fileName, that.fileName) \u0026amp;\u0026amp; Objects.equals(minutes, that.minutes); }   hashCode ë©”ì†Œë“œ Object í´ë˜ìŠ¤ì— ì •ì˜ëœ hashCode ë©”ì†Œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ë‹¤ë¥´ë©´ êµ¬ì„± ë‚´ìš©ì— ìƒê´€ì—†ì´ ì „í˜€ ë‹¤ë¥¸ í•´ì‹œ ê°’ì„ ë°˜í™˜í•˜ë„ë¡œ ì •ì˜ë˜ì–´ ìˆë‹¤. Object í´ë˜ìŠ¤ì— ì •ì˜ëœ hashCode ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2  @HotSpotIntrinsicCandidate public native int hashCode();   ë‹¤ìŒì€ [hotspotì˜ jvm.cpp íŒŒì¼ì—ì„œ ë°œì·Œ][jvm-cpp-583]í•œ ê²ƒì´ë‹¤. ë²„ì „ì€ JDK10 ì´ì§€ë§Œ, JDK8ê³¼ ì°¨ì´ì ì€ ì—†ë‹¤. 1 2 3 4 5  JVM_ENTRY(jint, JVM_IHashCode(JNIEnv* env, jobject handle)) JVMWrapper(\u0026#34;JVM_IHashCode\u0026#34;); // as implemented in the classic virtual machine; return 0 if object is NULL  return handle == NULL ? 0 : ObjectSynchronizer::FastHashCode (THREAD, JNIHandles::resolve_non_null(handle)) ; JVM_END   [JVM_IHashCode ëŠ” ObjectSynchronizer::FastHashCode][synchronizer-714]ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³  ì´ í•¨ìˆ˜ë¥¼ ì˜ ì½ì–´ë³´ë©´ ìƒˆë¡œìš´ í•´ì‹œ ì½”ë“œ í• ë‹¹ì€ get_next_hash í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ë‹¤ìŒì€ get_next_hash í•¨ìˆ˜ì˜ ì½”ë“œì´ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56  // hashCode() generation : // // Possibilities: // * MD5Digest of {obj,stwRandom} // * CRC32 of {obj,stwRandom} or any linear-feedback shift register function. // * A DES- or AES-style SBox[] mechanism // * One of the Phi-based schemes, such as: // 2654435761 = 2^32 * Phi (golden ratio) // HashCodeValue = ((uintptr_t(obj) \u0026gt;\u0026gt; 3) * 2654435761) ^ GVars.stwRandom ; // * A variation of Marsaglia\u0026#39;s shift-xor RNG scheme. // * (obj ^ stwRandom) is appealing, but can result // in undesirable regularity in the hashCode values of adjacent objects // (objects allocated back-to-back, in particular). This could potentially // result in hashtable collisions and reduced hashtable efficiency. // There are simple ways to \u0026#34;diffuse\u0026#34; the middle address bits over the // generated hashCode values:  static inline intptr_t get_next_hash(Thread * Self, oop obj) { intptr_t value = 0; if (hashCode == 0) { // This form uses global Park-Miller RNG.  // On MP system we\u0026#39;ll have lots of RW access to a global, so the  // mechanism induces lots of coherency traffic.  value = os::random(); } else if (hashCode == 1) { // This variation has the property of being stable (idempotent)  // between STW operations. This can be useful in some of the 1-0  // synchronization schemes.  intptr_t addrBits = cast_from_oop\u0026lt;intptr_t\u0026gt;(obj) \u0026gt;\u0026gt; 3; value = addrBits ^ (addrBits \u0026gt;\u0026gt; 5) ^ GVars.stwRandom; } else if (hashCode == 2) { value = 1; // for sensitivity testing  } else if (hashCode == 3) { value = ++GVars.hcSequence; } else if (hashCode == 4) { value = cast_from_oop\u0026lt;intptr_t\u0026gt;(obj); } else { // Marsaglia\u0026#39;s xor-shift scheme with thread-specific state  // This is probably the best overall implementation -- we\u0026#39;ll  // likely make this the default in future releases.  unsigned t = Self-\u0026gt;_hashStateX; t ^= (t \u0026lt;\u0026lt; 11); Self-\u0026gt;_hashStateX = Self-\u0026gt;_hashStateY; Self-\u0026gt;_hashStateY = Self-\u0026gt;_hashStateZ; Self-\u0026gt;_hashStateZ = Self-\u0026gt;_hashStateW; unsigned v = Self-\u0026gt;_hashStateW; v = (v ^ (v \u0026gt;\u0026gt; 19)) ^ (t ^ (t \u0026gt;\u0026gt; 8)); Self-\u0026gt;_hashStateW = v; value = v; } value \u0026amp;= markOopDesc::hash_mask; if (value == 0) value = 0xBAD; assert(value != markOopDesc::no_hash, \u0026#34;invariant\u0026#34;); return value; }   equalsì™€ hashCodeëŠ” ì™œ ê°™ì´ ì¬ì •ì˜í•´ì•¼ í• ê¹Œ? hash ê°’ì„ ì‚¬ìš©í•˜ëŠ” Collection(HashMap, HashSet, HashTable)ì€ ê°ì²´ê°€ ë…¼ë¦¬ì ìœ¼ë¡œ ê°™ì€ì§€ ë¹„êµí•  ë•Œ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì¹œë‹¤. hashCode ë©”ì†Œë“œì˜ ë°˜í™˜ê°’ì„ ì´ìš©í•´ì„œ ê²€ìƒ‰ì˜ ë²”ìœ„ë¥¼ í™• ì¤„ì—¬ë²„ë¦¬ê³ , í•´ë‹¹ ë¶€ë¥˜ ë‚´ì— ì¡´ì¬í•˜ëŠ” ë°ì´í„°ì˜ ë‚´ìš© ë¹„êµëŠ” equals ë©”ì†Œë“œë¥¼ í†µí•´ì„œ ì§„í–‰í•œë‹¤. Object í´ë˜ìŠ¤ì˜ hashCode ë©”ì„œë“œëŠ” ê°ì²´ì˜ ê³ ìœ í•œ ì£¼ì†Œ ê°’ì„ int ê°’ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ë§ˆë‹¤ ë‹¤ë¥¸ ê°’ì„ ë¦¬í„´í•œë‹¤. ë‘ ê°œì˜ Car ê°ì²´ëŠ” equalsë¡œ ë¹„êµë„ í•˜ê¸° ì „ì— ì„œë¡œ ë‹¤ë¥¸ hashCode ë©”ì„œë“œì˜ ë¦¬í„´ ê°’ìœ¼ë¡œ ì¸í•´ ë‹¤ë¥¸ ê°ì²´ë¡œ íŒë‹¨ëœ ê²ƒì´ë‹¤. ì„±ëŠ¥ì— ì•„ì£¼ ë¯¼ê°í•˜ì§€ ì•Šì€ ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë¨ì€ ê°„í¸í•˜ê²Œ Objects.hash ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ hashCode ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•´ë„ ë¬¸ì œì—†ë‹¤. ë¯¼ê°í•œ ê²½ìš°ì—ëŠ” ì§ì ‘ ì¬ì •ì˜í•´ì£¼ëŠ” ê²Œ ì¢‹ë‹¤. 1 2 3 4  @Override public int hashCode() { return Objects.hash(id, fileName, minutes); }   Objects í´ë˜ìŠ¤ì— ì •ì˜ëœ hash ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3  public static int hash(Object... values) { return Arrays.hashCode(values); }   Arrays í´ë˜ìŠ¤ì— ì •ì˜ëœ hashCode ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3 4 5 6 7 8 9 10 11  public static int hashCode(Object a[]) { if (a == null) return 0; int result = 1; for (Object element : a) result = 31 * result + (element == null ? 0 : element.hashCode()); return result; }   ","permalink":"https://youngeun-in.github.io/equals%EC%99%80-hashcode/","tags":["equals","hashcode"],"title":"equalsì™€ hashCode"},{"categories":["java"],"contents":"Comparable ì¸í„°í˜ì´ìŠ¤ JAVAì—ì„œëŠ” ì•„ë˜ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì„ í†µí•´ ì •ë ¬ì˜ ê¸°ì¤€ì„ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ ì •ì˜í•  ê²ƒì„ ìš”êµ¬í•˜ê³  ìˆë‹¤. 1 2 3  public interface Comparable\u0026lt;T\u0026gt; { int compareTo(T obj); }   ì‚¬ìš© ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32  import java.util.Iterator; import java.util.TreeSet; class Person implements Comparable\u0026lt;Person\u0026gt; { String name; int age; public Person(String name, int age) { this.name = name; this.age = age; } public void showData() { System.out.printf(\u0026#34;%s %d \\n\u0026#34;, name, age); } public int compareTo(Person p) { if (age \u0026gt; p.age) return 1; else if (age \u0026lt; p.age) return -1; else return 0; } } class ComparablePerson { public static void main(String[] args) { TreeSet\u0026lt;Person\u0026gt; sTree = new TreeSet\u0026lt;Person\u0026gt;(); sTree.add(new Person(\u0026#34;Lee\u0026#34;, 24)); sTree.add(new Person(\u0026#34;Hong\u0026#34;, 29)); sTree.add(new Person(\u0026#34;Choi\u0026#34;, 21)); Iterator\u0026lt;Person\u0026gt; itr = sTree.iterator(); while (itr.hasNext()) itr.next().showData(); } }   Comparator ì¸í„°í˜ì´ìŠ¤ String í´ë˜ìŠ¤ëŠ” ì´ë¯¸ compareTo ë©”ì†Œë“œë¥¼ êµ¬í˜„í•˜ê³  ìˆë‹¤. ì´ ë•Œ ì •ë ¹ê¸°ì¤€ì„ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œ String í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒˆë¡œ ì •ì˜í•˜ëŠ” ê²ƒì€ ë²ˆê±°ë¡­ë‹¤ ë”°ë¼ì„œ ìƒˆë¡œìš´ ì •ë ¬ ê¸°ì¤€ì„ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆë„ë¡ ì •ì˜ëœ ê²ƒì´ Comparator ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. 1 2 3  public interface Comparator\u0026lt;T\u0026gt; { int compare(T o1, T o2); }   ì‚¬ìš© ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  import java.util.TreeSet; import java.util.Iterator; import java.util.Comparator; class StrLenComparator implements Comparator\u0026lt;String\u0026gt; { public int compare(String str1, String str2) { if (str1.length() \u0026gt; str2.length()) return 1; else if (str1.length() \u0026lt; str2.length()) return -1; else return 0; /* * return str1.length()-str2.length(); */ } } class IntroComparator { public static void main(String[] args) { TreeSet\u0026lt;String\u0026gt; tSet = new TreeSet\u0026lt;String\u0026gt;(new StrLenComparator()); tSet.add(\u0026#34;Orange\u0026#34;); tSet.add(\u0026#34;Apple\u0026#34;); tSet.add(\u0026#34;Dog\u0026#34;); tSet.add(\u0026#34;Individual\u0026#34;); Iterator\u0026lt;String\u0026gt; itr = tSet.iterator(); while (itr.hasNext()) System.out.println(itr.next()); } }   ","permalink":"https://youngeun-in.github.io/comparable-and-comparator/","tags":["comparable","comparator"],"title":"Comparable ì¸í„°í˜ì´ìŠ¤ì™€ Comparator ì¸í„°í˜ì´ìŠ¤ì˜ ì°¨ì´"},{"categories":["spring"],"contents":"Springì˜ ëŒ€í‘œì ì¸ í•µì‹¬ê°€ì¹˜ 3ê°€ì§€ë¡œ IoC, AOP, PSAê°€ ìˆë‹¤. PSA (Portable Service Abstraction) @Transactional ì–´ë…¸í…Œì´ì…˜ì„ ì„ ì–¸í•˜ëŠ” ê²ƒ ë§Œìœ¼ë¡œ ë³„ë„ì˜ ì½”ë“œ ì¶”ê°€ ì—†ì´ íŠ¸ëœì­ì…˜ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ íŠ¸ëœì­ì…˜ ì½”ë“œê°€ ì¶”ìƒí™”ë˜ì–´ ìˆ¨ê²¨ì ¸ ìˆëŠ” ê²ƒì´ë‹¤. ì´ë ‡ê²Œ ì¶”ìƒí™” ê³„ì¸µì„ ì‚¬ìš©í•˜ì—¬ ì–´ë–¤ ê¸°ìˆ ì„ ë‚´ë¶€ì— ìˆ¨ê¸°ê³  ê°œë°œìì—ê²Œ í¸ì˜ì„±ì„ ì œê³µí•´ì£¼ëŠ” ê²ƒì´ ì„œë¹„ìŠ¤ ì¶”ìƒí™”(Service Abstraction)ì´ë©°, í•˜ë‚˜ì˜ ì¶”ìƒí™”ë¡œ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ ë¬¶ì–´ë‘” ê²ƒì„ Springì—ì„œ Portable Service Abstractionì´ë¼ê³  í•œë‹¤. PSAì˜ ì›ë¦¬ íŠ¸ëœì­ì…˜ì„ ì˜ˆë¡œ ë“¤ì–´ ì„¤ëª…í•˜ê² ë‹¤. ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ Springì˜ @Transactionalì€ ê° TransactionManagerë¥¼ ê°ê° êµ¬í˜„í•˜ê³  ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìµœìƒìœ„ PlatformTransactionManagerë¥¼ ì´ìš©í•˜ê³  í•„ìš”í•œ TransactionManagerë¥¼ DIë¡œ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•˜ê³  ìˆë‹¤. PlatformTransactionManager ì¸í„°í˜ì´ìŠ¤ì˜ ì†ŒìŠ¤ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3 4 5 6 7 8  public interface PlatformTransactionManager extends TransactionManager { TransactionStatus getTransaction(@Nullable TransactionDefinition definition) throws TransactionException; void commit(TransactionStatus status) throws TransactionException; void rollback(TransactionStatus status) throws TransactionException; }   ","permalink":"https://youngeun-in.github.io/spring-psa/","tags":["PSA"],"title":"Spring PSA"},{"categories":["design pattern"],"contents":"í”„ë¡ì‹œ íŒ¨í„´ ProxyëŠ” ìš°ë¦¬ë§ë¡œ ëŒ€ë¦¬ì, ëŒ€ë³€ì¸ ì´ë¼ëŠ” ëœ»ì´ë‹¤. ëŒ€ë¦¬ì, ëŒ€ë³€ì¸ì€ ë‹¤ë¥¸ ëˆ„êµ°ê°€ë¥¼ ëŒ€ì‹ í•´ì„œ ê·¸ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ì¡´ì¬ë¥¼ ë§í•œë‹¤. í”„ë¡ì‹œëŠ” íƒ€ê²Ÿì˜ ê¸°ëŠ¥ì„ í™•ì¥í•˜ê±°ë‚˜ íƒ€ê¹ƒì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´í•˜ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤. ìƒì†ì„ ì‚¬ìš©í•œ êµ¬í˜„ ì•„ë˜ì™€ ê°™ì€ íƒ€ê²Ÿ í´ë˜ìŠ¤ê°€ ìˆë‹¤ê³  í•˜ì. 1 2 3 4 5  public class GameService { public void startGame() { System.out.println(\u0026#34;Hello\u0026#34;); } }   ë‹¤ìŒê³¼ ê°™ì´ í”„ë¡ì‹œ í´ë˜ìŠ¤ê°€ íƒ€ê²Ÿ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ë„ë¡ ë§Œë“ ë‹¤. 1 2 3 4 5 6 7 8 9  public class GameServiceProxy extends GameService { @Override public void startGame() { long before = System.currentTimeMillis(); //ìƒìœ„ ë©”ì†Œë“œ ì‹¤í–‰  super.startGame(); System.out.println(System.currentTimeMillis() - before); } }   1 2 3 4 5 6  public class Client { public static void main(String[] args) { GameService gameService = new GameServiceProxy(); gameService.startGame(); } }   ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2  Hello 0   ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•œ êµ¬í˜„ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•  ê²½ìš°, ì¢€ ë” êµ¬ì¡°ê°€ ìœ ì—°í•˜ë©° í…ŒìŠ¤íŠ¸í•˜ê¸°ì—ë„ ì‰½ë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„ ì–¸í•œë‹¤. 1 2 3  public interface GameService { void startGame(); }   ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ , ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•œë‹¤. 1 2 3 4 5 6  public class DefaultGameService implements GameService{ @Override public void startGame() { System.out.println(\u0026#34;Hello\u0026#34;); } }   ë‹¤ìŒê³¼ ê°™ì´ í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•œë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12  @RequiredArgsConstructor public class GameServiceProxy implements GameService { //GameServiceë¥¼ ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ëŠ”ë‹¤.  private final GameService gameService; @Override public void startGame() { long before = System.currentTimeMillis(); gameService.startGame(); System.out.println(System.currentTimeMillis() - before); } }   í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” GameService êµ¬í˜„ì²´ë¥¼ ìƒì„±í•˜ì—¬ í”„ë¡ì‹œ ê°ì²´ì— ë„˜ê²¨ì¤€ë‹¤. 1 2 3 4 5 6  public class Client { public static void main(String[] args) { GameService gameService = new GameServiceProxy(new DefaultGameService()); gameService.startGame(); } }   ë‹¤ì´ë‚˜ë¯¹ í”„ë¡ì‹œ í”„ë¡ì‹œ íŒ¨í„´ì˜ ë‹¨ì ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•œë‹¤. í”„ë¡ì‹œ í´ë˜ìŠ¤ ë‚´ì— ì¤‘ë³µì´ ë°œìƒí•œë‹¤.  ìœ„ì™€ ê°™ì€ ë¬¸ì œëŠ” ë‹¤ì´ë‚˜ë¯¹ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë‹¤. Dynamic ProxyëŠ” ëŸ°íƒ€ì„ ì‹œì ì— ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ê¸°ìˆ ì„ ë§í•œë‹¤. ë‹¤ì´ë‚˜ë¯¹ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ë©´, ì¼ì¼ì´ êµ¬í˜„í•´ì•¼í•œë‹¤ëŠ” ë¬¸ì œëŠ” reflection APIê°€ í•´ê²°í•´ì£¼ê³ , ì¤‘ë³µì€ InvocationHandlerê°€ í•´ê²°í•´ì¤€ë‹¤. InvocationHandlerì˜ invoke() ë©”ì†Œë“œì—ì„œ íƒ€ê²Ÿì˜ ì–´ë–¤ ë©”ì†Œë“œì— ì ìš©í• ì§€ ê²€ì‚¬í•˜ê³ , ì ìš©í•´ì•¼ í•˜ëŠ” ë©”ì†Œë“œë¼ë©´ íƒ€ê²Ÿì˜ ì›ë˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ê²°ê³¼ë¥¼ ë‹´ì•„ë‘” ë’¤ ì¶”ê°€ ê¸°ëŠ¥ì„ ì ìš©í•˜ì—¬ ë¦¬í„´í•œë‹¤. ì ìš©í•˜ì§€ ë§ì•„ì•¼ í•˜ëŠ” ë©”ì†Œë“œë¼ë©´ íƒ€ê²Ÿì˜ ì›ë˜ ë©”ì†Œë“œì˜ ë¦¬í„´ì„ ê·¸ëŒ€ë¡œ ë¦¬í„´í•œë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  BookService bookService = (BookService) Proxy.newProxyInstance(BookService.class.getClassLoader(), new Class[]{BookService.class}, new InvocationHandler() { BookService bookService = new RealSubjectBookService(); @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { if (method.getName() == \u0026#34;rent\u0026#34;) { System.out.println(\u0026#34;11111\u0026#34;); Object invoke = method.invoke(bookService, args); System.out.println(\u0026#34;22222\u0026#34;); return invoke; } return method.invoke(bookService, args); } });   Proxy.newProxyInstance ë©”ì†Œë“œë¥¼ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.  ì²«ë²ˆì§¸ ì¸ìëŠ” í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ì¸í„°í˜ì´ìŠ¤ íƒ€ì…ì˜ í´ë˜ìŠ¤ë¡œë” ë‘ë²ˆì§¸ ì¸ìëŠ” í•´ë‹¹ í”„ë¡ì‹œê°€ ì–´ë–¤ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ì²´ì¸ê°€ 3ë²ˆì§¸ ì¸ìëŠ” ì´ë¥¼ êµ¬í˜„í•˜ëŠ” InvocationHandler ì´ë‹¤.  InvocationHandlerëŠ” invoke ë©”ì†Œë“œë¥¼ êµ¬í˜„í•œë‹¤.  ì²«ë²ˆì§¸ ì¸ìëŠ” newProxyInstanceë¥¼ ì‚¬ìš©í•´ ìƒì„±ëœ í”„ë¡ì‹œ ê°ì²´ì˜ ì°¸ì¡° ë‘ë²ˆì§¸ ì¸ìëŠ” í”„ë¡ì‹œë¥¼ í†µí•´ í˜¸ì¶œëœ ë©”ì†Œë“œì˜ ì°¸ì¡° ì„¸ë²ˆì§¸ ì¸ìëŠ” í•´ë‹¹ ë©”ì†Œë“œì˜ íŒŒë¼ë©”í„°ë“¤ì˜ ì°¸ì¡°  invoke ë©”ì†Œë“œ ë‚´ì—ì„œ method.invoke ë¥¼ í†µí•´ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. ë§Œì•½ í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³ ì‹¶ë‹¤ë©´ invoke ë©”ì†Œë“œ ë‚´ì—ì„œ êµ¬í˜„ì„ í•´ì£¼ë©´ ëœë‹¤. ","permalink":"https://youngeun-in.github.io/%ED%94%84%EB%A1%9D%EC%8B%9C-%ED%8C%A8%ED%84%B4/","tags":["dynamic-proxy"],"title":"í”„ë¡ì‹œ íŒ¨í„´"},{"categories":["java"],"contents":"ë°ì´í„° ê·¸ë£¹ê´€ë¦¬ ê²°ì œë¥¼ ì˜ˆë¡œ ë“¤ì–´ Enumì˜ í™œìš©ë²•ì„ ì•Œì•„ë³´ê³ ì í•œë‹¤. ê²°ì œë¼ëŠ” ë°ì´í„°ëŠ” ê²°ì œ ì¢…ë¥˜ì™€ ê²°ì œ ìˆ˜ë‹¨ì´ë¼ëŠ” 2ê°€ì§€ í˜•íƒœë¡œ í‘œí˜„ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì‹ ìš©ì¹´ë“œ ê²°ì œëŠ” ì‹ ìš©ì¹´ë“œ ê²°ì œë¼ëŠ” ê²°ì œ ìˆ˜ë‹¨ì´ë©°, ì¹´ë“œë¼ëŠ” ê²°ì œ ì¢…ë¥˜ì— í¬í•¨ëœë‹¤. ì´ ì¹´ë“œ ê²°ì œëŠ” í˜ì´ì½”, ì¹´ì¹´ì˜¤í˜ì´ë“± ì—¬ëŸ¬ ê²°ì œ ìˆ˜ë‹¨ì´ í¬í•¨ë˜ì–´ ìˆë‹¤. ê²°ì œì¢…ë¥˜, ê²°ì œìˆ˜ë‹¨ë“±ì˜ ê´€ê³„ë¥¼ ëª…í™•íˆ í‘œí˜„í•˜ë©°, ê° íƒ€ì…ì€ ë³¸ì¸ì´ ìˆ˜í–‰í•´ì•¼í•  ê¸°ëŠ¥ê³¼ ì±…ì„ë§Œ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ Enumì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ ë•Œ DB í…Œì´ë¸”ì˜ ê²°ì œìˆ˜ë‹¨ ì»¬ëŸ¼ì— ì˜ëª»ëœ ê°’ì„ ë“±ë¡í•˜ê±°ë‚˜, íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ëœ ê°’ì´ ì˜ëª»ë˜ì—ˆì„ ê²½ìš°ì—ë„ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ê²°ì œìˆ˜ë‹¨ ì—­ì‹œ Enumìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  public enum PayType { ACCOUNT_TRANSFER(\u0026#34;ê³„ì¢Œì´ì²´\u0026#34;), REMITTANCE(\u0026#34;ë¬´í†µì¥ì…ê¸ˆ\u0026#34;), ON_SITE_PAYMENT(\u0026#34;í˜„ì¥ê²°ì œ\u0026#34;), TOSS(\u0026#34;í† ìŠ¤\u0026#34;), PAYCO(\u0026#34;í˜ì´ì½”\u0026#34;), CARD(\u0026#34;ì‹ ìš©ì¹´ë“œ\u0026#34;), KAKAO_PAY(\u0026#34;ì¹´ì¹´ì˜¤í˜ì´\u0026#34;), BAEMIN_PAY(\u0026#34;ë°°ë¯¼í˜ì´\u0026#34;), POINT(\u0026#34;í¬ì¸íŠ¸\u0026#34;), COUPON(\u0026#34;ì¿ í°\u0026#34;); private final String title; PayType(String title) { this.title = title; } public String getTitle() { return title; } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  import lombok.Getter; import java.util.Arrays; import java.util.Collections; import java.util.List; @Getter public enum PayGroup { CASH(\u0026#34;í˜„ê¸ˆ\u0026#34;, Arrays.asList(PayType.ACCOUNT_TRANSFER, PayType.REMITTANCE, PayType.ON_SITE_PAYMENT, PayType.TOSS)), CARD(\u0026#34;ì¹´ë“œ\u0026#34;, Arrays.asList(PayType.PAYCO, PayType.CARD, PayType.KAKAO_PAY, PayType.BAEMIN_PAY)), ETC(\u0026#34;ê¸°íƒ€\u0026#34;, Arrays.asList(PayType.POINT, PayType.COUPON)), EMPTY(\u0026#34;ì—†ìŒ\u0026#34;, Collections.EMPTY_LIST); private final String title; private final List\u0026lt;PayType\u0026gt; payList; PayGroup(String title, List\u0026lt;PayType\u0026gt; payList) { this.title = title; this.payList = payList; } public static PayGroup findByPayType(PayType payType){ return Arrays.stream(PayGroup.values()) .filter(payGroup -\u0026gt; payGroup.hasPayType(payType)) .findAny() .orElse(EMPTY); } private boolean hasPayType(PayType payType){ return payList.stream() .anyMatch(pay -\u0026gt; pay == payType); } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  import org.junit.jupiter.api.Test; import static org.junit.jupiter.api.Assertions.*; class PayGroupTest { @Test public void PayGroupì—ê²Œ_ì§ì ‘_ê²°ì œì¢…ë¥˜_ë¬¼ì–´ë³´ê¸°_PayType () { PayType payType = selectPayType(); PayGroup payGroup = PayGroup.findByPayType(payType); assertEquals(payGroup.name(), \u0026#34;CARD\u0026#34;); assertEquals(payGroup.getTitle(), \u0026#34;ì¹´ë“œ\u0026#34;); } private PayType selectPayType(){ return PayType.BAEMIN_PAY; } }   DB í˜¹ì€ APIì—ì„œ PayTypeìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„, íƒ€ì… ì•ˆì „ì„±ê¹Œì§€ í™•ë³´í•˜ì—¬ PayGroup ê´€ë ¨ëœ ì²˜ë¦¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ì°¸ê³  https://github.com/jojoldu/blog-code/tree/master/enum-settler ","permalink":"https://youngeun-in.github.io/enum-usage-2/","tags":["enum"],"title":"Enum ì‚¬ìš© (í™œìš©)"},{"categories":["java"],"contents":"ìƒíƒœì™€ í–‰ìœ„ë¥¼ í•œê³³ì—ì„œ ê´€ë¦¬ ì˜ˆë¥¼ ë“¤ì–´ DBì— ì €ì¥ëœ codeì˜ ê°’ì´ \u0026ldquo;CALC_A\u0026quot;ì¼ ê²½ìš°ì—” ê°’ ê·¸ëŒ€ë¡œ, \u0026ldquo;CALC_B\u0026quot;ì¼ ê²½ìš°ì—” 10 í•œ ê°’ì„, \u0026ldquo;CALC_C\u0026quot;ì¼ ê²½ìš°ì—” 3ì„ ê³„ì‚°í•˜ì—¬ ì „ë‹¬í•˜ëŠ” ê²½ìš°ë¥¼ ìƒê°í•´ë³´ì. ì´ ë•Œ \u0026ldquo;DBì˜ í…Œì´ë¸”ì—ì„œ ë½‘ì€ íŠ¹ì • ê°’ì€ ì§€ì •ëœ ë©”ì†Œë“œì™€ ê´€ê³„ê°€ ìˆë‹¤.\u0026ldquo;ëŠ” ì‚¬ì‹¤ì„ ì½”ë“œë¡œ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ Enumì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì¦‰ JAVAì—ì„œ Enumì„ í†µí•´ ìƒíƒœì™€ í–‰ìœ„ë¥¼ í•œê³³ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  import java.util.function.Function; public enum CalculatorType { CALC_A(value -\u0026gt; value), CALC_B(value -\u0026gt; value * 10), CALC_C(value -\u0026gt; value * 30), CALC_ETC(value -\u0026gt; 0L); private Function\u0026lt;Long, Long\u0026gt; expression; CalculatorType(Function\u0026lt;Long, Long\u0026gt; expression) { this.expression = expression; } public long calculate(long value) { return expression.apply(value); } }   1 2 3 4 5 6 7 8 9 10  import javax.persistence.Column; import javax.persistence.EnumType; import javax.persistence.Enumerated; public class Entity { @Column //@Enumerated(EnumType.STRING)ë¥¼ ì„ ì–¸í•˜ë©´ Enum í•„ë“œê°€ í…Œì´ë¸”ì— ì €ì¥ì‹œ ìˆ«ìí˜•ì¸ 1,2,3ì´ ì•„ë‹Œ, Enumì˜ nameì´ ì €ì¥ëœë‹¤.  @Enumerated(EnumType.STRING) private CalculatorType calculatorType; }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  import org.testng.annotations.Test; import static org.junit.jupiter.api.Assertions.assertEquals; public class CalculatorTypeTest { private CalculatorType selectType() { return CalculatorType.CALC_B; } @Test public void ì½”ë“œì—_ë”°ë¼_ì„œë¡œë‹¤ë¥¸_ê³„ì‚°í•˜ê¸°_Enum() { CalculatorType code = selectType(); long originValue = 10000L; long result = code.calculate(originValue); assertEquals(result, 100000L); } }   ê°’(ìƒíƒœ)ê³¼ ë©”ì†Œë“œ(í–‰ìœ„)ê°€ ì–´ë–¤ ê´€ê³„ê°€ ìˆëŠ”ì§€ì— ëŒ€í•´ ë”ì´ìƒ ë‹¤ë¥¸ ê³³ì„ ì°¾ì„ í•„ìš”ê°€ ì—†ê²Œ ë˜ì—ˆë‹¤. ì½”ë“œë‚´ì— ì „ë¶€ í‘œí˜„ë˜ì–´ ìˆê³ , Enum ìƒìˆ˜ì—ê²Œ ì§ì ‘ ë¬¼ì–´ë³´ë©´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ","permalink":"https://youngeun-in.github.io/enum-usage-1/","tags":["enum"],"title":"Enum ì‚¬ìš© (ê°œë…)"},{"categories":["ML"],"contents":"Step Function í™œì„±í™” í•¨ìˆ˜ëŠ” ì‹ ê²½ë§ì˜ í–‰ë™ì„ ê²°ì •í•˜ëŠ” ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ê°€ì¥ ê°„ë‹¨í•œ í˜•íƒœì˜ í™œì„±í™” í•¨ìˆ˜ëŠ” ê³„ë‹¨ í•¨ìˆ˜(Step function) ë¼ê³  í•©ë‹ˆë‹¤. ê³„ë‹¨ í•¨ìˆ˜ëŠ” ì…ë ¥ê°’ì˜ í•©ì´ ì„ê³„ê°’ì„ ë„˜ìœ¼ë©´ $0$ ì„, ë„˜ì§€ ëª»í•˜ë©´ $1$ ì„ ì¶œë ¥í•˜ê²Œ ë©ë‹ˆë‹¤. ê³„ë‹¨ í•¨ìˆ˜ì˜ ê·¸ë˜í”„ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ìƒê²¼ìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ ì¶œì²˜ : wikipedia - Heaviside step function ê³„ë‹¨ í•¨ìˆ˜ëŠ” í™œì„±í™” í•¨ìˆ˜ì˜ ì¡°ê±´ì„ ê°€ì¥ ì˜ ë§Œì¡±í•˜ëŠ” í•¨ìˆ˜ì´ê³  ì§ê´€ì ìœ¼ë¡œë„ ì´í•´í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë¶ˆì—°ì† í•¨ìˆ˜ë¼ëŠ” ë‹¨ì  ë•Œë¬¸ì— ì‹¤ì œ ì‹ ê²½ë§ì— ì‚¬ìš©ë˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ê·¸ë˜í”„ë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆë“¯ ì„ê³„ê°’ ì§€ì ì—ì„œ ë¶ˆì—°ì†ì ì„ ê°–ê²Œ ë˜ëŠ”ë° ì´ ì ì—ì„œ ë¯¸ë¶„ì´ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— í•™ìŠµì´ í•„ìš”í•œ ì‹ ê²½ë§ì— ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ëŸ° ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë“±ì¥í•œ ê²ƒì´ ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜(Sigmoid) ì…ë‹ˆë‹¤. Sigmoid Function ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ $S$ ëª¨ì–‘ì„ ê·¸ë¦¬ëŠ” ê³¡ì„  í•¨ìˆ˜ë¥¼ í†µì¹­í•˜ì—¬ ë¶€ë¥´ëŠ” ë§ì…ë‹ˆë‹¤. ì´ ì¤‘ ëŒ€í‘œì ì¸ í•¨ìˆ˜ëŠ” ë¡œì§€ìŠ¤í‹±(Logistic) í•¨ìˆ˜ì™€ í•˜ì´í¼íƒ„ì  íŠ¸(Hyper tangent, $\\tanh$) í•¨ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤. ë‘ í•¨ìˆ˜ì˜ ìˆ˜ì‹ê³¼ ê·¸ë˜í”„ë¥¼ ë³´ë©° ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ì™€ ê³„ë‹¨ í•¨ìˆ˜ê°€ ë‹¤ë¥¸ ì ì´ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ë¡œì§€ìŠ¤í‹± í•¨ìˆ˜(Logistic Function) $$ \\text{Logistic} : \\frac{1}{1+e^{-x}} $$ ì´ë¯¸ì§€ ì¶œì²˜ : wikipedia - Logistic function í•˜ì´í¼íƒ„ì  íŠ¸ í•¨ìˆ˜(Hypertangent Function) $$ \\text{Hypertangent} : \\frac{e^x-e^{-x}}{e^x+e^{-x}} = \\frac{e^{2x}-1}{e^{2x}+1} $$ ì´ë¯¸ì§€ ì¶œì²˜ : mathworld.wolfram.com ë‘ í•¨ìˆ˜ëŠ” ëª¨ë‘ ì—°ì†í•¨ìˆ˜ì…ë‹ˆë‹¤. ê³„ë‹¨ í•¨ìˆ˜ì˜ ì¹˜ëª…ì ì¸ ë‹¨ì ì´ì—ˆë˜ ë¶ˆì—°ì†ì„ í•´ê²°í–ˆì§€ìš”. ê³„ë‹¨ í•¨ìˆ˜ì™€ ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ì˜ ì¤‘ìš”í•œ ê³µí†µì ì€ ë¹„ì„ í˜• í•¨ìˆ˜(Non-linear) ë¼ëŠ” ì ì…ë‹ˆë‹¤. í™œì„±í™” í•¨ìˆ˜ëŠ” ë¹„ì„ í˜• í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. í™œì„±í™” í•¨ìˆ˜ê°€ ì„ í˜• í•¨ìˆ˜ì´ë©´ ì•ˆë˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”? ì„ í˜•ì¸ í™œì„±í™” í•¨ìˆ˜ $l(x) = ax + b$ ê°€ ìˆë‹¤ê³  í•´ë³´ê² ìŠµë‹ˆë‹¤. ì´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ 3ê°œì˜ ì¸µì„ ìŒ“ëŠ”ë‹¤ë©´ ìµœì¢…ì ì¸ í™œì„±í™” í•¨ìˆ˜ëŠ” $l(l(l(x))) = l^3(x) = a(a(ax+b)+b)+b = a^3x+a^2b+ab+b$ê°€ ë©ë‹ˆë‹¤. $a^3 = c, d = a^2b+ab+b$ë¼ê³  í•˜ë©´ $l^3(x) = cx+d$ë¡œ ì—¬ì „íˆ ê°™ì€ í˜•íƒœì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ë ‡ë“¯ ì¸µì„ ì•„ë¬´ë¦¬ ê¹Šê²Œ ìŒ“ì•„ë„ ì—¬ëŸ¬ ì¸µì„ ìŒ“ëŠ” ì´ì ì„ ì‚´ë¦¬ì§€ ëª»í•˜ê²Œ ë˜ì§€ìš”. ì—¬ëŸ¬ ì¸µì„ ìŒ“ì„ ë•Œì˜ ì¥ì ì„ ì‚´ë¦¬ê¸° ìœ„í•´ ë¹„ì„ í˜• í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ê²ƒì´ì§€ìš”. ReLU Function ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ëŠ” ë¶ˆì—°ì†ì´ë¼ëŠ” ê³„ë‹¨ í•¨ìˆ˜ì˜ ë‹¨ì ì„ í•´ê²°í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹œê·¸ëª¨ì´ë“œëŠ” ëŒ€ë¶€ë¶„ì˜ ì ì—ì„œ ê¸°ìš¸ê¸° ê°’ì´ 0ì´ ë©ë‹ˆë‹¤. ì´ ë•Œë¬¸ì— **ê¸°ìš¸ê¸° ì†Œì‹¤(Gradient vanishing)**ì´ë¼ëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. ê¸°ìš¸ê¸° ì†Œì‹¤ì€ ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ë¥¼ í™œì„±í™” í•¨ìˆ˜ë¡œ ì‚¬ìš©í•˜ì—¬ ì¸µì„ ê¹Šê²Œ ìŒ“ì•˜ì„ ë•Œ í•™ìŠµì´ ì˜ ë˜ì§€ ì•ŠëŠ” í˜„ìƒì…ë‹ˆë‹¤. ì´ëŸ° í˜„ìƒì´ ì™œ ë°œìƒí•˜ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. ë¡œì§€ìŠ¤í‹± í•¨ìˆ˜ $L(x)$ë¥¼ ë¯¸ë¶„í•œ í•¨ìˆ˜ $L^\\prime(x)$ ì˜ ìˆ˜ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. $$ L^\\prime(x) = \\bigg(\\frac{1}{1+e^{-x}}\\bigg)^\\prime = \\frac{e^x}{(1+e^{-x})^2} $$ ìœ„ í•¨ìˆ˜ì˜ ê·¸ë˜í”„ëŠ” ì•„ë˜ì™€ ê°™ì´ ìƒê²¼ìŠµë‹ˆë‹¤. ê·¸ë˜í”„ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ ìµœëŒ“ê°’ì´ $0.25$ ë°–ì— ë˜ì§€ ì•Šê³  $x\u0026lt;-5, x\u0026gt;5$ ë²”ìœ„ì—ì„œëŠ” ê±°ì˜ $0$ ì— ê°€ê¹ìŠµë‹ˆë‹¤. ì—­ì „íŒŒ(Back propagation) ê³¼ì •ì—ì„œëŠ” ë¯¸ë¶„ê°’ì„ ì‚¬ìš©í•˜ì—¬ í•™ìŠµì„ í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ê°’ì´ 0ì— ê°€ê¹Œì›Œ ì§€ë©´ ì •ë³´ê°€ ìœ ì‹¤ë˜ë©´ì„œ í•™ìŠµì´ ì˜ ì•ˆë˜ê²Œ ë©ë‹ˆë‹¤. íŠ¹íˆ ì¸µì„ ê¹Šê²Œ ìŒ“ì„ ê²½ìš°ì—ëŠ” ì •ë³´ê°€ ëª¨ë‘ ìœ ì‹¤ë˜ëŠ” ì‚¬íƒœê°€ ë°œìƒí•˜ê²Œ ë˜ì§€ìš”. ê·¸ë ‡ë‹¤ë©´ í•˜ì´í¼íƒ„ì  íŠ¸ í•¨ìˆ˜ëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”? í•˜ì´í¼íƒ„ì  íŠ¸ í•¨ìˆ˜ $\\tanh$ë¥¼ ë¯¸ë¶„í•œ í•¨ìˆ˜ì˜ ìˆ˜ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. $$ \\tanh^\\prime(x) = \\bigg(\\frac{e^x-e^{-x}}{e^x+e^{-x}}\\bigg)^\\prime = \\frac{4e^{2x}}{(1+e^{2x})^2} $$ ìœ„ í•¨ìˆ˜ì˜ ê·¸ë˜í”„ëŠ” ì•„ë˜ì™€ ê°™ì´ ìƒê²¼ìŠµë‹ˆë‹¤. í•˜ì´í¼íƒ„ì  íŠ¸ í•¨ìˆ˜ë¥¼ ë¯¸ë¶„í•œ í•¨ìˆ˜ì˜ ìµœëŒ“ê°’ì€ $1$ ì…ë‹ˆë‹¤. ìµœëŒ“ê°’ì´ $0.25$ ë°–ì— ì•ˆë˜ì—ˆë˜ ë¡œì§€ìŠ¤í‹± í•¨ìˆ˜ ë³´ë‹¤ëŠ” ì •ë³´ë¥¼ ì˜ ì „ë‹¬í•˜ê²Œ ë˜ì§€ìš”. í•˜ì§€ë§Œ ì—¬ì „íˆ $x$ ê°€ 0ì—ì„œ ë©€ì–´ì§ˆìˆ˜ë¡ ì›ë˜ í•¨ìˆ˜ì˜ ë¯¸ë¶„ê°’ì€ 0ì— ê°€ê¹Œì›Œì§‘ë‹ˆë‹¤. ê·¸ë˜ì„œ í•˜ì´í¼íƒ„ì  íŠ¸ í•¨ìˆ˜ë¥¼ í™œì„±í™” í•¨ìˆ˜ë¡œ í•˜ë”ë¼ë„ í¼ì…‰íŠ¸ë¡ ì„ ì—¬ëŸ¬ ì¸µìœ¼ë¡œ ìŒ“ëŠ”ë‹¤ë©´ í•™ìŠµì´ ì œëŒ€ë¡œ ì•ˆë˜ê²Œ ë˜ì§€ìš”. ì´ë ‡ê²Œ ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ë¥¼ í™œì„±í™” í•¨ìˆ˜ë¡œ ì‚¬ìš©í•  ë•Œ ì—­ì „íŒŒì‹œ í•™ìŠµì´ ì œëŒ€ë¡œ ì§„í–‰ë˜ì§€ ì•ŠëŠ” í˜„ìƒì„ ê¸°ìš¸ê¸° ì†Œì‹¤ì´ë¼ê³  í•©ë‹ˆë‹¤. ê¸°ìš¸ê¸° ì†Œì‹¤ ë¬¸ì œë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ì„œ ë“±ì¥í•œ í•¨ìˆ˜ê°€ ë°”ë¡œ ReLU(Rectified Linear Unit)í•¨ìˆ˜ì…ë‹ˆë‹¤. ReLUí•¨ìˆ˜ëŠ” ì…ë ¥ê°’ì´ 0ë³´ë‹¤ ì‘ì„ ê²½ìš°ì—ëŠ” 0ì„ ë°˜í™˜í•˜ê³ , 0ë³´ë‹¤ í´ ê²½ìš°ì—ëŠ” ì…ë ¥ê°’ì„ ê·¸ëŒ€ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” ReLUí•¨ìˆ˜ì˜ ê·¸ë˜í”„ë¥¼ ë‚˜íƒ€ë‚¸ ê²ƒì…ë‹ˆë‹¤. ì´ë¯¸ì§€ ì¶œì²˜ : medium.com ReLUí•¨ìˆ˜ëŠ” $x$ ê°€ $0$ ë³´ë‹¤ í´ ë•Œ, ë¯¸ë¶„ê°’ì´ í•­ìƒ $1$ ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì¸µì´ ì•„ë¬´ë¦¬ ê¹Šì–´ì ¸ë„ ì†ì‹¤ì—†ì´ ì •ë³´ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¯¸ë¶„ê°’ì´ í•­ìƒ $0$ê³¼ $1$ ì´ê¸° ë•Œë¬¸ì— ì—°ì‚°ì´ ë¹ ë¥´ë‹¤ëŠ” ì ë„ ReLUí•¨ìˆ˜ì˜ ì¥ì ì…ë‹ˆë‹¤. ë•ë¶„ì— ReLUí•¨ìˆ˜ëŠ” ì€ë‹‰ì¸µì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” í™œì„±í™” í•¨ìˆ˜ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ReLUí•¨ìˆ˜ì—ê²Œë„ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. 0ì´í•˜ì˜ ê°’ì´ ê·¸ëŒ€ë¡œ ë³´ì¡´ë˜ì§€ ì•Šê³  ë²„ë ¤ì§„ë‹¤ëŠ” ê²ƒì´ì§€ìš”. ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ Leaky ReLUí•¨ìˆ˜ê°€ ê³ ì•ˆë˜ì–´ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œëŠ” $a=0.01$ì„ ì‚¬ìš©í•˜ë©° ê·¸ë˜í”„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ ì¶œì²˜ : medium.com ","permalink":"https://youngeun-in.github.io/%ED%99%9C%EC%84%B1%ED%99%94-%ED%95%A8%EC%88%98/","tags":["step-function","sigmoid","relu"],"title":"í™œì„±í™” í•¨ìˆ˜"},{"categories":["spring"],"contents":"Spring mocking ì—†ì´ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´? ì•„ë˜ ì½”ë“œë¥¼ mocking ì—†ì´ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ? 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  package com.example.demo; import org.kohsuke.github.GHIssueState; import org.kohsuke.github.GHRepository; import org.kohsuke.github.GitHub; import java.io.IOException; public class RepositoryRank { public int getPoint(String repositoryName) throws IOException { GitHub github = GitHub.connect(); GHRepository repository = github.getRepository(repositoryName); int points = 0; if (repository.hasIssues()) { points += 1; } if (repository.getPullRequests(GHIssueState.CLOSED).size() \u0026gt; 0) { points += 1; } points += repository.getStargazersCount(); points += repository.getForksCount(); return points; } public static void main(String[] args) throws IOException { RepositoryRank repositoryRank = new RepositoryRank(); int point = repositoryRank.getPoint(\u0026#34;whiteship/live-study\u0026#34;); System.out.println(point); } }   Repository ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„± ì‹œì— ì™¸ë¶€ì—ì„œ ìƒì„±í•œ GitHubService ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì£¼ì…í•˜ë©´ ëœë‹¤. ì„¤ëª…ê³¼ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58  package com.example.demo; import org.kohsuke.github.GHIssueState; import org.kohsuke.github.GHRepository; import org.kohsuke.github.GitHub; import org.kohsuke.github.GitHubBuilder; import java.io.IOException; public class RepositoryRank { //ì¸í„°í˜ì´ìŠ¤ ì„ ì–¸  interface GitHubService { GitHub connect() throws IOException; } //ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ ìƒì„±í•˜ê³  ëª¨í‚¹í•˜ê³ ì í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•œë‹¤.  static class DefaultGitHubService implements GitHubService { @Override public GitHub connect() throws IOException { return new GitHubBuilder().build(); } } private final GitHubService gitHubService; //ì„œë¹„ìŠ¤ë¥¼ ì£¼ì…ë°›ëŠ”ë‹¤.  public RepositoryRank(GitHubService gitHubService) { this.gitHubService = gitHubService; } public int getPoint(String repositoryName) throws IOException { GitHub github = gitHubService.connect(); GHRepository repository = github.getRepository(repositoryName); int points = 0; if (repository.hasIssues()) { points += 1; } if (repository.getPullRequests(GHIssueState.CLOSED).size() \u0026gt; 0) { points += 1; } points += repository.getStargazersCount(); points += repository.getForksCount(); return points; } public void main(String[] args) throws IOException { GitHubService gitHubService = new DefaultGitHubService(); //Repository ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„± ì‹œì— ì™¸ë¶€ì—ì„œ ìƒì„±í•œ GitHubService ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì£¼ì…  RepositoryRank repositoryRank = new RepositoryRank(gitHubService); int point = repositoryRank.getPoint(\u0026#34;whiteship/live-study\u0026#34;); System.out.println(point); } }   ì°¸ê³  ë°±ê¸°ì„ ë‹˜ì˜ ìœ íŠœë¸Œë¥¼ ì°¸ê³ í–ˆë‹¤. https://youtu.be/bJfbPWEMj_c ","permalink":"https://youngeun-in.github.io/spring-mocking-%EC%97%86%EC%9D%B4-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EB%8A%94%EB%B2%95/","tags":["test","psa"],"title":"Spring mocking ì—†ì´ í…ŒìŠ¤íŠ¸í•˜ëŠ”ë²•"},{"categories":null,"contents":"","permalink":"https://youngeun-in.github.io/search/","tags":null,"title":"Search"}]