[{"categories":["java"],"contents":"Pure Java Proxy 1 2 3  public interface TargetObject { String someMethod(String name); }   1 2 3 4 5 6  public class TargetObjectImpl implements TargetObject { @Override public String someMethod(String name) { return \u0026#34;Real Subject method \u0026#34;+ name +\u0026#34;\\n\u0026#34;; } }   1 2 3 4 5 6 7 8 9 10  public class TargetObjectProxy implements TargetObject { TargetObjectImpl subject; subject = new TargetObjectImpl(); @Override public String someMethod(String name) { System.out.println(\u0026#34;Before proxy\u0026#34;); return subject.someMethod(name) + (\u0026#34;After proxy\\n\u0026#34;); } }   1 2 3 4 5 6 7 8 9 10 11  public class PureProxyClient { public static void main(String[] args) { PureProxyClient client = new PureProxyClient(); client.run(\u0026#34;Lob\u0026#34;); } public void run(String name) { TargetObjectProxy proxy = new TargetObjectProxy(); System.out.println(proxy.someMethod(name)); } }   ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3  Before proxy Real Subject method Lob After proxy   JDK Dynamic Proxy Java ì—ì„œ ì§€ì›í•˜ëŠ” ë™ì (ëŸ°íƒ€ì„) Proxy êµ¬í˜„ ë°©ì‹ì´ë‹¤. íŠ¹ì • ì¸í„°í˜ì´ìŠ¤ë“¤ì„ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ë‚˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ê¸°ìˆ ì´ë‹¤. Reflection APIì„ ì‚¬ìš©í•˜ì—¬ Target Classì˜ methodë¥¼ invoke()ë¥¼ í†µí•´ ë™ì‘ì‹œí‚¨ë‹¤. Advise ëŒ€ìƒì´ë“  ì•„ë‹ˆë“  ëª¨ë“  Method Call ë§ˆë‹¤ reflection APIì˜ invokeë¥¼ ì‹¤ì‹œí•œë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ë˜í•œ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ì˜ Proxy â†’ ëª¨ë“  Target Class ëŠ” Interfaceë¥¼ implement í•˜ê³  ìˆì–´ì•¼ í•œë‹¤ëŠ” ì œì•½ì´ ìˆë‹¤. Spring AOP ProxyFactoryì—ì„œ ì‚¬ìš©í•œë‹¤. 1 2 3  public interface TargetObject { void someMethod(String name); }   1 2 3 4 5 6  public class TargetObjectImpl implements TargetObject { @Override public void someMethod(String name) { System.out.println(\u0026#34;Real Subject Do something \u0026#34; + name); } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  import java.lang.reflect.Method; import java.lang.reflect.Proxy; public class DynamicProxyClient { public static void main(String[] args) { DynamicProxyClient dynamicProxyClient = new DynamicProxyClient(); dynamicProxyClient.run(\u0026#34;Lob\u0026#34;); } public void run(String name) { realObject.someMethod(name); } TargetObject realObject = (TargetObject) Proxy.newProxyInstance(TargetObject.class.getClassLoader(), new Class[]{TargetObject.class}, (InvocationHandler) (proxy, method, args) -\u0026gt; { System.out.println(\u0026#34;Before Proxy\u0026#34;); TargetObject targetObject = new TargetObjectImpl(); Object invoke = method.invoke(targetObject, args); System.out.println(\u0026#34;After Proxy\u0026#34;); return invoke; }); }   ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3  Before Proxy Real Subject Do something Lob After Proxy   CGLIB Libraryë¥¼ í†µí•œ Dynamic Proxy êµ¬í˜„ ë°©ì‹ ì‹¤ì œ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì¡°ì‘í•˜ì—¬ JDK Dynamic Proxy ë³´ë‹¤ ìƒëŒ€ì ìœ¼ë¡œ ë¹ ë¥´ë‹¤. ê·¸ëŸ¬ë‚˜ finalì´ë‚˜ privateìœ¼ë¡œ ì„ ì–¸ë˜ì–´ ìƒì†ëœ ê°ì²´ì— Overridingì„ ì œê³µí•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” í•´ë‹¹ í–‰ìœ„ì— ëŒ€í•´ì„œ Aspectë¥¼ ì ìš©í•  ìˆ˜ ì—†ë‹¤. Spring Boot ì—ì„œëŠ” CGLIBë¥¼ ê¸°ë°˜ìœ¼ë¡œ Spring AOPë¥¼ ì§€ì›í•œë‹¤. 1 2 3 4 5  public class TargetObject { void someMethod(String name) { System.out.println(\u0026#34;Real Subject Do something \u0026#34; + name); } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  import org.springframework.cglib.proxy.Enhancer; import org.springframework.cglib.proxy.MethodProxy; public class CglibDynamicProxyClient { public static void main(String[] args) { CglibDynamicProxyClient client = new CglibDynamicProxyClient(); client.run(\u0026#34;Lob\u0026#34;); } public void run(String name) { MethodInterceptor methodInterceptor = new MethodInterceptor() { final TargetObject targetObject = new TargetObject(); @Override public Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable { System.out.println(\u0026#34;Before Proxy\u0026#34;); Object invoke = method.invoke(targetObject, args); System.out.println(\u0026#34;After Proxy\u0026#34;); return invoke; } }; TargetObject targetObject = (TargetObject) Enhancer.create(TargetObject.class, methodInterceptor); targetObject.someMethod(name); } }   ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3  Before Proxy Real Subject Do something Lob After Proxy   ì¶œì²˜ https://lob-dev.tistory.com/entry/Java%EC%97%90%EC%84%9C-%EA%B5%AC%ED%98%84%ED%95%A0-%EC%88%98-%EC%9E%88%EB%8A%94-Proxy-%EB%93%A4-Pure-JDK-CGLIB ","permalink":"https://youngeun-in.github.io/%EC%9E%90%EB%B0%94%EC%9D%98-proxy-%EA%B5%AC%ED%98%84/","tags":["dynamic-proxy","cglib-library"],"title":"ìë°”ì˜ Proxy êµ¬í˜„"},{"categories":["java"],"contents":"DTO Data Transfer Objectì˜ ì•½ìë¡œ ê³„ì¸µ(Layer) ê°„ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ê°ì²´ì´ë‹¤. ì¡°ê¸ˆ ë” ì‰½ê²Œ ë§í•˜ë©´, ë°ì´í„°ë¥¼ ë‹´ì•„ì„œ ì „ë‹¬í•˜ëŠ” ë°”êµ¬ë‹ˆë¼ê³  í•  ìˆ˜ ìˆë‹¤. ControllerëŠ” Viewì™€ ë„ë©”ì¸ Modelì˜ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ ë³„ë„ì˜ DTO ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤. ë„ë©”ì¸ ê°ì²´ë¥¼ Viewì— ì§ì ‘ ì „ë‹¬í•  ìˆ˜ ìˆì§€ë§Œ, ë¯¼ê°í•œ ë„ë©”ì¸ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°ëŠ¥ì´ ë…¸ì¶œë  ìˆ˜ ìˆìœ¼ë©° Modelê³¼ View ì‚¬ì´ì— ì˜ì¡´ì„±ì´ ìƒê¸°ê¸° ë•Œë¬¸ì´ë‹¤. DTOëŠ” ë°ì´í„° ì ‘ê·¼ ë©”ì„œë“œ(Getter, Setter), ìƒì„±ì ì™¸ì— ê¸°ëŠ¥ì„ ê°–ì§€ ì•ŠëŠ”ë‹¤. (ì •ë ¬, ì§ë ¬í™” ë“± ë°ì´í„° í‘œí˜„ì„ ìœ„í•œ ê¸°ëŠ¥ì€ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.) ë°ì´í„°ì˜ ìº¡ìŠí™”ë¥¼ í†µí•´ ìœ ì—°í•œ ëŒ€ì‘ì´ ê°€ëŠ¥í•˜ì—¬ ë°ì´í„° ìš”ì²­ ìˆ˜ì˜ ê°ì†Œ íš¨ê³¼ê°€ ìˆë‹¤. VO Value Objectì˜ ì•½ìë¡œ ê°’ì„ ìì²´ë¡œ ì˜ë¯¸ë¥¼ ê°–ëŠ” ê°ì²´ì´ë‹¤. ë³€í•˜ì§€ ì•ŠëŠ” ê°’ì„ ê°–ëŠ” ê°ì²´ë¡œ ê°’ì´ ë³€í•˜ì§€ ì•ŠìŒì„ ë³´ì¥ í•˜ì—¬ ì½”ë“œì˜ ì•ˆì •ì„±ì„ ë†’ì¸ë‹¤. ì„œë¡œ ë‹¤ë¥¸ ì´ë¦„ì„ ê°€ì§„ VOì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ëª¨ë“  ì†ì„±ì´ ê°™ë‹¤ë©´ ë™ì¼í•œ ê°ì²´ë¼ê³  íŒë‹¨í•œë‹¤. ì´ë¥¼ ìœ„í•´ VO í´ë˜ìŠ¤ëŠ” equalsì™€ hasCodeë¥¼ ì˜¤ë²„ë¼ì´ë”© í•´ì•¼ í•œë‹¤. DTOì™€ ë‹¬ë¦¬ ë°ì´í„° ì ‘ê·¼ ë©”ì„œë“œ ì´ì™¸ì˜ ë¡œì§ì„ í¬í•¨í•  ìˆ˜ ìˆë‹¤. ê³µí†µì ê³¼ ì°¨ì´ì  ê³µí†µì  ë ˆì´ì–´ ê°„ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. ì°¨ì´ì     êµ¬ë¶„ DTO VO     ìš©ë„ ë ˆì´ì–´ ê°„ ë°ì´í„° ì „ë‹¬ ê°’ ìì²´ í‘œí˜„   ë™ë“± ê²°ì • ì†ì„±ê°’ì´ ëª¨ë‘ ê°™ë‹¤ê³  í•´ì„œ ê°™ì€ ê°ì²´ X ì†ì„±ê°’ì´ ëª¨ë‘ ê°™ìœ¼ë©´ ê°™ì€ ê°ì²´   ê°€ë³€/ë¶ˆë³€ setterì¡´ì¬ ì‹œ, ê°€ë³€ setter ë¹„ ì¡´ì¬ ì‹œ ë¶ˆë³€ ë¶ˆë³€   ë¡œì§ ë°ì´í„° ì ‘ê·¼(getter, setter) ì´ì™¸ì˜ ê¸°ëŠ¥ì„ ê°–ì§€ ì•ŠìŒ ë°ì´í„° ì ‘ê·¼ ì´ì™¸ì˜ íŠ¹ì •í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ    ì¶œì²˜ https://backtony.github.io/interview/2021-11-13-interview-3/ ","permalink":"https://youngeun-in.github.io/dto-vs-vo/","tags":["dto","vo"],"title":"DTO vs VO"},{"categories":["java"],"contents":"volatileë€? volatile í‚¤ì›Œë“œëŠ” java ë³€ìˆ˜ë¥¼ Main Memoryì— ì €ì¥í•˜ê² ë‹¤ë¼ëŠ” ê²ƒì„ ëª…ì‹œí•œë‹¤. ì¦‰ ë§¤ë²ˆ ë³€ìˆ˜ì˜ ê°’ì„ ì½ì„ ë•Œë§ˆë‹¤ CPU cacheì— ì €ì¥ëœ ê°’ì´ ì•„ë‹Œ Main Memoryì—ì„œ ì½ëŠ” ê²ƒì´ë‹¤. ë˜í•œ ë³€ìˆ˜ì˜ ê°’ì„ ì“¸ ë•Œë§ˆë‹¤ Main Memoryê¹Œì§€ ì‘ì„±í•œë‹¤. volatile í‚¤ì›Œë“œì˜ í•„ìš”ì„± ë©€í‹°ì“°ë ˆë“œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œì˜ non-volatile ë³€ìˆ˜ì— ëŒ€í•œ ì‘ì—…ì€ ì„±ëŠ¥ìƒì˜ ì´ìœ ë¡œ CPU ìºì‹œë¥¼ ì´ìš©í•œë‹¤. ë‘˜ ì´ìƒì˜ CPUê°€ íƒ‘ì¬ëœ ì»´í“¨í„°ì—ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•œë‹¤ë©´, ê° ì“°ë ˆë“œëŠ” ë³€ìˆ˜ë¥¼ ê° CPUì˜ ìºì‹œë¡œ ë³µì‚¬í•˜ì—¬ ì½ì–´ë“¤ì¸ë‹¤. ì“°ë ˆë“œê°€ ë³€ê²½í•œ ê°’ì´ ë©”ì¸ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ì§€ ì•Šì•„ì„œ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì´ ê°’ì„ ë³¼ ìˆ˜ ì—†ëŠ” ìƒí™©ì„ \u0026lsquo;ê°€ì‹œì„±\u0026rsquo; ë¬¸ì œë¼ í•œë‹¤. í•œ ì“°ë ˆë“œì˜ ë³€ê²½(update)ì´ ë‹¤ë¥¸ ì“°ë ˆë“œì—ê²Œ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤. ë³€ìˆ˜ì— volatile í‚¤ì›Œë“œë¥¼ ì„ ì–¸í•œë‹¤ë©´ ì´ ë³€ìˆ˜ì— ëŒ€í•œ ì“°ê¸° ì‘ì—…ì€ ì¦‰ê° ë©”ì¸ ë©”ëª¨ë¦¬ë¡œ ì´ë£¨ì–´ì§ˆ ê²ƒì´ê³ , ì½ê¸° ì‘ì—… ë˜í•œ ë©”ì¸ ë©”ëª¨ë¦¬ë¡œë¶€í„° ë‹¤ì´ë ‰íŠ¸ë¡œ ì´ë£¨ì–´ì§ˆ ê²ƒì´ë‹¤. ë”°ë¼ì„œ ê°€ì‹œì„± ë¬¸ì œê°€ í•´ê²°ëœë‹¤. volatile ì‚¬ìš© ì‹œ ì£¼ì˜í•  ì    í•œ ë³€ìˆ˜ë¥¼ ë‘ê³  ì˜¤ì§ í•œ ì“°ë ˆë“œë§Œ ì´ ë³€ìˆ˜ì— ì½ê¸°/ì“°ê¸° ì‘ì—…ì„ í•˜ê³ , ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì€ ì½ê¸° ì‘ì—…ë§Œ í•˜ëŠ” ìƒí™©ì—ì„œë¼ë©´ ì´ ë•ŒëŠ” volatile ì„ ì–¸ì´ ìœ íš¨í•˜ë‹¤. ì½ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì“°ë ˆë“œë“¤ì€ ì–¸ì œë‚˜ ì´ ë³€ìˆ˜ì˜ ê°€ì¥ ìµœê·¼ ìˆ˜ì •ëœ ê°’ì„ ë´ì•¼í•˜ê³ , volatile ì€ ì´ë¥¼ ë³´ì¥í•´ì¤€ë‹¤. ê·¸ëŸ¬ë‚˜ í•˜ë‚˜ì˜ Threadê°€ ì•„ë‹Œ ì—¬ëŸ¬ Threadê°€ writeí•˜ëŠ” ìƒí™©ì—ì„œëŠ” ì í•©í•˜ì§€ ì•Šë‹¤. ì—¬ëŸ¬ Threadê°€ writeí•˜ëŠ” ìƒí™©ì´ë¼ë©´ synchronizedë¥¼ í†µí•´ ë³€ìˆ˜ read \u0026amp; writeì˜ ì›ìì„±(atomic)ì„ ë³´ì¥í•´ì•¼ í•œë‹¤.   volatile ë³€ìˆ˜ì˜ ì½ê¸°/ì“°ê¸°ëŠ” ë©”ì¸ ë©”ëª¨ë¦¬ë¥¼ ì´ìš©í•œë‹¤. ë©”ì¸ ë©”ëª¨ë¦¬ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ê³  ì“°ëŠ” ì‘ì—…ì€ CPU ìºì‹œë¥¼ ì´ìš©í•˜ëŠ” ê²ƒ ë³´ë‹¤ ë§ì€ ë¹„ìš©ì´ ìš”êµ¬ëœë‹¤. ë”°ë¼ì„œ ë³€ìˆ˜ ê°’ ì¼ì¹˜ì„ ë³´ì¥í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ë§Œ volatile ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.   volatile ì„ ì–¸ì€ JVM ì˜ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ê¸°ìˆ ì¸ ì½”ë“œ ì¬ì •ë¦¬ë¥¼ ë§‰ê¸°ë„ í•œë‹¤. ê·¸ëŸ¬ë¯€ë¡œ volatile í‚¤ì›Œë“œëŠ” ë³€ìˆ˜ì˜ ê°€ì‹œì„± ë³´ì¥ì´ ë°˜ë“œì‹œ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©ë˜ì–´ì•¼ í•œë‹¤.   ì¶œì²˜ https://junghyungil.tistory.com/99 ","permalink":"https://youngeun-in.github.io/volatile/","tags":["volatile"],"title":"volatile"},{"categories":["java"],"contents":"ì‹±ê¸€í†¤ íŒ¨í„´ì€ í”„ë¡œì„¸ìŠ¤(Javaì—ì„œëŠ” JVM) ë‚´ì— 1ê°œì˜ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë§Œì„ ê°–ë„ë¡ ë³´ì¥í•˜ê³ , ì´ì— ëŒ€í•œ ì „ì—­ ì ‘ê·¼ì ì„ ì œê³µí•˜ëŠ” íŒ¨í„´ì´ë‹¤. Eager Initialization ì‹±ê¸€í†¤ íŒ¨í„´ì„ ê°€ì¥ ë‹¨ìˆœí•˜ê²Œ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ ì™¸ë¶€ì—ì„œ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ì—†ë„ë¡ private ìƒì„±ìë¥¼ ë§Œë“¤ê³ , 1ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œì„ ì´ˆê¸°í™”(public static final)í•˜ì—¬ ì´ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œê³µí•˜ëŠ” ë°©ì‹ì´ë‹¤. 1 2 3 4 5 6 7 8  public class SimpleSingleton { //public static finalìœ¼ë¡œ 1ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œì„ ì´ˆê¸°í™”í•˜ì—¬ ì ‘ê·¼ì ì„ ì œê³µí•˜ê³ , 2ê°œ ì´ìƒì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ëª» ë§Œë“¤ê²Œ í•œë‹¤.  public static final SimpleSingleton INSTANCE = new SimpleSingleton(); private SimpleSingleton(){ //ìƒì„±ìëŠ” privateìœ¼ë¡œ ë§Œë“¤ì–´ ì™¸ë¶€ì—ì„œ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ë„ë¡ í•œë‹¤.  } }   static í•„ë“œì™€ ë©”ì†Œë“œë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” Eager Initialization ë°©ì‹ì˜ Singletonì˜ ê²½ìš° Class.forName()ê³¼ ê°™ì€ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ” í•œ, Eager Initialization ë°©ì‹ì„ ì¨ë„ INSTANCEì— ì ‘ê·¼í•˜ì§€ ì•ŠëŠ” í•œ ê°ì²´ ì´ˆê¸°í™”ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. Javaì—ì„œ Classê°€ Loadingë˜ëŠ” ê²½ìš°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.  newë¥¼ í†µí•œ ì´ˆê¸°í™” class.forName()ê³¼ í•¨ê»˜ Reflectionì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° í•´ë‹¹ í´ë˜ìŠ¤ì˜ static ë©”ì†Œë“œê°€ ì‹¤í–‰ëœ ê²½ìš° í•´ë‹¹ í´ë˜ìŠ¤ì˜ static í•„ë“œì— ê°’ì„ í• ë‹¹ í˜¹ì€ ì‚¬ìš©í•˜ëŠ” ê²½ìš°(ë‹¨, static final ì œì™¸) Top-Level Classì¸ë°, assert ë¬¸ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°  ì´ ì¤‘ ì²«ë²ˆì§¸(newëŠ” private methodë¡œ ë§‰ì•„ë‘ì—ˆìŒ)ì™€ ë§ˆì§€ë§‰ ì¼€ì´ìŠ¤ë¥¼ ì œì™¸í•œ ì„¸ ê°€ì§€ ê²½ìš°ì— ëŒ€í•´ ClassLoadingì´ ë°œìƒí•˜ê³  Singleton ê°ì²´ê°€ ì´ˆê¸°í™”ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì. class.forName()ê³¼ í•¨ê»˜ Reflectionì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° Singleton.java 1 2 3 4 5 6 7 8 9 10 11 12  public class Singleton { public static final Singleton INSTANCE = new Singleton(); private Singleton() { System.out.println(\u0026#34;Simple singleton instance initialized.\u0026#34;); } public static void main(String[] args) throws Exception { System.out.println(\u0026#34;Hello world\u0026#34;); Class.forName(\u0026#34;com.leeyh0216.test.Singleton\u0026#34;); } }   ì‹¤í–‰ ê²°ê³¼ 1 2  Hello world Simple singleton instance initialized.   ìœ„ Test í´ë˜ìŠ¤ì—ì„œëŠ” Class.forName ë©”ì„œë“œë¥¼ í†µí•´ ê°•ì œë¡œ ClassLoadingì„ ìœ ë°œí•œë‹¤. ë”°ë¼ì„œ Singleton ê°ì²´ê°€ ì´ˆê¸°í™”ë˜ë©° \u0026ldquo;Simple singleton instance initialized\u0026rdquo; ë©”ì‹œì§€ê°€ ì¶œë ¥ëœë‹¤. í•´ë‹¹ í´ë˜ìŠ¤ì˜ static ë©”ì†Œë“œê°€ ì‹¤í–‰ëœ ê²½ìš° Singleton.java 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  public class Singleton { public static final Singleton INSTANCE = new Singleton(); private Singleton() { System.out.println(\u0026#34;Simple singleton instance initialized.\u0026#34;); } public static void func() { System.out.println(\u0026#34;This is static method\u0026#34;); } public static void main(String[] args) throws Exception { System.out.println(\u0026#34;Hello world\u0026#34;); Singleton.func(); } }   ì‹¤í–‰ ê²°ê³¼ 1 2 3  Hello world Simple singleton instance initialized. This is static method   ìœ„ Test í´ë˜ìŠ¤ì—ì„œëŠ” Singleton í´ë˜ìŠ¤ì˜ ì •ì  ë©”ì†Œë“œì¸ funcë¥¼ í˜¸ì¶œí•œë‹¤. ì •ì  ë©”ì†Œë“œ í˜¸ì¶œ ì‹œì—ëŠ” ClassLoadingì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— func ë©”ì†Œë“œ ì‹¤í–‰ ì „ì— Singleton ê°ì²´ê°€ ì´ˆê¸°í™”ë˜ë©° \u0026ldquo;Simple singleton instance initialized\u0026rdquo; ë©”ì‹œì§€ê°€ í˜¸ì¶œë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í•´ë‹¹ í´ë˜ìŠ¤ì˜ static í•„ë“œì˜ ê°’ì„ í• ë‹¹ í˜¹ì€ ì‚¬ìš©í•˜ëŠ” ê²½ìš° Singleton.java 1 2 3 4 5 6 7 8  public class Singleton { public static final Singleton INSTANCE = new Singleton(); public static int VALUE = 1; private Singleton() { System.out.println(\u0026#34;Simple singleton instance initialized.\u0026#34;); } }   Test.java(í• ë‹¹) 1 2 3 4 5 6  public class Test { public static void main(String[] args) throws Exception { System.out.println(\u0026#34;Hello world\u0026#34;); Singleton.VALUE = 2; } }   ì‹¤í–‰ ê²°ê³¼ 1 2  Hello world Simple singleton instance initialized.   Test.java(ì‚¬ìš©) 1 2 3 4 5 6  public class Test { public static void main(String[] args) throws Exception { System.out.println(\u0026#34;Hello world\u0026#34;); System.out.println(Singleton.VALUE); } }   ì‹¤í–‰ ê²°ê³¼ 1 2 3  Hello world Simple singleton instance initialized. 1   ìœ„ ë‘ ì¼€ì´ìŠ¤ ëª¨ë‘ ClassLoadingì´ ë°œìƒí•œë‹¤. ë‹¤ë§Œ, VALUEë¥¼ finalë¡œ ì§€ì •í•˜ì—¬ ìƒìˆ˜ë¡œ ë§Œë“œëŠ” ê²½ìš°ëŠ” ClassLoadingì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. Lazy Initialization Singletonì˜ static í•„ë“œë‚˜ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ì§€ë§Œ, ì‹±ê¸€í†¤ ê°ì²´ëŠ” ì´ˆê¸°í™”ì‹œí‚¤ì§€ ì•Šê³  ì‹¶ì€ ê²½ìš°ê°€ ìˆì„ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ê²½ìš°ì—ëŠ” Lazy Initialization ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. Lazy Initialization ë°©ì‹ì€ Singleton ê°ì²´ê°€ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì´ë¥¼ ì´ˆê¸°í™”(ì´ˆê¸°í™”ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš°ì—ë§Œ)í•˜ê³ , Singleton ê°ì²´ë¥¼ ë°˜í™˜ë°›ì„ ìˆ˜ ìˆëŠ” ì§„ì…ì (static ë©”ì†Œë“œ)ë¥¼ ì œê³µí•˜ëŠ” ë°©ì‹ì´ë‹¤. Singleton.java 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  public class Singleton { public static Singleton INSTANCE; private Singleton() { System.out.println(\u0026#34;Simple singleton instance initialized.\u0026#34;); } public static Singleton getInstance(){ if(INSTANCE == null) INSTANCE = new Singleton(); return INSTANCE; } public static void main(String[] args) throws Exception { System.out.println(\u0026#34;Hello world\u0026#34;); Singleton singleton = Singleton.getInstance(); } }   ì‹¤í–‰ ê²°ê³¼ 1 2  Hello world Simple singleton instance initialized.   ëª…ì‹œì ìœ¼ë¡œ getInstance ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠëŠ” ì´ìƒ Singleton ê°ì²´(INSTANCE)ê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, Eager Initialization ë°©ì‹ì˜ ë‹¨ì ì„ ë³´ì™„í•  ìˆ˜ ìˆë‹¤. Multi Thread í™˜ê²½ì—ì„œì˜ ë¬¸ì œì  Lazy Initialization ë°©ì‹ì€ Multi Thread í™˜ê²½ì—ì„œì˜ ë¬¸ì œì ì„ ê°€ì§€ê³  ìˆë‹¤. Multi Thread í™˜ê²½ì—ì„œ ì„œë¡œ ë‹¤ë¥¸ Threadë“¤ì´ ë™ì‹œì— getInstanceë¥¼ í˜¸ì¶œí•œë‹¤ê³  ìƒê°í•´ë³´ì. ìœ„ì˜ getInstanceëŠ” Multi Thread í™˜ê²½ì— ëŒ€í•œ ê³ ë ¤ê°€ ë˜ì–´ ìˆì§€ ì•Šê¸° ë–„ë¬¸ì—, if(INSTANCE == null)ì´ ì—¬ëŸ¬ë²ˆ ì°¸ì¸ ê²½ìš°ê°€ ë°œìƒí•˜ì—¬ ì—¬ëŸ¬ ê°œì˜ ê°ì²´ê°€ ìƒì„±ë  ìˆ˜ ìˆë‹¤. Singleton.java 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41  public class Singleton { public static final AtomicInteger NUM_INSTANCE = new AtomicInteger(0); private static Singleton INSTANCE; private Singleton() { System.out.println(\u0026#34;Constructor called\u0026#34;); } public static Singleton getInstance() { if (INSTANCE == null) { INSTANCE = new Singleton(); NUM_INSTANCE.incrementAndGet(); } return INSTANCE; } public static int getNumberOfInstance() { return NUM_INSTANCE.get(); } public static void main(String[] args) throws Exception { Thread[] threads = new Thread[1000]; for (int i = 0; i \u0026lt; threads.length; i++) { threads[i] = new Thread(new Runnable() { public void run() { Singleton.getInstance(); } }); } for (int i = 0; i \u0026lt; threads.length; i++) { threads[i].start(); } for (int i = 0; i \u0026lt; threads.length; i++) { threads[i].join(); } System.out.println(Singleton.getNumberOfInstance()); } }   ì‹¤í–‰ ê²°ê³¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called Constructor called 24   Multi Thread í™˜ê²½ì—ì„œ Lazy Initialization ë°©ë²• Multi Thread í™˜ê²½ì—ì„œ Singleton ê°ì²´ë¥¼ Lazy Initializationí•˜ëŠ” ëª‡ê°€ì§€ ë°©ë²•ì„ ì†Œê°œí•œë‹¤. ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œì— ë™ê¸°í™” í‚¤ì›Œë“œ ì‚¬ìš©í•˜ê¸° Singleton ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œ ìì²´ì— synchronizedë¥¼ ë¶™ì—¬ì£¼ê±°ë‚˜, ë‚´ë¶€ ì´ˆê¸°í™” êµ¬ë¬¸ì„ synchronized êµ¬ë¬¸ìœ¼ë¡œ ê°ì‹¸ì£¼ëŠ” ë°©ë²•ì´ ìˆë‹¤. ì •ì  íŒ©í„°ë¦¬ ë©”ì„œë“œ ìì²´ì— synchronized ë¶™ì´ê¸° ê¸°ì¡´ì˜ public static Singleton getInstance() ë¥¼ public static synchronized Singleton getInstance()ì™€ ê°™ì´ ë°”ê¾¸ëŠ” ë°©ë²•ì´ë‹¤. ë‚´ë¶€ ì´ˆê¸°í™” êµ¬ë¬¸ì„ synchronizedë¡œ ê°ì‹¸ì£¼ê¸° ì´ˆê¸°í™”ì— ì‚¬ìš©í•  Lock ê°ì²´ë¥¼ ë§Œë“¤ê³ , Singleton ê°ì²´ì˜ ì´ˆê¸°í™” ì—¬ë¶€ í™•ì¸ ì‹œ ë™ê¸°í™”í•˜ëŠ” ë°©ë²•ì´ë‹¤. 1 2 3 4 5 6 7 8 9 10  private static Object lock = new Object(); public static Singleton getInstance() { synchronized (lock) { if (INSTANCE == null) { INSTANCE = new Singleton(); } } return INSTANCE; }   ë™ê¸°í™” ë°©ì‹ì€ Multi Thread í™˜ê²½ì—ì„œ ê°ì²´ë¥¼ ì•ˆì „í•˜ê²Œ 1ê°œë¥¼ ìƒì„±í•  ìˆ˜ ìˆì§€ë§Œ, ê°ì²´ íšë“ ì‹œì˜ ë³‘ë ¬ì„±ì„ ìƒì–´ë²„ë¦°ë‹¤ëŠ” ë‹¨ì ì´ ì¡´ì¬í•œë‹¤. ë˜í•œ ì´ˆê¸° í˜¸ì¶œ ì´í›„ì—ëŠ” ê°ì²´ ì´ˆê¸°í™” í™•ì¸ êµ¬ë¬¸(if(INSTANCE) == null))ì´ ê³„ì†í•´ì„œ ì°¸ì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ë¶ˆí•„ìš”í•œ Lockì„ ê±°ëŠ” ìƒí™©ì´ ë°œìƒí•˜ê²Œ ëœë‹¤. DCL(Double-Checked-Locking) ë°©ì‹ ì‚¬ìš©í•˜ê¸° Multi Thread í™˜ê²½ì—ì„œ ë³‘ë ¬ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•´ì„œëŠ” ë™ê¸°í™” êµ¬ë¬¸ì„ í•„ìš”í•œ ê³³ì—ì„œë§Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤. DCL ë°©ì‹ì€ ë™ê¸°í™”ë¥¼ ìµœì†Œí™”í•˜ë¯€ë¡œì¨ ìœ„ì˜ ë°©ì‹ì˜ ë‹¨ì (ë¶ˆí•„ìš”í•œ Lockì„ ê±°ëŠ”)ì„ ì—†ì•¤ ë°©ì‹ì´ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12  private static Object lock = new Object(); public static Singleton getInstance() { if (INSTANCE == null) { synchronized (lock) { if (INSTANCE == null) { INSTANCE = new Singleton(); } } } return INSTANCE; }   ì²«ë²ˆì§¸ ifë¬¸ì„ í†µí•´ ê°ì²´ê°€ ì´ˆê¸°í™”ë˜ì—ˆëŠ”ì§€ ê²€ì‚¬í•  ë•ŒëŠ” ë™ê¸°í™”ë¥¼ í•˜ì§€ ì•Šê³ , ë‘ë²ˆì§¸ ifë¬¸ì„ í†µí•´ ê°ì²´ê°€ ì´ˆê¸°í™”ë˜ì—ˆëŠ”ì§€ ê²€ì‚¬í•  ë•ŒëŠ” ë™ê¸°í™”ë¥¼ ìˆ˜í–‰í•œë‹¤. getInstance í˜¸ì¶œ í›„ ì¶©ë¶„í•œ ì‹œê°„ì´ ì§€ë‚˜ ë™ê¸°í™”ê°€ í•„ìš” ì—†ì„ ë•ŒëŠ” ì²«ë²ˆì§¸ ifë¬¸ë§Œ ì‹¤í–‰í•˜ë¯€ë¡œì¨ ë™ê¸°í™”ì— ë”°ë¥¸ ë³‘ë ¬ì„± ê°ì†Œë¥¼ ê°ì†Œì‹œí‚¬ ìˆ˜ ìˆëŠ” ë°©ì‹ì´ë‹¤. ì–¸ëœ» ë³´ê¸°ì—ëŠ” ë™ê¸°í™” ë¬¸ì œë„ ì—†ê³  ì„±ëŠ¥ì ìœ¼ë¡œ ë›°ì–´ë‚œ ë°©ì‹ì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ìœ„ ì½”ë“œëŠ” ë¬¸ì œì ì„ ê°€ì§€ê³  ìˆë‹¤. ìœ„ DCL ì½”ë“œì˜ ë¬¸ì œì ê³¼ í•´ê²° ìœ„ DCL ì½”ë“œëŠ” JVMì˜ Low-Level ë™ì‘ ë°©ì‹ë•Œë¬¸ì— ë¬¸ì œê°€ ë°œìƒí•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ 2ê°œì˜ Thread(A, B)ê°€ getInstanceë¥¼ í˜¸ì¶œí–ˆë‹¤ê³  ìƒê°í•´ë³´ì. Thread AëŠ” INSTANCE = new Singleton() êµ¬ë¬¸ì„ ìˆ˜í–‰í•˜ê³  ìˆê³ , ì´ ë•Œ Thread BëŠ” ì²«ë²ˆì§¸ ifë¬¸ì—ì„œ INSTANCEì˜ ì´ˆê¸°í™” ì—¬ë¶€ë¥¼ ê²€ì‚¬(if(INSTANCE == null))í•˜ê³  ìˆë‹¤. ì—¬ê¸°ì„œ Thread Aê°€ ìˆ˜í–‰í•˜ëŠ” \u0026lsquo;ê°ì²´ ìƒì„±\u0026rsquo;ê³¼ \u0026lsquo;ë³€ìˆ˜ í• ë‹¹\u0026rsquo; êµ¬ë¬¸ì€ í•œë²ˆì— ì‹¤í–‰ë˜ì§€ ì•Šê³ , íŠ¹ì • ì‹œì ì—ëŠ” INSTANCEì—ëŠ” ì¼ë¶€ë§Œ ì´ˆê¸°í™”ëœ ê°ì²´ê°€ í• ë‹¹ë˜ì–´ ìˆì„ ìˆ˜ ìˆë‹¤. ì´ ë•Œ Thread BëŠ” non-null checkë§Œ í•˜ê¸° ë•Œë¬¸ì— ì¼ë¶€ë§Œ ì´ˆê¸°í™”ëœ ê°ì²´ë¥¼ ê°€ì ¸ë‹¤ ì“°ê²Œ ë˜ì–´ Crashê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” INSTANCE ê°ì²´ì— volatile í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì£¼ëŠ” ê²ƒì´ë‹¤. volatileì€ ì›ìì ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— ì²«ë²ˆì§¸ ifë¬¸ì´ ì™„ì „íˆ ì´ˆê¸°í™”ëœ ê°ì²´ë¥¼ ì–»ê±°ë‚˜ ì•„ë‹Œ ê²½ìš° ë‘˜ ì¤‘ í•˜ë‚˜ë¡œ ë™ì‘í•˜ê²Œ ëœë‹¤. Lazy Holder ë°©ì‹ ì‚¬ìš©í•˜ê¸° Multi Thread í™˜ê²½ì—ì„œë„ ì˜ ë™ì‘í•˜ê³ , Lazy Initializationë„ ê°€ëŠ¥í•œ ë°©ì‹ì´ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13  public class LazySingletonHolder { public static Singleton getInstance() { return Singleton.INSTANCE; } public static class Singleton { private static final Singleton INSTANCE = new Singleton(); private Singleton() { } } }   ìœ„ ì½”ë“œë¥¼ ë³´ë©´ \u0026lsquo;Lazy Initialization ë°©ì‹ì´ ì•„ë‹ˆì§€ ì•Šì€ê°€?\u0026rsquo; ë¼ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤. LazySingletonHolderì˜ getInstanceì—ì„œ Singleton í´ë˜ìŠ¤ì˜ INSTANCEë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ëŸ¬ë‚˜ Singleton í´ë˜ìŠ¤ì˜ INSTANCEëŠ” Singleton í´ë˜ìŠ¤ì˜ í´ë˜ìŠ¤ ë¡œë”©ì´ ì¼ì–´ë‚  ë•Œ ë°œìƒí•˜ê²Œ ë˜ê³ , ì´ëŠ” LazySingletonHolderì˜ getInstanceê°€ í˜¸ì¶œë˜ì—ˆì„ ë•Œì´ë‹¤. ë˜í•œ INSTANCEëŠ” static final ì´ê¸° ë•Œë¬¸ì— í´ë˜ìŠ¤ ë¡œë”©ì— ì˜í•´ 1íšŒë§Œ ì´ˆê¸°í™”ë˜ê³ , ì´ë¡œì¨ Multi Thread í™˜ê²½ì—ì„œì˜ ë¬¸ì œì ë„ ì—†ì–´ì§€ê²Œ ëœë‹¤. ","permalink":"https://youngeun-in.github.io/%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4-%EA%B5%AC%ED%98%84/","tags":["singleton","volatile"],"title":"ì‹±ê¸€í†¤ íŒ¨í„´ êµ¬í˜„"},{"categories":["java"],"contents":"ê° ìë£Œêµ¬ì¡°ëŠ” í•„ìš”ì— ë”°ë¼ ì„ íƒë˜ê³  í™œìš©ëœë‹¤. Map ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¡œëŠ” HashMap, HashTable, ConcurrentHashMap ë“±ì´ ìˆë‹¤. Map ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ë©´, \u0026lt;Key, Value\u0026gt; í˜•íƒœë¥¼ ëˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ ì…‹ì€ ë¬´ìŠ¨ íŠ¹ì§•ì„ ê°€ì§€ê³ , ì„œë¡œ ì–´ë–¤ ì°¨ì´ê°€ ìˆì„ê¹Œ? ì´ë²ˆ ê¸€ì—ì„œ í•´ë‹¹ êµ¬í˜„ì²´ë¥¼ ë¹„êµí•˜ë©° í™•ì¸í•´ë³´ì. HashMap  keyì™€ valueì— nullì„ í—ˆìš©í•œë‹¤. ë™ê¸°í™”ë¥¼ ë³´ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.  HashMapì€ thread-safeí•˜ì§€ ì•Šì•„, ì‹±ê¸€ ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²Œ ì¢‹ë‹¤. í•œí¸, ë™ê¸°í™” ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë°ì´í„°ë¥¼ íƒìƒ‰í•˜ëŠ” ì†ë„ê°€ ë¹ ë¥´ë‹¤. ê²°êµ­ HashTableê³¼ ConcurrentHashMapë³´ë‹¤ ë°ì´í„°ë¥¼ ì°¾ëŠ” ì†ë„ëŠ” ë¹ ë¥´ì§€ë§Œ, ì‹ ë¢°ì„±ê³¼ ì•ˆì •ì„±ì´ ë–¨ì–´ì§„ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  public class HashMap\u0026lt;K,V\u0026gt; extends AbstractMap\u0026lt;K,V\u0026gt; implements Map\u0026lt;K,V\u0026gt;, Cloneable, Serializable { ... public V put(K key, V value) { return putVal(hash(key), key, value, false, true); } final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) { Node\u0026lt;K,V\u0026gt;[] tab; Node\u0026lt;K,V\u0026gt; p; int n, i; if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; if ((p = tab[i = (n - 1) \u0026amp; hash]) == null) tab[i] = newNode(hash, key, value, null); else { Node\u0026lt;K,V\u0026gt; e; K k; if (p.hash == hash \u0026amp;\u0026amp; ((k = p.key) == key || (key != null \u0026amp;\u0026amp; key.equals(k)))) e = p; else if (p instanceof TreeNode) e = ((TreeNode\u0026lt;K,V\u0026gt;)p).putTreeVal(this, tab, hash, key, value); else { for (int binCount = 0; ; ++binCount) { if ((e = p.next) == null) { p.next = newNode(hash, key, value, null); if (binCount \u0026gt;= TREEIFY_THRESHOLD - 1) treeifyBin(tab, hash); break; } if (e.hash == hash \u0026amp;\u0026amp; ((k = e.key) == key || (key != null \u0026amp;\u0026amp; key.equals(k)))) break; p = e; } } if (e != null) { V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; } } ++modCount; if (++size \u0026gt; threshold) resize(); afterNodeInsertion(evict); return null; } ... }    HashTable  keyì™€ valueì— nullì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ë™ê¸°í™”ë¥¼ ë³´ì¥í•œë‹¤.  HashTableì€ thread-safeí•˜ê¸° ë•Œë¬¸ì—, ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ë©”ì†Œë“œ(get(), put(), remove() ë“±)ì— synchronized í‚¤ì›Œë“œê°€ ë¶™ì–´ ìˆë‹¤. í•´ë‹¹ í‚¤ì›Œë“œëŠ” ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ê¸° ì „ì— ì“°ë ˆë“œê°„ ë™ê¸°í™” ë½ì„ ê±´ë‹¤. ê·¸ë˜ì„œ ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì—ì„œë„ ë°ì´í„°ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•œë‹¤. ê·¸ëŸ¬ë‚˜, ì“°ë ˆë“œê°„ ë™ê¸°í™” ë½ì€ ë§¤ìš° ëŠë¦° ë™ì‘ì´ë¼ëŠ” ë‹¨ì ì´ ìˆë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  public class Hashtable\u0026lt;K,V\u0026gt; extends Dictionary\u0026lt;K,V\u0026gt; implements Map\u0026lt;K,V\u0026gt;, Cloneable, java.io.Serializable { ... public synchronized V put(K key, V value) { if (value == null) { throw new NullPointerException(); } Entry\u0026lt;?,?\u0026gt; tab[] = table; int hash = key.hashCode(); int index = (hash \u0026amp; 0x7FFFFFFF) % tab.length; @SuppressWarnings(\u0026#34;unchecked\u0026#34;) Entry\u0026lt;K,V\u0026gt; entry = (Entry\u0026lt;K,V\u0026gt;)tab[index]; for(; entry != null ; entry = entry.next) { if ((entry.hash == hash) \u0026amp;\u0026amp; entry.key.equals(key)) { V old = entry.value; entry.value = value; return old; } } addEntry(hash, key, value, index); return null; } ... }   ConcurrentHashMap  keyì™€ valueì— nullì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ë™ê¸°í™”ë¥¼ ë³´ì¥í•œë‹¤.  ConcurrentHashMapì€ thread-safeí•˜ê¸° ë•Œë¬¸ì—, ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ êµ¬í˜„ì²´ëŠ” HashMapì˜ ë™ê¸°í™” ë¬¸ì œë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë‚˜íƒ€ë‚¬ë‹¤. ë™ê¸°í™” ì²˜ë¦¬ë¥¼ í•  ë•Œ, ì–´ë–¤ Entryë¥¼ ì¡°ì‘í•˜ëŠ” ê²½ìš°ì— í•´ë‹¹ Entryì— ëŒ€í•´ì„œë§Œ ë½ì„ ê±´ë‹¤. ê·¸ë˜ì„œ HashTableë³´ë‹¤ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ì†ë„ê°€ ë¹ ë¥´ë‹¤. ì¦‰, Entry ì•„ì´í…œë³„ë¡œ ë½ì„ ê±¸ì–´ ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì—ì„œì˜ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¨ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72  public class ConcurrentHashMap\u0026lt;K,V\u0026gt; extends AbstractMap\u0026lt;K,V\u0026gt; implements ConcurrentMap\u0026lt;K,V\u0026gt;, Serializable { ... public V put(K key, V value) { return putVal(key, value, false); } final V putVal(K key, V value, boolean onlyIfAbsent) { if (key == null || value == null) { throw new NullPointerException(); } int hash = spread(key.hashCode()); int binCount = 0; for (Node\u0026lt;K,V\u0026gt;[] tab = table;;) { Node\u0026lt;K,V\u0026gt; f; int n, i, fh; if (tab == null || (n = tab.length) == 0) tab = initTable(); else if ((f = tabAt(tab, i = (n - 1) \u0026amp; hash)) == null) { if (casTabAt(tab, i, null, new Node\u0026lt;K,V\u0026gt;(hash, key, value, null))) break; } else if ((fh = f.hash) == MOVED) tab = helpTransfer(tab, f); else { V oldVal = null; synchronized (f) { if (tabAt(tab, i) == f) { if (fh \u0026gt;= 0) { binCount = 1; for (Node\u0026lt;K,V\u0026gt; e = f;; ++binCount) { K ek; if (e.hash == hash \u0026amp;\u0026amp; ((ek = e.key) == key || (ek != null \u0026amp;\u0026amp; key.equals(ek)))) { oldVal = e.val; if (!onlyIfAbsent) e.val = value; break; } Node\u0026lt;K,V\u0026gt; pred = e; if ((e = e.next) == null) { pred.next = new Node\u0026lt;K,V\u0026gt;(hash, key, value, null); break; } } } else if (f instanceof TreeBin) { Node\u0026lt;K,V\u0026gt; p; binCount = 2; if ((p = ((TreeBin\u0026lt;K,V\u0026gt;)f).putTreeVal(hash, key, value)) != null) { oldVal = p.val; if (!onlyIfAbsent) p.val = value; } } } } if (binCount != 0) { if (binCount \u0026gt;= TREEIFY_THRESHOLD) treeifyBin(tab, i); if (oldVal != null) return oldVal; break; } } } addCount(1L, binCount); return null; } ... }   ì •ë¦¬     HashMap HashTable ConcurrentHashMap     keyì™€ valueì— null í—ˆìš© O X X   ë™ê¸°í™” ë³´ì¥(Thread-safe) X O O   ì¶”ì²œ í™˜ê²½ ì‹±ê¸€ ì“°ë ˆë“œ ë©€í‹° ì“°ë ˆë“œ ë©€í‹° ì“°ë ˆë“œ     ê²°ë¡  ì‹±ê¸€ ì“°ë ˆë“œ í™˜ê²½ì´ë©´ HashMapì„, ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì´ë©´ HashTableì´ ì•„ë‹Œ ConcurrentHashMapì„ ì“°ì. ê·¸ ì´ìœ ëŠ” HashTableë³´ë‹¤ ConcurrentHashMapì´ ì„±ëŠ¥ì ìœ¼ë¡œ ìš°ìˆ˜í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ì•ì—ì„œë„ ì–¸ê¸‰í–ˆë“¯ì´ HashTableì€ ì“°ë ˆë“œê°„ ë½ì„ ê±¸ì–´ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ì†ë„ê°€ ëŠë¦¬ë‹¤. ë°˜ë©´, ConcurrentHashMapì€ Entry ì•„ì´í…œë³„ë¡œ ë½ì„ ê±¸ì–´ ë°ì´í„°ë¥¼ ë‹¤ë£¨ëŠ” ì†ë„ê°€ ë¹ ë¥´ë‹¤. ì°¸ê³  https://tecoble.techcourse.co.kr/post/2021-11-26-hashmap-hashtable-concurrenthashmap/ ","permalink":"https://youngeun-in.github.io/hashmap-vs-hashtable-vs-concurrenthashmap/","tags":["hashmap","hashtable","concurrenthashmap"],"title":"HashMap vs HashTable vs ConcurrentHashMap"},{"categories":["java"],"contents":"Reflection APIë€? êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ íƒ€ì…ì„ ì•Œì§€ ëª»í•´ë„ ê·¸ í´ë˜ìŠ¤ì˜ ì •ë³´(ë©”ì„œë“œ, íƒ€ì…, ë³€ìˆ˜ ë“±ë“±)ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ìë°” APIë‹¤. ì•„ë˜ì™€ ê°™ì´ Car í´ë˜ìŠ¤ê°€ ì¡´ì¬í•œë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  public class Car { private final String name; private int position; public Car(String name, int position) { this.name = name; this.position = position; } public void move() { this.position++; } public int getPosition() { return position; } }   ìë°”ì˜ íŠ¹ì§• ì¤‘ í•˜ë‚˜ì¸ ë‹¤í˜•ì„± ë•ë¶„ì— ì•„ë˜ì™€ ê°™ì´ ê°ì²´ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤. 1 2 3  public static void main(String[] args) { Object obj = new Car(\u0026#34;foo\u0026#34;, 0); }   ê·¸ëŸ¼ ì´ë ‡ê²Œ ìƒì„±ëœ objë¼ëŠ” ì´ë¦„ì˜ ê°ì²´ê°€ Car í´ë˜ìŠ¤ì˜ move ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œ? ì •ë‹µì€ ë¶ˆê°€ëŠ¥ì´ë‹¤. ì™œì¼ê¹Œ? ìë°”ëŠ” ì»´íŒŒì¼ëŸ¬ë¥¼ ì‚¬ìš©í•œë‹¤. ì¦‰ ì»´íŒŒì¼ íƒ€ì„ì— íƒ€ì…ì´ ê²°ì •ëœë‹¤. objë¼ëŠ” ì´ë¦„ì˜ ê°ì²´ëŠ” ì»´íŒŒì¼ íƒ€ì„ì— Objectë¡œ íƒ€ì…ì´ ê²°ì •ëê¸° ë•Œë¬¸ì— Object í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì™€ ë©”ì„œë“œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œëŠ” í•„ì—°ì ìœ¼ë¡œ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë‚œë‹¤. 1 2 3 4  public static void main(String[] args) { Object obj = new Car(\u0026#34;foo\u0026#34;, 0); obj.move(); // ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒ java: cannot find symbol }   ìƒì„±ëœ objë¼ëŠ” ê°ì²´ëŠ” Object í´ë˜ìŠ¤ë¼ëŠ” íƒ€ì…ë§Œ ì•Œ ë¿, Car í´ë˜ìŠ¤ë¼ëŠ” êµ¬ì²´ì ì¸ íƒ€ì…ì€ ëª¨ë¥¸ë‹¤. ê²°êµ­ ì»´íŒŒì¼ëŸ¬ê°€ ìˆëŠ” ìë°”ëŠ” êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ë¥¼ ëª¨ë¥´ë©´ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì •ë³´ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ ë¶ˆê°€ëŠ¥í•œ ì¼ì„ ë§ˆë²•ì²˜ëŸ¼ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ê²ƒì´ Reflection APIì´ë‹¤. ìœ„ì—ì„œ ë´¤ë˜ ì˜ˆì œì™€ ë˜‘ê°™ì€ ìƒí™©ì—ì„œ Reflection APIë¥¼ í™œìš©í•´ Car í´ë˜ìŠ¤ì˜ move ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ë³´ì. 1 2 3 4 5 6 7 8 9 10 11 12 13  public static void main(String[] args) throws Exception { Object obj = new Car(\u0026#34;foo\u0026#34;, 0); Class carClass = Car.class; Method move = carClass.getMethod(\u0026#34;move\u0026#34;); // move ë©”ì„œë“œ ì‹¤í–‰, invoke(ë©”ì„œë“œë¥¼ ì‹¤í–‰ì‹œí‚¬ ê°ì²´, í•´ë‹¹ ë©”ì„œë“œì— ë„˜ê¸¸ ì¸ì)  move.invoke(obj, null); Method getPosition = carClass.getMethod(\u0026#34;getPosition\u0026#34;); int position = (int)getPosition.invoke(obj, null); System.out.println(position); // ì¶œë ¥ ê²°ê³¼: 1 }   move ë©”ì„œë“œê°€ ì‹¤í–‰ë˜ê³  0ìœ¼ë¡œ ì´ˆê¸°í™”í–ˆë˜ Car í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ positionì´ 1ë¡œ ì¶œë ¥ë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤. Reflection APIë¡œ êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ Car íƒ€ì…ì„ ì•Œì§€ ëª»í•´ë„ move ë©”ì„œë“œì— ì ‘ê·¼í•œ ê²ƒì´ë‹¤. 1  Class carClass2 = Class.forName(\u0026#34;Car\u0026#34;);   ìœ„ì˜ ì˜ˆì œì²˜ëŸ¼ í´ë˜ìŠ¤ì˜ ì´ë¦„ë§Œìœ¼ë¡œë„ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤. ë‹¤ì‹œ ë§í•´ì„œ Reflection APIëŠ” í´ë˜ìŠ¤ì˜ ì´ë¦„ë§Œ ê°€ì§€ê³ ë„ ìƒì„±ì, í•„ë“œ, ë©”ì„œë“œ ë“±ë“± í•´ë‹¹ í´ë˜ìŠ¤ì— ëŒ€í•œ ê±°ì˜ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ë§ˆë²• ê°™ì€ APIë¼ëŠ” ê²ƒì´ë‹¤. Reflectionì€ ì–´ë–»ê²Œ ê°€ëŠ¥í• ê¹Œ? ìë°”ì—ì„œëŠ” JVMì´ ì‹¤í–‰ë˜ë©´ ì‚¬ìš©ìê°€ ì‘ì„±í•œ ìë°” ì½”ë“œê°€ ì»´íŒŒì¼ëŸ¬ë¥¼ ê±°ì³ ë°”ì´íŠ¸ ì½”ë“œë¡œ ë³€í™˜ë˜ì–´ static ì˜ì—­ì— ì €ì¥ëœë‹¤. Reflection APIëŠ” ì´ ì •ë³´ë¥¼ í™œìš©í•œë‹¤. ê·¸ë˜ì„œ í´ë˜ìŠ¤ ì´ë¦„ë§Œ ì•Œê³  ìˆë‹¤ë©´ ì–¸ì œë“  static ì˜ì—­ì„ ë’¤ì ¸ì„œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. Reflectionì„ ì–´ë””ì— í™œìš©í•  ìˆ˜ ìˆì„ê¹Œ? ìœ„ì—ì„œ ì‚´í´ë´¤ë˜ ì˜ˆì œ ì½”ë“œë¥¼ ë³´ë©´ ë©€ì©¡í•œ Car ê°ì²´ë¥¼ Object íƒ€ì…ìœ¼ë¡œ ìƒì„±í•˜ê³  ìˆë‹¤. ì‹¤ì œë¡œ ìš°ë¦¬ê°€ ì½”ë“œë¥¼ ì‘ì„±í•  ë•ŒëŠ” ì˜ˆì œì™€ ê°™ì´ ì‘ì„±í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ìš°ë¦¬ê°€ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ì„œ Reflectionì„ í™œìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤. êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ë¥¼ ëª¨ë¥¼ ì¼ì´ ê±°ì˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤. ê²Œë‹¤ê°€ Reflectionì€ ë§ˆë²• ê°™ì€ í˜ì„ ê°€ì§€ê³  ìˆëŠ” ë§Œí¼ ì¹˜ëª…ì ì¸ ë‹¨ì ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤. ë‹¹ì—°íˆ ì‚¬ìš©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ë©´ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²Œ ì¢‹ë‹¤. ì¹˜ëª…ì ì¸ ë‹¨ì  ì¤‘ ëŒ€í‘œì ìœ¼ë¡œ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œê°€ ìˆë‹¤. ì»´íŒŒì¼ íƒ€ì„ì´ ì•„ë‹Œ ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ íƒ€ì…ì„ ë¶„ì„í•˜ê³  ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ë¯€ë¡œ JVMì„ ìµœì í™”í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” private ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜, ë©”ì„œë“œì— ì ‘ê·¼í•˜ê¸° ë•Œë¬¸ì— ë‚´ë¶€ë¥¼ ë…¸ì¶œí•˜ë©´ì„œ ì¶”ìƒí™”ê°€ ê¹¨ì§„ë‹¤. ì´ë¡œ ì¸í•´ ì˜ˆê¸°ì¹˜ ëª»í•œ ë¶€ì‘ìš©ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ê²°ë¡ ì ìœ¼ë¡œ Reflectionì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œë³´ë‹¤ëŠ” í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ë§ì´ ì‚¬ìš©ëœë‹¤. í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì‚¬ìš©ìê°€ ì–´ë–¤ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì§€ ì˜ˆì¸¡í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë™ì ìœ¼ë¡œ í•´ê²°í•´ì£¼ê¸° ìœ„í•´ Reflectionì„ ì‚¬ìš©í•œë‹¤. ì‹¤ì œë¡œ intellijì˜ ìë™ì™„ì„±, jackson ë¼ì´ë¸ŒëŸ¬ë¦¬, Hibernate ë“±ë“± ë§ì€ í”„ë ˆì„ì›Œí¬ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ Reflectionì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤. Spring Frameworkì—ì„œë„ Reflection APIë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ëŒ€í‘œì ìœ¼ë¡œ Spring Containerì˜ BeanFactoryê°€ ìˆë‹¤. Beanì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰í•œ í›„ ëŸ°íƒ€ì„ì— ê°ì²´ê°€ í˜¸ì¶œë  ë•Œ ë™ì ìœ¼ë¡œ ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ”ë° ì´ë•Œ Spring Containerì˜ BeanFactoryì—ì„œ ë¦¬í”Œë ‰ì…˜ì„ ì‚¬ìš©í•œë‹¤. Spring Data JPA ì—ì„œ Entityì— ê¸°ë³¸ ìƒì„±ìê°€ í•„ìš”í•œ ì´ìœ ë„ ë™ì ìœ¼ë¡œ ê°ì²´ ìƒì„± ì‹œ Reflection APIë¥¼ í™œìš©í•˜ê¸° ë•Œë¬¸ì´ë‹¤. Reflection APIë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ëŠ” ì •ë³´ ì¤‘ í•˜ë‚˜ê°€ ìƒì„±ìì˜ ì¸ì ì •ë³´ì´ë‹¤. ê·¸ë˜ì„œ ê¸°ë³¸ ìƒì„±ìê°€ ë°˜ë“œì‹œ ìˆì–´ì•¼ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ê¸°ë³¸ ìƒì„±ìë¡œ ê°ì²´ë¥¼ ìƒì„±ë§Œ í•˜ë©´ í•„ë“œ ê°’ ë“±ì€ Reflection APIë¡œ ë„£ì–´ì¤„ ìˆ˜ ìˆë‹¤. ì¶œì²˜ https://tecoble.techcourse.co.kr/post/2020-07-16-reflection-api/ ","permalink":"https://youngeun-in.github.io/%EC%9E%90%EB%B0%94%EC%9D%98-reflection/","tags":["reflection"],"title":"ìë°”ì˜ Reflection"},{"categories":["java"],"contents":"Java ì»´íŒŒì¼ ê³¼ì • ìë°” ì†ŒìŠ¤ íŒŒì¼(*.java)ì„í•´ë‹¹ íŒŒì¼ì„ Java Compilerê°€ JVMì´ í•´ì„í•  ìˆ˜ ìˆëŠ” íŒŒì¼ì¸ Java ByteCode (*.class)íŒŒì¼ë¡œ ë³€í™˜í•œë‹¤. Java CompilerëŠ” Java ì„¤ì¹˜ ì‹œ Javac.exeë¼ëŠ” ì‹¤í–‰ íŒŒì¼ í˜•íƒœë¡œ ì¡´ì¬í•œë‹¤. Java ë°”ì´íŠ¸ ì½”ë“œë€? Java ë°”ì´íŠ¸ ì½”ë“œë€ Java Source Fileì„ Java Compilerê°€ ì»´íŒŒì¼í•´ ë§Œë“  íŒŒì¼ì´ë‹¤. Java Compilerì— ì˜í•´ ë³€í™˜ë˜ëŠ” ì½”ë“œì˜ ëª…ë ¹ì–´ í¬ê¸°ê°€ 1byteì´ê¸° ë•Œë¬¸ì— Java ë°”ì´íŠ¸ì½”ë“œë¼ê³  ë¶ˆë¦°ë‹¤. Java ë°”ì´íŠ¸ ì½”ë“œëŠ” JVMì´ í•´ì„í•  ìˆ˜ ìˆëŠ” ì–¸ì–´ì´ë©° *.class í™•ì¥ìë¥¼ ê°€ì§„ë‹¤. Java ì‹¤í–‰ ê³¼ì •  Java Compilerë¥¼ í†µí•´ ë§Œë“¤ì–´ì§„ Java Bytecode (*.class)ë¥¼ Class Loaderë¥¼ í†µí•´ ê°€ì ¸ì˜¨ í›„ Runtime Data Areaì— ë°°ì¹˜í•œë‹¤. Execution Engineì—ì„œ ë°”ì´íŠ¸ì½”ë“œë¥¼ ê¸°ê³„ì–´ë¡œ í•´ì„í•œë‹¤. Execution Engineì€ ì¸í„°í”„ë¦¬í„° ë°©ì‹ í˜¹ì€ JIT(Just-In-Time) Compiler ë°©ì‹ì´ ìˆë‹¤.  ì¸í„°í”„ë¦¬í„° ë°©ì‹ì€ ì†ŒìŠ¤ ì½”ë“œë¥¼ í•œ ë¬¸ì¥ì”© ì½ìœ¼ë©° í•´ë‹¹ ë¬¸ì¥ì„ ê¸°ê³„ì–´ ì½”ë“œë¡œ ë³€í™˜ì‹œì¼œì¤€ë‹¤. JIT CompilerëŠ” ì‹¤í–‰ ì‹œì ì— ê¸°ê³„ì–´ ì½”ë“œë¡œ ë³€í™˜ì‹œì¼œì¤€ë‹¤.   í”„ë¡œì„¸ì„œëŠ” ê¸°ê³„ì–´ì— ë”°ë¼ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.  JIT ì»´íŒŒì¼ëŸ¬ JIT(Just-In-Time) ì»´íŒŒì¼ëŸ¬ëŠ” JVMì˜ Execution Engineì´ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ìš´ì˜ì²´ì œì— ë§ëŠ” ê¸°ê³„ì–´ë¡œ ë³€í™˜ì‹œì¼œì£¼ëŠ” ë°©ì‹ì¤‘ í•˜ë‚˜ì´ë‹¤. JIT ì»´íŒŒì¼ëŸ¬ëŠ” í”„ë¡œê·¸ë¨ì„ ì‹¤ì œ ì‹¤í–‰í•˜ëŠ” ì‹œì ì— ê¸°ê³„ì–´ë¥¼ ë²ˆì—­í•œë‹¤. ì´ë ‡ê²Œë§Œ ë³´ë©´ ì¸í„°í”„ë¦¬í„° ë°©ì‹ê³¼ì˜ ì°¨ì´ì ì´ ì—†ì–´ë³´ì´ì§€ë§Œ JIT ì»´íŒŒì¼ëŸ¬ëŠ” ê°™ì€ ì½”ë“œë¥¼ ë§¤ë²ˆ í•´ì„í•˜ì§€ ì•Šê³  ê¸°ê³„ì–´ë¡œ ë²ˆì—­í•˜ë©´ì„œ ìºì‹±í•œë‹¤. í•´ë‹¹ íŒŒì¼ì´ ë‹¤ì‹œ ê¸°ê³„ì–´ë¡œ ì»´íŒŒì¼ ëœë‹¤ë©´ ì´ì „ íŒŒì¼ê³¼ ë¹„êµí•´ì„œ ë°”ë€ ë¶€ë¶„ì€ ìƒˆë¡­ê²Œ ì»´íŒŒì¼í•˜ê³  ë³€ë™ ì‚¬í•­ì´ ì—†ëŠ” ë¶€ë¶„ì€ ìºì‹±ëœ ì½”ë“œë¥¼ ì‚¬ìš©í•œë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì€ ì¸í„°í”„ë¦¬í„° ì†ë„ê°€ ëŠë¦° ì ì„ JIT ì»´íŒŒì¼ëŸ¬ë¡œ ê°œì„ í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ëœë‹¤. ","permalink":"https://youngeun-in.github.io/java-%EC%8B%A4%ED%96%89-%EA%B3%BC%EC%A0%95/","tags":["compiler","interpreter"],"title":"Java ì‹¤í–‰ ê³¼ì •"},{"categories":["java"],"contents":"JVMì˜ êµ¬ì„±ìš”ì†Œ JVMì€ í¬ê²Œ Class loader, Runtime Data Areas, Excution Engine 3ê°€ì§€ë¡œ êµ¬ì„±ëœë‹¤. Class Loader(í´ë˜ìŠ¤ ë¡œë”) Java ì»´íŒŒì¼ëŸ¬ë¡œ ì»´íŒŒì¼ëœ Java ë°”ì´íŠ¸ ì½”ë“œë¥¼ Runtime ì‹œì ì— JVMë‚´ë¡œ ê°€ì ¸ì˜¤ê³  Runtime Data Area(JVM ë©”ëª¨ë¦¬ ì˜ì—­)ì— ë°°ì¹˜í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤. Runtime Data Area JVMì˜ ë©”ëª¨ë¦¬ ì˜ì—­ì— í•´ë‹¹í•˜ë©° Method Area, Heap Area, Stack Area, PC Register, Native Method Stackìœ¼ë¡œ ì„¸ë¶„í™”ëœë‹¤.  Method Area : Class, Interface, Method, Field, Static, Final ë³€ìˆ˜ ë“±ì„ ë³´ê´€í•˜ëŠ” ì˜ì—­ Heap Area : new í‚¤ì›Œë“œë¡œ ìƒì„±ëœ ê°ì²´ë‚˜ ë°°ì—´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³´ê´€í•˜ëŠ” ì˜ì—­, Runtime ì‹œ ë™ì ìœ¼ë¡œ ìƒì„±ë˜ê³  JVMì´ ì‚¬ìš©ì—¬ë¶€ë¥¼ íŒë‹¨ í›„ Garbage Collectionì„ í•˜ëŠ” ì˜ì—­ Stack Area : Heap Areaì— ë™ì ìœ¼ë¡œ ìƒì„±ë˜ì–´ ë³´ê´€ë˜ìˆëŠ” ê°ì²´(ì°¸ì¡° íƒ€ì…)ì˜ ë˜í¼ëŸ°ìŠ¤ë¥¼ ë³´ê´€í•˜ëŠ” ì˜ì—­, ê¸°ë³¸ íƒ€ì…ì˜ ê²½ìš° ì§ì ‘ Stack Areaì— ë³´ê´€ë¨ PC Register : Threadê°€ ìƒì„±ë  ë•Œ ìƒì„±ë˜ëŠ” ì˜ì—­ìœ¼ë¡œì„œ Threadë§ˆë‹¤ í•˜ë‚˜ì˜ ì˜ì—­ì„ ê°€ì§„ë‹¤. JVMì´ í˜„ì¬ ìˆ˜í–‰ì¤‘ì¸ ëª…ë ¹ì˜ ì£¼ì†Œë¥¼ ê°€ì§ Native Method Stack : Javaì™¸ ë‹¤ë¥¸ ì–¸ì–´ë¡œ ì‘ì„±ëœ Native Codeë¥¼ ìœ„í•œ Stack ì˜ì—­  Execution Engine Class Loaderë¥¼ í†µí•´ Runtime Data Areaì˜ì—­ì— ë°°ì¹˜ëœ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ","permalink":"https://youngeun-in.github.io/jvm%EC%9D%98-%EA%B5%AC%EC%84%B1%EC%9A%94%EC%86%8C/","tags":["jvm"],"title":"JVMì˜ êµ¬ì„±ìš”ì†Œ"},{"categories":["DB"],"contents":"ìºì‹œë€ cacheë€ ì‚¬ìš©ìì˜ ì…ì¥ì—ì„œ ë°ì´í„°ì˜ ì›ë˜ ì†ŒìŠ¤ë³´ë‹¤ ë” ë¹ ë¥´ê²Œ ê·¸ë¦¬ê³  ë” íš¨ìœ¨ì ìœ¼ë¡œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ì„ì‹œ ë°ì´í„° ì €ì¥ì†Œë¥¼ ëœ»í•œë‹¤. ëŒ€ë¶€ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì†ë„ í–¥ìƒì„ ìœ„í•´ cacheë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ìºì‹œì— ë°ì´í„°ë‚˜ ê³„ì‚°ëœ ê²°ê³¼ ê°’ì˜ ë³µì‚¬ë³¸ì„ ì €ì¥í•´ ë‘ ìœ¼ë¡œì¨ ì „ì²´ì ì¸ ì²˜ë¦¬ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¨ë‹¤. ìºì‹œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.  ë°ì´í„°ì— ì§ì ‘ì ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ë•Œ ë°ì´í„°ê°€ ì˜ ë³€í•˜ì§€ ì•ŠëŠ” ê²½ìš° ë°˜ë³µì ìœ¼ë¡œ ë™ì¼í•œ ê²°ê³¼ë¥¼ ëŒë ¤ì£¼ëŠ” ê²½ìš° (ì´ë¯¸ì§€ì™€ ì¸ë„¤ì¼ ë“±)  Redisë€ ë ˆë””ìŠ¤ëŠ” ì „ ì„¸ê³„ì—ì„œ ê°€ì¥ ìœ ëª…í•œ caching ì†”ë£¨ì…˜ì´ë‹¤. ë‹¨ìˆœí•˜ê²Œ key-value í˜•íƒœë¡œ ì €ì¥í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì–´ë–¤ ë°ì´í„°ë¼ë„ ì‰½ê²Œ ì €ì¥í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ë ˆë””ìŠ¤ëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì˜¬ë ¤ë‘ëŠ” ì¸ë©”ëª¨ë¦¬ ë°ì´í„° ìŠ¤í† ì–´ì´ë‹¤. í‰ê·  ì½ê¸° ë° ì“°ê¸° ì‘ì—… ì†ë„ê°€ 1ë°€ë¦¬ ì„¸ì»¨ë“œ ë¯¸ë§Œì´ë‹ˆ ì´ˆë‹¹ ìˆ˜ë°±ë§Œ ê±´ì˜ ì‘ì—…ì´ ê°€ëŠ¥í•˜ë‹¤. ìºì‹± ì „ëµ ë ˆë””ìŠ¤ë¥¼ cacheë¡œ ì‚¬ìš©í•  ë•Œ ì–´ë–»ê²Œ ë°°ì¹˜í•˜ëŠ”ì§€ê°€ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë¼ì¹˜ê¸° ë•Œë¬¸ì— caching ì „ëµì€ ë°ì´í„°ì˜ ìœ í˜•ê³¼ í•´ë‹¹ ë°ì´í„°ì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ íŒ¨í„´ì„ ì˜ ê³ ë ¤í•´ì„œ ì„ íƒí•´ì•¼ í•œë‹¤. ì½ê¸° ì „ëµ Look-Aside(Lazy Loading) ì´ êµ¬ì¡°ëŠ” ë ˆë””ìŠ¤ë¥¼ cacheë¡œ ì“¸ ë•Œ ê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë°ì´í„°ë¥¼ ì°¾ì„ ë•Œ cacheì— ë¨¼ì € í™•ì¸í•œë‹¤. cacheì— ë°ì´í„°ê°€ ìˆìœ¼ë©´ cacheì—ì„œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì˜¤ëŠ” ì‘ì—…ì„ ë°˜ë³µí•œë‹¤. ë§Œì•½ ë ˆë””ìŠ¤ì— ì°¾ëŠ” í‚¤ê°€ ì—†ë‹¤ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ DBì— ì ‘ê·¼í•´ì„œ ë°ì´í„°ë¥¼ ì§ì ‘ ê°€ì§€ê³  ì˜¨ ë’¤ ë‹¤ì‹œ ë ˆë””ìŠ¤ì— ì €ì¥í•˜ëŠ” ê³¼ì •ì„ ê±°ì³ì•¼ í•œë‹¤. ë”°ë¼ì„œ cacheëŠ” ì°¾ëŠ” ë°ì´í„°ê°€ ì—†ì„ ë•Œì—ë§Œ ì…ë ¥ë˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ lazy loadingì´ë¼ê³ ë„ ë¶€ë¥¸ë‹¤. ì´ êµ¬ì¡°ëŠ” ë ˆë””ìŠ¤ê°€ ë‹¤ìš´ë˜ë”ë¼ë„ ë°”ë¡œ ì¥ì• ë¡œ ì´ì–´ì§€ì§€ ì•Šê³  DBì—ì„œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì˜¬ ìˆ˜ ìˆë‹¤. ëŒ€ì‹  cacheë¡œ ë¶™ì–´ìˆë˜ ì»¤ë„¥ì…˜ì´ ë§ì´ ìˆì—ˆë‹¤ë©´ ê·¸ ì»¤ë„¥ì…˜ì´ ëª¨ë‘ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë¶™ê¸° ë•Œë¬¸ì— DBì— ê°‘ìê¸° ë§ì€ ë¶€í•˜ê°€ ëª°ë¦´ ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ì´ëŸ° ê²½ìš°ì— cacheë¥¼ ìƒˆë¡œ íˆ¬ì…í•˜ê±°ë‚˜ DBì—ë§Œ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì €ì¥í–ˆë‹¤ë©´ ì²˜ìŒì— ìºì‹œ ë¯¸ìŠ¤ê°€ ì—„ì²­ ë°œìƒí•´ì„œ ì„±ëŠ¥ì— ì €í•˜ê°€ ì˜¬ ìˆ˜ ìˆë‹¤. ì´ëŸ´ ë•Œì—ëŠ” ë¯¸ë¦¬ DBì—ì„œ cacheë¡œ ë°ì´í„°ë¥¼ ë°€ì–´ ë„£ì–´ì£¼ëŠ” ì‘ì—…ì„ í•  ìˆ˜ ìˆëŠ”ë°, ì´ë¥¼ cache warmingì´ë¼ê³ ë„ í•œë‹¤. ì“°ê¸° ì „ëµ Write-Around write around ë°©ì‹ì€ DBì—ë§Œ ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤. ì¼ë‹¨ ëª¨ë“  ë°ì´í„°ëŠ” DBì— ì €ì¥ë˜ê³  cache missê°€ ë°œìƒí•œ ê²½ìš°ì—ë§Œ cacheì— ë°ì´í„°ë¥¼ ëŒì–´ì˜¤ê²Œ ëœë‹¤. ì´ ê²½ìš°ì—” cahce ë‚´ì˜ ë°ì´í„°ì™€ DB ë‚´ì˜ ë°ì´í„°ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. Write-Through write-through ì „ëµì€ DBì— ë°ì´í„°ë¥¼ ì €ì¥í•  ë•Œ cacheì—ë„ í•¨ê»˜ ì €ì¥í•˜ëŠ” ë°©ë²•ì´ë‹¤. cacheëŠ” í•­ìƒ ìµœì‹  ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ ì €ì¥í•  ë•Œë§ˆë‹¤ ë‘ ë‹¨ê³„ ìŠ¤í…ì„ ê±°ì³ì•¼ í•˜ê¸° ë•Œë¬¸ì— ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¬ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ì €ì¥í•˜ëŠ” ë°ì´í„°ê°€ ì¬ì‚¬ìš©ë˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆëŠ”ë° ë¬´ì¡°ê±´ ìºì‹œì— ë„£ì–´ë²„ë¦¬ê¸° ë•Œë¬¸ì— ì´ëŠ” ì¼ì¢…ì˜ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ë¼ê³ ë„ ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ì´ë ‡ê²Œ ë°ì´í„°ë¥¼ ì €ì¥í•  ë•ŒëŠ” ëª‡ ë¶„ í˜¹ì€ ëª‡ ì‹œê°„ ë™ì•ˆë§Œ ë°ì´í„°ë¥¼ ë³´ê´€í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì¸ expire timeì„ ì„¤ì •í•´ ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì¶œì²˜ https://youtu.be/92NizoBL4uA ","permalink":"https://youngeun-in.github.io/redis/","tags":["cache"],"title":"Redis"},{"categories":["DB"],"contents":"ì¸ë±ìŠ¤ì˜ ì¢…ë¥˜ í´ëŸ¬ìŠ¤í„°í˜• ì¸ë±ìŠ¤(Clustered Index)  ì˜ì–´ ì‚¬ì „ì²˜ëŸ¼ ì±…ì˜ ë‚´ìš© ìì²´ê°€ ìˆœì„œëŒ€ë¡œ ì •ë ¬ë˜ì–´ ìˆì–´ì„œ ì¸ë±ìŠ¤ ìì²´ê°€ ì±…ì˜ ë‚´ìš©ê³¼ ê°™ì€ ê²ƒ í…Œì´ë¸” ë‹¹ í•œ ê°œë§Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì–´ëŠ ì—´ì— í´ëŸ¬ìŠ¤í„°í˜• ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ”ì§€ì— ë”°ë¼ì„œ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤. ìƒì„± ì‹œì—ëŠ” ë°ì´í„° í˜ì´ì§€ ì „ì²´ê°€ ë‹¤ì‹œ ì •ë ¬ëœë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì´ë¯¸ ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ê°€ ì…ë ¥ëœ ìƒíƒœë¼ë©´ ì‹ ì¤‘í•˜ê²Œ ìƒê°í•´ì•¼ í•œë‹¤. ë³´ì¡° ì¸ë±ìŠ¤ë³´ë‹¤ ê²€ìƒ‰ ì†ë„ëŠ” ë” ë¹ ë¥´ë‹¤. í•˜ì§€ë§Œ ë°ì´í„°ì˜ ì…ë ¥/ìˆ˜ì •/ì‚­ì œëŠ” ë” ëŠë¦¬ë‹¤.  ë³´ì¡° ì¸ë±ìŠ¤(Secondary Index)  \u0026lt;ì°¾ì•„ë³´ê¸°\u0026gt;ê°€ ë³„ë„ë¡œ ìˆê³ , \u0026lt;ì°¾ì•„ë³´ê¸°\u0026gt;ë¥¼ ì°¾ì€ í›„ì— ê·¸ ì˜†ì— í‘œì‹œëœ í˜ì´ì§€ë¡œ ê°€ì•¼ ì‹¤ì œ ì°¾ëŠ” ë‚´ìš©ì´ ìˆëŠ” ê²ƒ ë°ì´í„° í˜ì´ì§€ëŠ” ê·¸ëƒ¥ ë‘” ìƒíƒœì—ì„œ ë³„ë„ì˜ í˜ì´ì§€ì— ì¸ë±ìŠ¤ë¥¼ êµ¬ì„±í•œë‹¤. ì¸ë±ìŠ¤ ìì²´ì˜ ë¦¬í”„ í˜ì´ì§€ëŠ” ë°ì´í„°ê°€ ì•„ë‹ˆë¼ ë°ì´í„°ê°€ ìœ„ì¹˜í•˜ëŠ” ì£¼ì†Œê°’ì´ë‹¤. í´ëŸ¬ìŠ¤í„°í˜• ì¸ë±ìŠ¤ë³´ë‹¤ ê²€ìƒ‰ ì†ë„ëŠ” ë” ëŠë¦¬ì§€ë§Œ ì…ë ¥/ìˆ˜ì •/ì‚­ì œëŠ” ëœ ëŠë¦¬ë‹¤. í…Œì´ë¸” ë‹¹ ì—¬ëŸ¬ ê°œë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ë‚¨ìš©í•  ê²½ìš°ì—ëŠ” ì˜¤íˆë ¤ ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ ë–¨ì–´ëœ¨ë¦¬ëŠ” ê²°ê³¼ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê¼­ í•„ìš”í•œ ì—´ì—ë§Œ ìƒì„±í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.  MYSQL ì¸ë±ìŠ¤ì˜ íŠ¹ì§•  PRIMARY KEYë¡œ ì§€ì •í•œ ì—´ì€ í´ëŸ¬ìŠ¤í„°í˜• ì¸ë±ìŠ¤ê°€ ìƒì„±ëœë‹¤. UNIQUE NOT NULLë¡œ ì§€ì •í•œ ì—´ì€ í´ëŸ¬ìŠ¤í„°í˜• ì¸ë±ìŠ¤ê°€ ìƒì„±ëœë‹¤. UNIQUE(ë˜ëŠ” UNIQUE NULL)ë¡œ ì§€ì •í•œ ì—´ì€ ë³´ì¡° ì¸ë±ìŠ¤ê°€ ìƒì„±ëœë‹¤. PRIMARY KEYì™€ UNIQUE NOT NULLì´ ìˆìœ¼ë©´ PRIMARY KEYë¡œ ì§€ì •í•œ ì—´ì— ìš°ì„  í´ëŸ¬ìŠ¤í„°í˜• ì¸ë±ìŠ¤ê°€ ìƒì„±ëœë‹¤. PRIMARY KEYë¡œ ì§€ì •í•œ ì—´ë¡œ ë°ì´í„°ê°€ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ëœë‹¤.  ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ê³ ë ¤í•  ì   í…Œì´ë¸” ì¡°íšŒ ì‹œì— WHERE ì ˆì˜ ì¡°ê±´ì— í•´ë‹¹ ì—´ì´ ë‚˜ì˜¤ëŠ” ê²½ìš°ì—ë§Œ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤. WHEREì ˆì— ì‚¬ìš©ë˜ë”ë¼ë„ ìì£¼ ì‚¬ìš©í•´ì•¼ ê°€ì¹˜ê°€ ìˆë‹¤. ë°ì´í„°ì˜ ì¤‘ë³µë„ê°€ ë†’ì€ ì—´ì€ ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ì–´ë„ ë³„ íš¨ê³¼ê°€ ì—†ë‹¤. ì™¸ë˜ í‚¤ë¥¼ ì§€ì •í•œ ì—´ì—ëŠ” ìë™ìœ¼ë¡œ ì™¸ë˜ í‚¤ ì¸ë°ìŠ¤ê°€ ìƒì„±ëœë‹¤. JOINì— ìì£¼ ì‚¬ìš©ë˜ëŠ” ì—´ì—ëŠ” ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•´ ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¸ë±ìŠ¤ëŠ” ì œê±°í•˜ì.  ","permalink":"https://youngeun-in.github.io/db-%EC%9D%B8%EB%8D%B1%EC%8A%A4/","tags":["index"],"title":"DB ì¸ë±ìŠ¤"},{"categories":["ê°œë°œë°©ë²•ë¡ "],"contents":"ğŸ“• AOP AOPëŠ” OOPë¥¼ ë”ìš± OOPë‹µê²Œ í”„ë¡œê·¸ë˜ë° í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ê²ƒìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ì ì¸ ê¸°ëŠ¥ê³¼ ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì„ ë¶„ë¦¬í•´ Aspectë¼ëŠ” ëª¨ë“ˆë¡œ ë§Œë“¤ì–´ ì„¤ê³„í•˜ê³  ê°œë°œí•˜ëŠ” ë°©ë²•ì´ë‹¤. ì‹¤ì œë¡œ Spring doc document ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ë§í•˜ê³  ìˆë‹¤. 1 2 3 4 5  Aspect-oriented Programming (AOP) complements Object-oriented Programming (OOP) by providing another way of thinking about program structure AOPëŠ” í”„ë¡œê·¸ë¨ êµ¬ì¡°ì— ëŒ€í•œ ë‹¤ë¥¸ ìƒê°ì˜ ë°©í–¥ì„ ì œê³µí•´ì£¼ë©´ì„œ OOPë¥¼ ë³´ì™„í•˜ê³  ìˆë‹¤.   ì˜ˆë¥¼ ë“¤ë©´ ì–´ë– í•œ í´ë˜ìŠ¤ë¥¼ ëŒ€ìƒìœ¼ë¡œ í•µì‹¬ ê¸°ëŠ¥ê³¼ ë¶€ê°€ì ì¸ ê¸°ëŠ¥ì˜ ê´€ì ìœ¼ë¡œ ê³µí†µ ì‚¬ìš© ë¶€ê°€ ê¸°ëŠ¥ë“¤ì„ ì™¸ë¶€ì˜ ë…ë¦½ëœ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ê³  ì´ë¥¼ ëª¨ë“ˆí™”í•˜ì—¬ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë” í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ë²•ì´ë‹¤. ğŸ“˜ AOP ìš©ì–´    ìš©ì–´ ì„¤ëª…     Aspect(Advisor) âœ” íŠ¹ì • í•œ ê°€ì§€ ê¸°ëŠ¥ì— ëŒ€í•´ í©ì–´ì§„ ê´€ì‹¬ì‚¬ë¥¼ ëª¨ë“ˆí™”í•˜ì—¬ ë¬¶ì€ í´ë˜ìŠ¤ - PointCut + Adviceë¥¼ ë¬¶ì€ ë©”ì„œë“œë¥¼ ì •ì˜ ë° ê´€ë¦¬í•œë‹¤.   Target âœ” ë¹„ì¦ˆë‹ˆìŠ¤(í•µì‹¬) ë¡œì§ì„ êµ¬í˜„í•˜ëŠ” AOPì˜ ëŒ€ìƒ \u0026lsquo;í´ë˜ìŠ¤\u0026rsquo;   Advice âœ” AOP ë©”ì„œë“œ : ë¶€ê°€ ê¸°ëŠ¥ì„ ì ìš©ì‹œí‚¤ëŠ” ë©”ì„œë“œ(ë¶€ê°€ ê¸°ëŠ¥ ë¡œì§ ë©”ì„œë“œ) ì ìš© ì‹œì ë„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. - before : ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ ì‹¤í–‰ ì „ì— ë™ì‘ - after : ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ ì‹¤í–‰ í›„ì— ë™ì‘ - after-returning : ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ ì‹¤í–‰ ì¤‘ ë¦¬í„´ ë˜ëŠ” ìˆœê°„ - after-throwing : ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ ì‹¤í–‰ ì¤‘ ì—ëŸ¬ ë°œìƒ ìˆœê°„ - around\t: ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì†Œë“œ ì‹¤í–‰ ì „/í›„ì— ë™ì‘   JoinPoint âœ” AOPê°€ ì ìš©ë  ìˆ˜ ìˆëŠ” ë©”ì†Œë“œ, í•„ë“œ, ê°ì²´, ìƒì„±ì ë“±ì˜ ìš”ì†Œ - íƒ€ê²Ÿ í´ë˜ìŠ¤ì˜ ìš”ì†Œë“¤ì„ ì˜ë¯¸í•˜ë©° PointCutì˜ í›„ë³´ - Spring AOPì—ì„œëŠ” ë©”ì„œë“œë§Œ ì§€ì • ê°€ëŠ¥   PointCut âœ” AOP ì ìš© ê°€ëŠ¥ ìš”ì†Œë“¤ ì¤‘ì—ì„œ \u0026lsquo;ì‹¤ì œ ì ìš©ë  ìš”ì†Œë“¤\u0026rsquo;ì„ ì˜ë¯¸í•œë‹¤. - JoinPointì—ì„œ ì‹¤ì œ Adviceê°€ ì ìš©ë  ì§€ì  - Spring AOP ì—ì„œëŠ” adviceê°€ ì ìš©ë  ë©”ì„œë“œë¥¼ ì˜ë¯¸   Weaving âœ” PointCutì´ í˜¸ì¶œë  ë•Œ Adviceê°€ í˜¸ì¶œë˜ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤. ì¦‰, PointCutì— Advice ë©”ì„œë“œê°€ ì‚½ì…ë˜ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤. - ì»´íŒŒì¼ ì „ì—ëŠ” í•µì‹¬ ë¡œì§ê³¼ ì¸í”„ë¼ ë¡œì§ì´ ë¶„ë¦¬ë˜ì–´ìˆì§€ë§Œ - ì»´íŒŒì¼íƒ€ì„ì— ë°”ì´íŠ¸ ì½”ë“œë¥¼ ë„£ëŠ”ë‹¤ë˜ì§€ ëŸ°íƒ€ì„ì— í”„ë¡ì‹œë¥¼ ë§Œë“¤ë˜ì§€ - ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•œ ì½”ë“œë¥¼ ë¹„ì¦ˆë‹ˆìŠ¤ ì½”ë“œì™€ ë³‘í•©í•˜ëŠ” ì‘ì—…ì„ ì˜ë¯¸í•œë‹¤. Weaving ì²˜ë¦¬ ë°©ì‹ (AOP êµ¬í˜„ ë°©ë²•) - ì»´íŒŒì¼ íƒ€ì„ ìœ„ë¹™ : a.java -\u0026gt; a.clss ì»´íŒŒì¼ ë  ë•Œ - ë¡œë”© íƒ€ì„ ìœ„ë¹™ : í´ë˜ìŠ¤íŒŒì¼ì„ í´ë˜ìŠ¤ ë¡œë”ê°€ ë©”ëª¨ë¦¬ì— ë¡œë“œí•  ë•Œ - ëŸ°íƒ€ì„/í”„ë¡ì‹œ ìœ„ë¹™ : íƒ€ê²Ÿ í´ë˜ìŠ¤ì— ë¶€ê°€ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë„ë¡ Proxy ê°ì²´ë¥¼ ë§Œë“¤ì–´(ê°ì‹¸ì„œ) ì‹¤í–‰ - ìŠ¤í”„ë§ AOPëŠ” ëŸ°íƒ€ì„ ìœ„ë¹™ë§Œì„ ì§€ì›í•œë‹¤.(IOC/DIë¥¼ ì´ìš©í•œ ë°©ë²•)   proxy âœ” Target ê°ì²´ì— Adviceë¥¼ ì ìš©ì‹œí‚¤ëŠ” ë˜í¼ í´ë˜ìŠ¤     ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìì—°ìŠ¤ëŸ½ê²Œ ì—¬ëŸ¬ ë©”ì„œë“œ(Join Point)ë¥¼ í˜¸ì¶œí•œë‹¤. ì´ë•Œ íŠ¹ì • PointCutìœ¼ë¡œ ì§€ì •í•œ ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ëŠ” ìˆœê°„ Aspect ì˜ Advice ë©”ì†Œë“œê°€ í˜¸ì¶œëœë‹¤. Advice ë©”ì†Œë“œì˜ ë™ì‘ ì‹œì ì€ 5ê°€ì§€ë¡œ ì •í•  ìˆ˜ ìˆë‹¤. ì• ìŠ¤íŒ©íŠ¸ ì„¤ì •ì— ë”°ë¼ ìœ„ë¹™ ì²˜ë¦¬ë˜ì–´ í”„ë¡ì‹œ ê°ì²´ê°€ ìƒì„±ëœë‹¤.(ë™ì  í”„ë¡ì‹œ ìƒì„±) í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ ë¶€ê°€ê¸°ëŠ¥ì´ í¬í•¨ëœ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤.  ğŸ“– AOP êµ¬í˜„ 1  implementation \u0026#39;org.springframework.boot:spring-boot-starter-aop\u0026#39;   1 2 3 4 5  // @EnableAspectJAutoProxy ìƒëµ ê°€ëŠ¥ @SpringBootApplication public class Application { public static void main(String[] args) { SpringApplication.run(Application.class,args); } }   1 2 3 4 5 6  @Service public class AuthServiceImpl { public void businessLogicMethod(){ System.out.println(\u0026#34;businessLogicMethod process!\u0026#34;); } }   ğŸ“„ ì¼ë°˜ì ì¸ êµ¬í˜„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  @Aspect @Configuration public class UselessAspect { Logger log = LoggerFactory.getLogger(UselessAdvisor.class); @Around(\u0026#34;execution(* com.demo.study.service.AuthServiceImpl.*(..))\u0026#34;) public Object stopWatch(ProceedingJoinPoint joinPoint) throws Throwable { StopWatch stopWatch = new StopWatch(); try { stopWatch.start(); return joinPoint.proceed(); } finally { stopWatch.stop(); log.info(\u0026#34;request spent {} ms\u0026#34;, stopWatch.getLastTaskTimeMillis()); } } /** * @Before * @AfterReturning * @AfterThrowing */ @After(\u0026#34;execution(* com.demo.study.service.AuthServiceImpl.*(..))\u0026#34;) public void After() throws Throwable { log.info(\u0026#34;After ì–´ë“œë°”ì´ìŠ¤\u0026#34;); } }   ğŸ“„ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ êµ¬í˜„ 1 2 3 4  @Target(ElementType.METHOD) @Retention(RetentionPolicy.CLASS) public @interface PerformanceCheck { }   1 2 3 4 5 6 7  @Service public class AuthServiceImpl { @PerformanceCheck public void businessLogicMethod(){ System.out.println(\u0026#34;businessLogicMethod process!\u0026#34;); } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  @Aspect @Component public class UselessAspect { Logger log = LoggerFactory.getLogger(UselessAdvisor.class); @Around(\u0026#34;@annotation(com.demo.study.annotation.PerformanceCheck)\u0026#34;) public Object stopWatch(ProceedingJoinPoint joinPoint) throws Throwable { StopWatch stopWatch = new StopWatch(); try { stopWatch.start(); return joinPoint.proceed(); } finally { stopWatch.stop(); log.info(\u0026#34;request spent {} ms\u0026#34;, stopWatch.getLastTaskTimeMillis()); } } /** * @Before * @AfterReturning * @AfterThrowing */ @After(\u0026#34;@annotation(com.demo.study.annotation.PerformanceCheck)\u0026#34;) public void After() throws Throwable { log.info(\u0026#34;After ì–´ë“œë°”ì´ìŠ¤\u0026#34;); } }    ì–´ë…¸í…Œì´ì…˜ê³¼ Aspectê°€ ë™ì¼ ìœ„ì¹˜ë©´ ì–´ë…¸í…Œì´ì…˜ë§Œ ì ì–´ë„ ëœë‹¤. íŒ¨í‚¤ì§€ê°€ ë‹¤ë¥´ë©´ FQCN(Fully qualified Class Name)ì„ ë‹¤ ì…ë ¥í•´ì£¼ì–´ì•¼ í•œë‹¤.  ğŸ“„ ë¹ˆìœ¼ë¡œ êµ¬í˜„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  @Aspect @Component public class UselessAspect { Logger log = LoggerFactory.getLogger(UselessAdvisor.class); @Around(\u0026#34;bean(com.demo.study.service.AuthServiceImpl)\u0026#34;) public Object stopWatch(ProceedingJoinPoint joinPoint) throws Throwable { StopWatch stopWatch = new StopWatch(); try { stopWatch.start(); return joinPoint.proceed(); } finally { stopWatch.stop(); log.info(\u0026#34;request spent {} ms\u0026#34;, stopWatch.getLastTaskTimeMillis()); } } /** * @Before * @AfterReturning * @AfterThrowing */ @After(\u0026#34;bean(com.demo.study.service.AuthServiceImpl)\u0026#34;) public void After() throws Throwable { log.info(\u0026#34;After ì–´ë“œë°”ì´ìŠ¤\u0026#34;); } }    ë¹ˆê³¼ Aspectê°€ ë™ì¼ ìœ„ì¹˜ë©´ ì–´ë…¸í…Œì´ì…˜ë§Œ ì ì–´ë„ ëœë‹¤. íŒ¨í‚¤ì§€ê°€ ë‹¤ë¥´ë©´ FQCN(Fully qualified Class Name)ì„ ë‹¤ ì…ë ¥í•´ì£¼ì–´ì•¼ í•œë‹¤.  ğŸ“– AOP PointCut ì„¤ì • 1  execution(* com.springbook.biz..*Impl.get*(..))\u0026#34;    * : ë¦¬í„´ê°’ com.springbook.biz.. : íŒ¨í‚¤ì§€ *Impl: í´ë˜ìŠ¤ ì´ë¦„ get* : ë©”ì„œë“œ ì´ë¦„ (..) : ë§¤ê°œë³€ìˆ˜ ì¤‘ê°„ë§ˆë‹¤ì˜ . : êµ¬ë¶„ì   ğŸ“„ execution í¬ì¸íŠ¸ ì»· ë¦¬í„´    í‘œí˜„ì‹ ì„¤ëª…     * ëª¨ë“  ë¦¬í„´íƒ€ì… í—ˆìš©   void ë¦¬í„´íƒ€ì…ì´ voidì¸ ë©”ì„œë“œ ì„ íƒ   !void ë¦¬í„´íƒ€ì…ì´ voidê°€ ì•„ë‹Œ ë©”ì„œë“œ ì„ íƒ    ğŸ“„ execution í¬ì¸íŠ¸ ì»· íŒ¨í‚¤ì§€    í‘œí˜„ì‹ ì„¤ëª…     com.springbook.biz ì •í•™í•˜ê²Œ í•´ë‹¹ íŒ¨í‚¤ì§€ë§Œ ì„ íƒ   com.springbook.biz.. í•´ë‹¹ íŒ¨í‚¤ì§€ ë° ëª¨ë“  í•˜ìœ„ íŒ¨í‚¤ì§€ ì„ íƒ   com.springbook..impl ..ì• íŒ¨í‚¤ì§€ë¡œ ì‹œì‘í•˜ë©´ì„œ ë§ˆì§€ë§‰ íŒ¨í‚¤ì§€ ì´ë¦„ì´ ..ë’¤ë¡œ ëë‚˜ëŠ” íŒ¨í‚¤ì§€ ì„ íƒ    ğŸ“„ execution í¬ì¸íŠ¸ ì»· í´ë˜ìŠ¤    í‘œí˜„ì‹ ì„¤ëª…     BoardServiceImpl ì •í•™í•˜ê²Œ í•´ë‹¹ í´ë˜ìŠ¤ë§Œ ì„ íƒ   *Impl í´ë˜ìŠ¤ ì´ë¦„ì´ *ë’· ê¸€ìë¡œ ëë‚˜ëŠ” í´ë˜ìŠ¤ë§Œ ì„ íƒ   BoardService+ í•´ë‹¹ í´ë˜ìŠ¤ëŠ” ë¬¼ë¡  íŒŒìƒëœ ëª¨ë“  ìì‹ í´ë˜ìŠ¤ë„ ì„ íƒ ê°€ëŠ¥   variable+ í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ ëª¨ë“  í´ë˜ìŠ¤ ì„ íƒ ê°€ëŠ¥    ğŸ“„ execution execution í¬ì¸íŠ¸ ì»· ë©”ì„œë“œ    í‘œí˜„ì‹ ì„¤ëª…     *(..) ê°€ì¥ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ ëª¨ë“  ë©”ì„œë“œ ì„ íƒ   get*(..) ë©”ì„œë“œ ì´ë¦„ì´ getìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ëª¨ë“  ë©”ì„œë“œ ì„ íƒ   ë§¤ì„œë“œì´ë¦„(..) íŠ¹ì • ë©”ì„œë“œ ì´ë¦„ì„ ê°€ì§„ ë©”ì„œë“œ ì„ íƒ    ğŸ“„ execution í¬ì¸íŠ¸ ì»· ë§¤ê°œë³€ìˆ˜    í‘œí˜„ì‹ ì„¤ëª…     (..) ê°€ì¥ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œì„œ ë§¤ê°œë³€ìˆ˜ íƒ€ì…ì˜ ì œí•œì´ ì—†ìŒì„ ì˜ë¯¸   (*) ë°˜ë“œì‹œ 1ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§€ëŠ” ë©”ì„œë“œë§Œ í—ˆìš©í•œë‹¤ëŠ” ì˜ë¯¸   (com.spring.user.User) í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ í´ë˜ìŠ¤ë¥¼ ê°€ì§€ëŠ” ë©”ì„œë“œë§Œ í—ˆìš©í•œë‹¤ëŠ” ì˜ë¯¸   (!com.spring.user.User) í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ í´ë˜ìŠ¤ë¥¼ ê°€ì§€ì§€ ì•ŠëŠ” ë©”ì„œë“œë§Œ í—ˆìš©í•œë‹¤ëŠ” ì˜ë¯¸   (Integer, ..) í•œ ê°œ ì´ìƒì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§€ë˜, ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ integerì¸ ë©”ì„œë“œë§Œ í—ˆìš©   (Integer, *) ë°˜ë“œì‹œ ë‘ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì§€ë˜, ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì˜ íƒ€ì…ì´ integerì¸ ë©”ì„œë“œë§Œ í—ˆìš©    ğŸ“— ìŠ¤í”„ë§ AOP ìŠ¤í”„ë§ AOP ëŠ” ëŸ°íƒ€ì„ ìœ„ë¹™ì„ ì§€ì›í•˜ê¸°ì— Proxy ê¸°ë°˜ì˜ AOP êµ¬í˜„ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤. ì´ëŸ¬í•œ Proxy ê¸°ë°˜ì˜ AOPëŠ” ìŠ¤í”„ë§ ë¹ˆì—ë§Œ ì ìš©ê°€ëŠ¥í•˜ê¸°ì— ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ ëŒ€ìƒë§Œ AOP ëŒ€ìƒì´ ëœë‹¤. ë˜í•œ, ìŠ¤í”„ë§ AOP íŠ¹ì§•ìƒ ë©”ì„œë“œë§Œì„ ì§€ì›í•  ìˆ˜ ìˆë‹¤. í”„ë¡ì‹œ íŒ¨í„´ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  @Primary @Service public class ProxySimpleEventService implements EventService{ private final EventService simpleEventService; ProxySimpleEventService(EventService simpleEventService) { this.simpleEventService = simpleEventService; } @Override public void createEvent() { long begin = System.currentTimeMillis(); simpleEventService.createEvent(); System.out.println(\u0026#34;createEvent ì‹¤í–‰ì‹œê°„: \u0026#34;+(System.currentTimeMillis()-begin)); } @Override public void publishEvent() { long begin = System.currentTimeMillis(); simpleEventService.publishEvent(); System.out.println(\u0026#34;createEvent ì‹¤í–‰ì‹œê°„: \u0026#34;+(System.currentTimeMillis()-begin)); } @Override public void deleteEvent() { simpleEventService.deleteEvent(); } }   í”„ë¡ì‹œ íŒ¨í„´ì€ AOPì—ì„œ ê¸°ì¡´ ì½”ë“œì˜ ë³€ê²½ ì—†ì´ ì ‘ê·¼ ì œì–´ ë˜ëŠ” ë¶€ê°€ ê¸°ëŠ¥ ì¶”ê°€í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤. ê·¸ëŸ¬ë‚˜ ì¼ë°˜ì ì¸ ë°©ë²•ìœ¼ë¡œ í”„ë¡ì‹œ íŒ¨í„´ì„ êµ¬í˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ë¬¸ì œì ì´ ë°œìƒí•œë‹¤. ë¬¸ì œì   ë§¤ë²ˆ Proxy í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤. í•˜ë‚˜ì˜ í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ì—¬ëŸ¬ í´ë˜ìŠ¤ë¥¼ ëŒ€ìƒìœ¼ë¡œ ì ìš©í•˜ê¸° í˜ë“¤ë‹¤. ê°ì²´ ê´€ê³„ê°€ ë³µì¡í•´ì§€ê³  ê´€ë¦¬í•˜ê¸° ì–´ë µë‹¤.  ì´ëŸ¬í•œ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ê²ƒì´ ë°”ë¡œ Spring AOPì™€ Dynamic Proxyë‹¤. ìŠ¤í”„ë§ IoC ì»¨í…Œì´ë„ˆê°€ ì œê³µí•˜ëŠ” ê¸°ë°˜ ì‹œì„¤ê³¼ Dynamic Proxyë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ë³µì¡í•œ ë¬¸ì œ í•´ê²°í–ˆë‹¤.  Dynamic Proxy : ë™ì ìœ¼ë¡œ í”„ë¡ì‹œ ê°ì²´ ìƒì„±í•˜ëŠ” ë°©ë²• JDK Dynamic Proxy : ìë°”ê°€ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬  CGlib : ìë°”ê°€ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ ê¸°ë°˜ í”„ë¡ì‹œ ìƒì„± ë¼ì´ë¸ŒëŸ¬ë¦¬   Spring IoC : ê¸°ì¡´ ë¹ˆì„ ëŒ€ì²´í•˜ëŠ” \u0026lsquo;ë™ì  í”„ë¡ì‹œ ë¹ˆ\u0026rsquo;ì„ ë§Œë“¤ì–´ ë“±ë¡í•œë‹¤.  í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ë³€ê²½ì´ ì—†ë‹¤. AbstractAutoProxyCreator implements BeanPostProcessorë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“ ë‹¤. ì¦‰ ë¹ˆì´ ìƒì„±ëœ í›„, í”„ë¡ì‹œë¥¼ ìƒì„±í•˜ëŠ” ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤.    ì´ë ‡ë“¯ ëŸ°íƒ€ì„ì‹œì— ë™ì ìœ¼ë¡œ í”„ë¡ì‹œ ë¹ˆì„ ìƒì„±í•˜ê³  AOPë¥¼ ì ìš©ì‹œí‚¤ëŠ” ê²ƒì„ ëŸ°íƒ€ì„ ìœ„ë¹™ì´ë¼ ë¶€ë¥¸ë‹¤. ğŸ” ëŸ°íƒ€ì„ ìœ„ë¹™(í”„ë¡ì‹œ ìœ„ë¹™) ëŸ°íƒ€ì„ ìœ„ë¹™ì€ ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ Proxyë¥¼ ìƒì„±í•˜ì—¬ ì‹¤ì œ Target ê°ì²´ì˜ ë³€í˜•ì—†ì´ AOPë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ìŠ¤í”„ë§ì„ ê¸°ì¤€ìœ¼ë¡œ ë§í•˜ìë©´ ë©”ì„œë“œë§Œì´ JoinPointê°€ ë  ìˆ˜ ìˆê¸°ì— Method í˜¸ì¶œ ì‹œì— ìœ„ë¹™ì´ ì´ë£¨ì–´ ì§€ëŠ” ë°©ì‹ì´ë‹¤. ëŸ°íƒ€ì„ ìœ„ë¹™ ë˜í•œ, ì¼ë°˜ì ì¸ Proxy íŒ¨í„´ì„ ê°œì„ í•œ Dynamic Proxyë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ ì•„ë˜ì™€ ê°™ì€ ë¬¸ì œê°€ ìˆë‹¤.  í¬ì¸íŠ¸ ì»·ì— ëŒ€í•œ ì–´ë“œë°”ì´ìŠ¤ ì ìš© ê°¯ìˆ˜ê°€ ëŠ˜ì–´ ë‚ ìˆ˜ë¡ ì„±ëŠ¥ì´ ë–¨ì–´ì§„ë‹¤. ë©”ì†Œë“œ í˜¸ì¶œì— ëŒ€í•´ì„œë§Œ ì–´ë“œë°”ì´ìŠ¤ë¥¼ ì ìš© í•  ìˆ˜ ìˆë‹¤.(í”„ë¡ì‹œì´ê¸°ì—)  AOP í”„ë¡ì‹œ ê°ì²´ 1  org.woowacourse.aoppractice.service.AuthServiceImpl$$EnhancerBySpringCGLIB$$dbdb402d   ìœ„ ì½”ë“œë¥¼ ë³´ë©´, Target í´ë˜ìŠ¤ ìì²´ë¥¼ í”„ë¡ì‹œë¡œ ê°ì‹¸ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. í”„ë¡ì‹œ ìœ„ë¹™ì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ” ìƒì†ì„ ì´ìš©í•œ ë°©ì‹ì´ê¸°ì— ë‹¤í˜•ì„±ì„ ì ìš©ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì¦‰, ìœ„ ê·¸ë¦¼ì—ì„œ AuthControllerê°€ AuthServiceì˜ í”„ë¡ì‹œ í´ë˜ìŠ¤ì¸ AuthService$$ë¸”ë¼ë¸”ë¼ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë˜ ê²ƒì´ë‹¤. ê·¸ëŸ°ë° í•œê°€ì§€ ìƒê°í•´ë³¼ ì ì´ ìˆë‹¤. DynamicProxyëŠ” ìƒì†/êµ¬í˜„ì„ ì ìš©í•˜ë‹ˆ ì•„ë˜ì™€ ê°™ì€ ìš”ì†Œë“¤ì€ ê°€ëŠ¥í• ê¹Œ? ğŸ¤”  final í´ë˜ìŠ¤ final ë©”ì„œë“œ private ë©”ì„œë“œ  ë‹¹ì—°í•˜ê²Œë„, ìë°” ë¬¸ë²•ì ìœ¼ë¡œ ìƒì† ë° ì˜¤ë²„ë¼ì´ë”©ì„ ì§€ì›í•˜ì§€ ëª»í•˜ë¯€ë¡œ ì ìš©ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ì™€ ë¹„ìŠ·í•˜ê²Œ Springì—ì„œ ì§€ì›í•´ì£¼ëŠ” @Trancsactional ì–´ë…¸í…Œì´ì…˜ì´ ìˆëŠ”ë° @Trancsactional ì–´ë…¸í…Œì´ì…˜ ë˜í•œ AOPê¸°ë°˜ì´ê¸°ì— private ë©”ì„œë“œë¥¼ ë¶™ì´ë©´ ì‘ë™ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤. @Trancsactional  ë¡œì§ ì‹œì‘ì‹œ íŠ¸ëœì­ì…˜ì„ ì—´ì–´ì¤Œ ë¡œì§ ëë‚ ì‹œ commití•˜ê³  íŠ¸ëœì­ì…˜ì„ ë‹«ì•„ì¤Œ íŠ¸ëœì­ì…˜ì— ê´€ë ¨ëœ ì¸í”„ë¼ ë¡œì§ì„ ì§€ì›í•˜ê¸°ì— ìš°ë¦¬ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œí•´ì¤€ë‹¤.   ì°¸ê³  ë°±ê¸°ì„ -ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ í•µì‹¬ ê¸°ìˆ  ìŠ¤í”„ë§ í€µ ìŠ¤íƒ€íŠ¸ í…Œì½”í†¡-ìŠ¤í”„ë§ AOP ì¥ì¸ ê°œë°œìë¥¼ ê¿ˆê¾¸ëŠ” : ê¸°ë¡í•˜ëŠ” ê³µê°„ Carrey\u0026rsquo;s ê¸°ìˆ ë¸”ë¡œê·¸ ì§„ì§œ ê°œë°œì ê¸°ì–µë³´ë‹¨ ê¸°ë¡ì„ ë¦¬ë‹¤ì–‘ì˜ ê°œë°œ ì„¸ìƒ Carrey\u0026rsquo;s ê¸°ìˆ ë¸”ë¡œê·¸-AspectJ ë‚˜ì¤‘ì— ì°¸ê³ í•˜ë©´ ì¢‹ìŒ ë…¼ë¦¬ì  ì½”ë”© ","permalink":"https://youngeun-in.github.io/aop/","tags":["spring-aop","dynamic-proxy"],"title":"AOP"},{"categories":["java"],"contents":"ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ì„œë¸”ë¦¿ì„ ë‹´ì•„ ê´€ë¦¬í•œë‹¤. ì„œë¸”ë¦¿ì€ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬ëœë‹¤. ì„œë¸”ë¦¿ì´ í˜¸ì¶œë˜ëŠ” ê³¼ì •  Servlet Request / Servlet Response ê°ì²´ ìƒì„± ì„¤ì • íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ ë§¤í•‘í•  Servletì„ í™•ì¸  1 2 3 4 5 6 7 8 9  \u0026lt;servlet\u0026gt; \u0026lt;servlet-name\u0026gt;MyServlet\u0026lt;/servlet-name\u0026gt; \u0026lt;servlet-class\u0026gt;com.jsp.web.MyServlet\u0026lt;/servlet-class\u0026gt; \u0026lt;/servlet\u0026gt; \u0026lt;servlet-mapping\u0026gt; \u0026lt;servlet-name\u0026gt;MyServlet\u0026lt;/servlet-name\u0026gt; \u0026lt;url-pattern\u0026gt;/hello\u0026lt;/url-pattern\u0026gt; \u0026lt;/servlet-mapping\u0026gt;   í•´ë‹¹ ì„œë¸”ë¦¿ ì¸ìŠ¤í„´ìŠ¤ ì¡´ì¬ë¥¼ ìœ ë¬´ë¥¼ í™•ì¸í•˜ì—¬ ì—†ìœ¼ë©´ ìƒì„±(init()) Servlet Containerì— ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê³ , res reqë¥¼ ì¸ìë¡œ service ì‹¤í–‰  ì°¸ê³  https://youtu.be/calGCwG_B4Y ","permalink":"https://youngeun-in.github.io/servlet-%EB%8F%99%EC%9E%91-%EB%B0%A9%EC%8B%9D/","tags":["servlet-container"],"title":"Servlet ë™ì‘ ë°©ì‹"},{"categories":["java"],"contents":"Array ì™€ Cache Locality Array ëŠ” ê°™ì€ íƒ€ì…ì„ ê°€ì§„ ì—¬ëŸ¬ ìš”ì†Œë“¤ì€ í•œ ê³³ì— ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ê³ ì•ˆë˜ì—ˆë‹¤. Array ëŠ” í• ë‹¹í•˜ëŠ” í¬ê¸° ë§Œí¼ì´ ë©”ëª¨ë¦¬ì— ì—°ì†ì ìœ¼ë¡œ í• ë‹¹ ë˜ëŠ”ë° ì´ë¡œ ì¸í•´ cache locality ì„ ì´ìš©í•œ ë¹ ë¥¸ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤. ìœ„ ì‚¬ì§„ì„ ë³´ë©´ array ë‚´ì— ìˆëŠ” ê° element ë“¤ì´ ê°€ì§€ëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ ì—°ì†ì ìœ¼ë¡œ í• ë‹¹ë˜ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ìºì‹œ ë©”ëª¨ë¦¬ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì½ì–´ë³´ë©´ ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ëœë‹¤.  ìºì‹œ ë©”ëª¨ë¦¬ëŠ” ë°ì´í„° ì§€ì—­ì„±(Locality)ì˜ ì›ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤. ë°ì´í„° ì§€ì—­ì„±ì€ ëŒ€í‘œì ìœ¼ë¡œ ì‹œê°„ ì§€ì—­ì„±(Temporal locality)ê³¼ ê³µê°„ ì§€ì—­ì„±(Spatial Locality)ìœ¼ë¡œ ë‚˜ë‰˜ëŠ”ë°, ì‹œê°„ ì§€ì—­ì„±ì´ë€ forë‚˜ while ê°™ì€ ë°˜ë³µë¬¸ì— ì‚¬ìš©í•˜ëŠ” ì¡°ê±´ ë³€ìˆ˜ì²˜ëŸ¼ í•œ ë²ˆ ì°¸ì¡°ëœ ë°ì´í„°ëŠ” ì ì‹œ í›„ì— ë˜ ì°¸ì¡°ë  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤ëŠ” ê²ƒì´ê³ , ê³µê°„ ì§€ì—­ì„±ì´ë€ A[0], A[1]ê³¼ ê°™ì€ ë°ì´í„° ë°°ì—´ì— ì—°ì†ìœ¼ë¡œ ì ‘ê·¼í•  ë•Œ ì°¸ì¡°ëœ ë°ì´í„° ê·¼ì²˜ì— ìˆëŠ” ë°ì´í„°ê°€ ì ì‹œ í›„ì— ì‚¬ìš©ë  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤ëŠ” ê²ƒì´ë‹¤. - ë‚˜ë¬´ìœ„í‚¤  Array ëŠ” ì—°ì†ì ì¸ memory block ìœ¼ë¡œ, array ì— ì²˜ìŒ ì ‘ê·¼í•  ë•Œ ì „ì²´ array ê°€ cache ì— ë¡œë“œëœë‹¤. ì²« ì•¡ì„¸ìŠ¤ ì´í›„ë¡œëŠ” ê³µê°„ ì§€ì—­ì„±ì´ ìƒê¸°ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜ java ëŠ” jvm ì´ ì•Œì•„ì„œ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬ í•˜ê¸° ë•Œë¬¸ì— array ì‚¬ìš©ì‹œ cache locality ê°€ ì ìš©ë˜ëŠ”ì§€ ì—¬ë¶€ëŠ” jvm ì´ ë©”ëª¨ë¦¬ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ê³µë¶€í•´ì„œ ì¢€ ë” ì•Œì•„ë´ì•¼ í•  ê²ƒ ê°™ë‹¤. ì§€ê¸ˆ ìì„¸í•œ ì„¤ëª…ì„ í•  ì§€ì‹ì€ ì—†ì§€ë§Œ ì•„ë§ˆ java ì—ì„œëŠ” â€˜í•´ë‹¹ì‚¬í•­ ì—†ìŒâ€™ ì´ë¼ëŠ” ê²°ë¡ ì´ ë‚  ê²ƒ ê°™ë‹¤. ArrayList Java ì˜ ArrayList ëŠ” AbstractList ë¥¼ ìƒì†ë°›ê³  List ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì´ë‹¤. Array ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ size ê°€ dynamic í•˜ê²Œ ì¡°ì ˆëœë‹¤. ArrayList.java ì½”ë“œë¥¼ ì—´ì–´ë³´ë©´ default size ëŠ” 10 ì¸ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. 1  private static final int DEFAULT_CAPACITY = 10;   ArrayList ì—ì„œ ìƒˆë¡œìš´ element ë¥¼ ì¶”ê°€í•˜ëŠ” ë©”ì†Œë“œëŠ” add() ë¡œ, ë‘ ê°€ì§€ ë°©ì‹ì˜ ì˜¤ë²„ë¡œë”© ëœ ë©”ì†Œë“œê°€ ì •ì˜ë˜ì–´ ìˆë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  /** * Appends the specified element to the end of this list. * * @param e element to be appended to this list * @return \u0026lt;tt\u0026gt;true\u0026lt;/tt\u0026gt; (as specified by {@link Collection#add}) */ public boolean add(E e) { ensureCapacityInternal(size + 1); // Increments modCount!!  elementData[size++] = e; return true; } /** * Inserts the specified element at the specified position in this * list. Shifts the element currently at that position (if any) and * any subsequent elements to the right (adds one to their indices). * * @param index index at which the specified element is to be inserted * @param element element to be inserted * @throws IndexOutOfBoundsException {@inheritDoc} */ public void add(int index, E element) { rangeCheckForAdd(index); ensureCapacityInternal(size + 1); // Increments modCount!!  System.arraycopy(elementData, index, elementData, index + 1, size - index); elementData[index] = element; size++; }   ì•„ë˜ì— ìˆëŠ” add() ë©”ì†Œë“œëŠ” íŠ¹ì • index ì— element ë¥¼ ì‚½ì…í•˜ëŠ” ë©”ì†Œë“œë¡œ, ì–´ë–¤ ì‘ì—…ì„ í•œ ë‹¤ìŒì— ê¸°ì¡´ array ë¥¼ copy í•œ ë” í° size ë¥¼ ê°€ì§„ ìƒˆë¡œìš´ array ë¥¼ ë§Œë“¤ì–´ ë‚¸ë‹¤. ê²°êµ­ copy ë¼ëŠ” ì‘ì—…ì´ í•„ìš”í•œ ê²ƒì´ë‹¤. ê·¸ëŸ¼ ë§¤ê°œë³€ìˆ˜ í•˜ë‚˜ë§Œ ë°›ëŠ” ìœ„ì—ìˆëŠ” add() ëŠ” ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ” ê±¸ê¹Œ? ë°©ê¸ˆ ì–¸ê¸‰í•œ ì–´ë–¤ ì‘ì—… ì—ì„œ ensureCapacityInternal() ë©”ì†Œë“œê°€ ì‚¬ì´ì¦ˆ ì¡°ì ˆì„ ë‹´ë‹¹í•œë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  private void ensureCapacityInternal(int minCapacity) { if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) { minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity); } ensureExplicitCapacity(minCapacity); } private void ensureExplicitCapacity(int minCapacity) { modCount++; // overflow-conscious code  if (minCapacity - elementData.length \u0026gt; 0) grow(minCapacity); }   ensureCapacityInternal() ë©”ì†Œë“œë¡œ ê°€ë³´ë©´, ì‚¬ì´ì¦ˆ ì¡°ì ˆì„ ìœ„í•´ ensureExplicitCapacity() ë¥¼ ë˜ í˜¸ì¶œí•œë‹¤. ensureExplicitCapacity() ë©”ì†Œë“œì—ì„œëŠ” if (minCapacity - elementData.length \u0026gt; 0) ì´ if ë¬¸ì— ì˜í•´ í˜„ì¬ data ë¥¼ ë‹´ê³  ìˆëŠ” array ì˜ length ê°€ full ì´ë©´ grow() ë¼ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ size ë¥¼ ëŠ˜ë¦°ë‹¤. grow() í•¨ìˆ˜ë¡œ ê°€ë³´ë©´ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  /** * Increases the capacity to ensure that it can hold at least the * number of elements specified by the minimum capacity argument. * * @param minCapacity the desired minimum capacity */ private void grow(int minCapacity) { // overflow-conscious code  int oldCapacity = elementData.length; int newCapacity = oldCapacity + (oldCapacity \u0026gt;\u0026gt; 1); if (newCapacity - minCapacity \u0026lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE \u0026gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win:  elementData = Arrays.copyOf(elementData, newCapacity); }   int newCapacity = oldCapacity + (oldCapacity \u0026raquo; 1); ì—¬ê¸°ê°€ í¬ì¸íŠ¸ë‹¤. ë¹„íŠ¸ì—°ì‚°ìœ¼ë¡œ ê¸°ì¡´ size ì˜ 1/2 ë§Œí¼ ìƒˆë¡œìš´ capacity ë¥¼ í• ë‹¹í•˜ë„ë¡ í•œë‹¤. oldCapacity ê°’ì´ 10 (default) ì´ì—ˆë‹¤ë©´, 10 \u0026raquo; 1 ì˜ ê²½ìš° 10 ì˜ 2ì§„ìˆ˜ì¸ 1010(2) ì„ 1-bit right shifting í•œ ê°’ì¸ 0101(2) , ì¦‰ 10ì§„ìˆ˜ 5 ë§Œí¼ size ë¥¼ í‚¤ìš°ëŠ” ê²ƒì´ë‹¤. ì´ë ‡ê²Œ size í‚¤ì›Œì„œ ê²°êµ­ í•œë‹¤ëŠ” ê²Œ copy ë‹¤. ê²°êµ­ java ì—ì„œ ì œê³µí•˜ëŠ” ArrayList ë„ ë³„ë‹¤ë¥¸ ì‹ ë°•í•œ ë°©ë²•ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” array ê°€ ì•„ë‹ˆë¼ ê·¸ëƒ¥ array ì¸ ê²ƒì´ë‹¤. ì¦‰, size ê°€ ê³ ì •ë˜ì§€ ì•Šê²Œ í•˜ë ¤ë©´ ë¹„ìš©ì´ ë§ì´ ë“ ë‹¤ëŠ” ë‹¨ì ì´ ìˆëŠ” ê²ƒì€ í™•ì‹¤í•˜ë‹¤. ","permalink":"https://youngeun-in.github.io/array-arraylist/","tags":["array","array-list"],"title":"Array \u0026 ArrayList"},{"categories":["java"],"contents":"Nested Class? í´ë˜ìŠ¤ ë‚´ë¶€ì— ì„ ì–¸í•œ í´ë˜ìŠ¤ë¡œ Static Nested í´ë˜ìŠ¤ì™€ Inner í´ë˜ìŠ¤ë¡œ ë‚˜ë‰œë‹¤. ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ë˜ ë©¤ë²„í´ë˜ìŠ¤, ì§€ì—­ í´ë˜ìŠ¤ì™€ ìµëª… í´ë˜ìŠ¤ë¡œ ë‚˜ë‰œë‹¤. ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” ê²½ìš° ë…¼ë¦¬ì ìœ¼ë¡œ ë¬¶ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ê±°ë‚˜ ìº¡ìŠí™”ë¥¼ í†µí•´ êµ¬í˜„ë˜ì–´ì•¼ í•  ë•Œ ì‚¬ìš©ëœë‹¤. ì´ì™€ ê°™ì€ ì´ìœ ë¡œ ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ìº¡ìˆ í™”ì˜ íŠ¹ì§•ì„ ê°€ì§€ê²Œ ë˜ëŠ”ë°, í´ë˜ìŠ¤ ë‚´ë¶€ë¥¼ ìˆ¨ê¸°ê±°ë‚˜ ì€ë‹‰í•˜ëŠ”ë° ìœ ìš©í•˜ë©°, ì£¼ë¡œ Java GUIì—ì„œ ì‚¬ìš©ëœë‹¤. Nested Classì˜ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. Static Nested Inner Class í´ë˜ìŠ¤ ë‚´ë¶€ì— êµ¬í˜„ëœ í´ë˜ìŠ¤ì— static ì˜ˆì•½ì–´ë¥¼ ë¶™ì—¬ ë…¼ë¦¬ì ìœ¼ë¡œ ë‚´ë¶€ í´ë˜ìŠ¤ì™€ ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ ê´€ê³„ë¥¼ ë¬¶ì–´ì¤€ë‹¤. Static ì„ ì–¸ì´ ê°–ëŠ” íŠ¹ì„±ì´ ë°˜ì˜ëœ í´ë˜ìŠ¤ì´ë‹¤. ë”°ë¼ì„œ ìì‹ ì„ ê°ì‹¸ëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì™€ ìƒê´€ì—†ì´ static ë„¤ìŠ¤í‹°ë“œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤. í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œë§Œ ê³µìœ í•˜ê³ ì í•˜ëŠ” ë³€ìˆ˜ê°€ ìˆì„ ë•Œ private static í‚¤ì›Œë“œë¡œ ì„ ì–¸í•˜ê³  static nest classë¡œ ì„ ì–¸í•˜ì—¬ ìº¡ìŠí™”í•  ìˆ˜ ìˆë‹¤. Member Class ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜, ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œì™€ ë™ì¼í•œ ìœ„ì¹˜ì— ì •ì˜ ë©¤ë²„ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ì¢…ì†ì ì´ë‹¤. í´ë˜ìŠ¤ì˜ ì •ì˜ë¥¼ ê°ì¶”ì–´ì•¼ í•  ë•Œ ì‚¬ìš©ëœë‹¤. ë°˜ë³µìëŠ” ë©¤ë²„í´ë˜ìŠ¤ì´ë‹¤. Local Class ì¤‘ê´„í˜¸ ë‚´ì—, íŠ¹íˆ ë©”ì†Œë“œ ë‚´ì— ì •ì˜ Anonymous Class í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ê°ì²´ë¡œ ì„ ì–¸í•˜ê¸° ìœ„í•´ì„œëŠ” ìƒì„±ì í˜¹ì€ ë©”ì†Œë“œ ë‚´ë¶€ì—ì„œ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ê³ , ì´ ë•Œ ì¤‘ê´„í˜¸ë¥¼ ë§Œë“¤ì–´ ê·¸ ë‚´ë¶€ì— í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ì—¬ êµ¬í˜„í•œë‹¤. ìµëª… í´ë˜ìŠ¤ëŠ” ëŸ°íƒ€ì„ ì‹œ, JVMì´ ì½ì–´ì•¼ í•˜ëŠ” í´ë˜ìŠ¤ íŒŒì¼ì´ ì¤„ì–´ ì‹¤í–‰ ì†ë„ê°€ í–¥ìƒë  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, ë‚¨ë°œí•  ê²½ìš° ì½”ë“œ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ","permalink":"https://youngeun-in.github.io/%EC%9E%90%EB%B0%94%EC%9D%98-nested-class/","tags":["nested-class"],"title":"ìë°”ì˜ Nested Class"},{"categories":["java"],"contents":"equals ë©”ì†Œë“œ Object í´ë˜ìŠ¤ì— ì •ì˜ëœ equals ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3  public boolean equals(Object obj) { return (this == obj); }   ë‹¨ìˆœíˆ Objectì˜ ==ë¡œ ë¹„êµí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë‘ ê°ì²´ì˜ ë‚´ìš©ì´ ê°™ì€ì§€ í™•ì¸í•˜ë ¤ë©´ equals ë©”ì†Œë“œë¥¼ Overrideí•˜ë©´ ëœë‹¤. 1 2 3 4 5 6 7  @Override public boolean equals(Object o) { if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; AttachFile that = (AttachFile) o; return Objects.equals(id, that.id) \u0026amp;\u0026amp; Objects.equals(fileName, that.fileName) \u0026amp;\u0026amp; Objects.equals(minutes, that.minutes); }   hashCode ë©”ì†Œë“œ Object í´ë˜ìŠ¤ì— ì •ì˜ëœ hashCode ë©”ì†Œë“œëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ë‹¤ë¥´ë©´ êµ¬ì„± ë‚´ìš©ì— ìƒê´€ì—†ì´ ì „í˜€ ë‹¤ë¥¸ í•´ì‹œ ê°’ì„ ë°˜í™˜í•˜ë„ë¡œ ì •ì˜ë˜ì–´ ìˆë‹¤. Object í´ë˜ìŠ¤ì— ì •ì˜ëœ hashCode ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2  @HotSpotIntrinsicCandidate public native int hashCode();   ë‹¤ìŒì€ [hotspotì˜ jvm.cpp íŒŒì¼ì—ì„œ ë°œì·Œ][jvm-cpp-583]í•œ ê²ƒì´ë‹¤. ë²„ì „ì€ JDK10 ì´ì§€ë§Œ, JDK8ê³¼ ì°¨ì´ì ì€ ì—†ë‹¤. 1 2 3 4 5  JVM_ENTRY(jint, JVM_IHashCode(JNIEnv* env, jobject handle)) JVMWrapper(\u0026#34;JVM_IHashCode\u0026#34;); // as implemented in the classic virtual machine; return 0 if object is NULL  return handle == NULL ? 0 : ObjectSynchronizer::FastHashCode (THREAD, JNIHandles::resolve_non_null(handle)) ; JVM_END   [JVM_IHashCode ëŠ” ObjectSynchronizer::FastHashCode][synchronizer-714]ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³  ì´ í•¨ìˆ˜ë¥¼ ì˜ ì½ì–´ë³´ë©´ ìƒˆë¡œìš´ í•´ì‹œ ì½”ë“œ í• ë‹¹ì€ get_next_hash í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ë‹¤ìŒì€ get_next_hash í•¨ìˆ˜ì˜ ì½”ë“œì´ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56  // hashCode() generation : // // Possibilities: // * MD5Digest of {obj,stwRandom} // * CRC32 of {obj,stwRandom} or any linear-feedback shift register function. // * A DES- or AES-style SBox[] mechanism // * One of the Phi-based schemes, such as: // 2654435761 = 2^32 * Phi (golden ratio) // HashCodeValue = ((uintptr_t(obj) \u0026gt;\u0026gt; 3) * 2654435761) ^ GVars.stwRandom ; // * A variation of Marsaglia\u0026#39;s shift-xor RNG scheme. // * (obj ^ stwRandom) is appealing, but can result // in undesirable regularity in the hashCode values of adjacent objects // (objects allocated back-to-back, in particular). This could potentially // result in hashtable collisions and reduced hashtable efficiency. // There are simple ways to \u0026#34;diffuse\u0026#34; the middle address bits over the // generated hashCode values:  static inline intptr_t get_next_hash(Thread * Self, oop obj) { intptr_t value = 0; if (hashCode == 0) { // This form uses global Park-Miller RNG.  // On MP system we\u0026#39;ll have lots of RW access to a global, so the  // mechanism induces lots of coherency traffic.  value = os::random(); } else if (hashCode == 1) { // This variation has the property of being stable (idempotent)  // between STW operations. This can be useful in some of the 1-0  // synchronization schemes.  intptr_t addrBits = cast_from_oop\u0026lt;intptr_t\u0026gt;(obj) \u0026gt;\u0026gt; 3; value = addrBits ^ (addrBits \u0026gt;\u0026gt; 5) ^ GVars.stwRandom; } else if (hashCode == 2) { value = 1; // for sensitivity testing  } else if (hashCode == 3) { value = ++GVars.hcSequence; } else if (hashCode == 4) { value = cast_from_oop\u0026lt;intptr_t\u0026gt;(obj); } else { // Marsaglia\u0026#39;s xor-shift scheme with thread-specific state  // This is probably the best overall implementation -- we\u0026#39;ll  // likely make this the default in future releases.  unsigned t = Self-\u0026gt;_hashStateX; t ^= (t \u0026lt;\u0026lt; 11); Self-\u0026gt;_hashStateX = Self-\u0026gt;_hashStateY; Self-\u0026gt;_hashStateY = Self-\u0026gt;_hashStateZ; Self-\u0026gt;_hashStateZ = Self-\u0026gt;_hashStateW; unsigned v = Self-\u0026gt;_hashStateW; v = (v ^ (v \u0026gt;\u0026gt; 19)) ^ (t ^ (t \u0026gt;\u0026gt; 8)); Self-\u0026gt;_hashStateW = v; value = v; } value \u0026amp;= markOopDesc::hash_mask; if (value == 0) value = 0xBAD; assert(value != markOopDesc::no_hash, \u0026#34;invariant\u0026#34;); return value; }   equalsì™€ hashCodeëŠ” ì™œ ê°™ì´ ì¬ì •ì˜í•´ì•¼ í• ê¹Œ? hash ê°’ì„ ì‚¬ìš©í•˜ëŠ” Collection(HashMap, HashSet, HashTable)ì€ ê°ì²´ê°€ ë…¼ë¦¬ì ìœ¼ë¡œ ê°™ì€ì§€ ë¹„êµí•  ë•Œ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì¹œë‹¤. hashCode ë©”ì†Œë“œì˜ ë°˜í™˜ê°’ì„ ì´ìš©í•´ì„œ ê²€ìƒ‰ì˜ ë²”ìœ„ë¥¼ í™• ì¤„ì—¬ë²„ë¦¬ê³ , í•´ë‹¹ ë¶€ë¥˜ ë‚´ì— ì¡´ì¬í•˜ëŠ” ë°ì´í„°ì˜ ë‚´ìš© ë¹„êµëŠ” equals ë©”ì†Œë“œë¥¼ í†µí•´ì„œ ì§„í–‰í•œë‹¤. Object í´ë˜ìŠ¤ì˜ hashCode ë©”ì„œë“œëŠ” ê°ì²´ì˜ ê³ ìœ í•œ ì£¼ì†Œ ê°’ì„ int ê°’ìœ¼ë¡œ ë³€í™˜í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ë§ˆë‹¤ ë‹¤ë¥¸ ê°’ì„ ë¦¬í„´í•œë‹¤. ë‘ ê°œì˜ Car ê°ì²´ëŠ” equalsë¡œ ë¹„êµë„ í•˜ê¸° ì „ì— ì„œë¡œ ë‹¤ë¥¸ hashCode ë©”ì„œë“œì˜ ë¦¬í„´ ê°’ìœ¼ë¡œ ì¸í•´ ë‹¤ë¥¸ ê°ì²´ë¡œ íŒë‹¨ëœ ê²ƒì´ë‹¤. ì„±ëŠ¥ì— ì•„ì£¼ ë¯¼ê°í•˜ì§€ ì•Šì€ ëŒ€ë¶€ë¶„ì˜ í”„ë¡œê·¸ë¨ì€ ê°„í¸í•˜ê²Œ Objects.hash ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ hashCode ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•´ë„ ë¬¸ì œì—†ë‹¤. ë¯¼ê°í•œ ê²½ìš°ì—ëŠ” ì§ì ‘ ì¬ì •ì˜í•´ì£¼ëŠ” ê²Œ ì¢‹ë‹¤. 1 2 3 4  @Override public int hashCode() { return Objects.hash(id, fileName, minutes); }   Objects í´ë˜ìŠ¤ì— ì •ì˜ëœ hash ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3  public static int hash(Object... values) { return Arrays.hashCode(values); }   Arrays í´ë˜ìŠ¤ì— ì •ì˜ëœ hashCode ë©”ì†Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3 4 5 6 7 8 9 10 11  public static int hashCode(Object a[]) { if (a == null) return 0; int result = 1; for (Object element : a) result = 31 * result + (element == null ? 0 : element.hashCode()); return result; }   ","permalink":"https://youngeun-in.github.io/equals%EC%99%80-hashcode/","tags":["equals","hashcode"],"title":"equalsì™€ hashCode"},{"categories":["java"],"contents":"Iterable ì¸í„°í˜ì´ìŠ¤ Collection ì¸í„°í˜ì´ìŠ¤ì˜ ìƒìœ„ ì¸í„°í˜ì´ìŠ¤ëŠ” Iterable ì´ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39  package java.lang; public interface Iterable\u0026lt;T\u0026gt; { /** * Returns an iterator over elements of type {@code T}. * * @return an Iterator. */ Iterator\u0026lt;T\u0026gt; iterator(); /** * Performs the given action for each element of the {@code Iterable} * until all elements have been processed or the action throws an * exception. Actions are performed in the order of iteration, if that * order is specified. Exceptions thrown by the action are relayed to the * caller. * \u0026lt;p\u0026gt; * The behavior of this method is unspecified if the action performs * side-effects that modify the underlying source of elements, unless an * overriding class has specified a concurrent modification policy. * * @implSpec * \u0026lt;p\u0026gt;The default implementation behaves as if: * \u0026lt;pre\u0026gt;{@code * for (T t : this) * action.accept(t); * }\u0026lt;/pre\u0026gt; * * @param action The action to be performed for each element * @throws NullPointerException if the specified action is null * @since 1.8 */ default void forEach(Consumer\u0026lt;? super T\u0026gt; action) { Objects.requireNonNull(action); for (T t : this) { action.accept(t); } } }   Iterable ì¸í„°í˜ì´ìŠ¤ ì•ˆì—ëŠ” iterator ë©”ì†Œë“œê°€ ì¶”ìƒë©”ì†Œë“œë¡œ ì„ ì–¸ì´ ë˜ì–´ìˆë‹¤. ì´ë ‡ê²Œ ë•Œë¬¸ì— Collection ì¸í„°í˜ì´ìŠ¤ ê³„ì¸µêµ¬ì¡°ì—ì„œ List, Set, Queueë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ë“¤ì€ ë‹¤ iterator ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆë‹¤. ë”°ë¼ì„œ Iterableì˜ ì—­í• ì€ iterator()ë©”ì†Œë“œë¥¼ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ë¬´ì¡°ê±´ êµ¬í˜„ì„ í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•¨ì´ë‹¤. Iterator ì¸í„°í˜ì´ìŠ¤ Iterator ì¸í„°í˜ì´ìŠ¤ëŠ” Collectionê³¼ëŠ” ë³„ê°œë¡œ ì¡´ì¬í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49  package java.util; public interface Iterator\u0026lt;E\u0026gt; { /** * Returns {@code true} if the iteration has more elements. * (In other words, returns {@code true} if {@link #next} would * return an element rather than throwing an exception.) * * @return {@code true} if the iteration has more elements */ boolean hasNext(); /** * Returns the next element in the iteration. * * @return the next element in the iteration * @throws NoSuchElementException if the iteration has no more elements */ E next(); /** * Removes from the underlying collection the last element returned * by this iterator (optional operation). This method can be called * only once per call to {@link #next}. * \u0026lt;p\u0026gt; * The behavior of an iterator is unspecified if the underlying collection * is modified while the iteration is in progress in any way other than by * calling this method, unless an overriding class has specified a * concurrent modification policy. * \u0026lt;p\u0026gt; * The behavior of an iterator is unspecified if this method is called * after a call to the {@link #forEachRemaining forEachRemaining} method. * * @implSpec * The default implementation throws an instance of * {@link UnsupportedOperationException} and performs no other action. * * @throws UnsupportedOperationException if the {@code remove} * operation is not supported by this iterator * * @throws IllegalStateException if the {@code next} method has not * yet been called, or the {@code remove} method has already * been called after the last call to the {@code next} * method */ default void remove() { throw new UnsupportedOperationException(\u0026#34;remove\u0026#34;); } }   Iterator ì¸í„°í˜ì´ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ì€ ìœ„ì™€ ê°™ì´ ë˜ì–´ìˆë‹¤. ë”°ë¼ì„œ ìœ„ì˜ hasNext(), next(), remove() ë“±ì˜ ë©”ì†Œë“œë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤. ìš©ë„ëŠ” ì»¬ë ‰ì…˜í´ë˜ìŠ¤ì˜ ë°ì´í„°ë¥¼ í•˜ë‚˜ì”© ì½ì–´ì˜¬ ë•Œ ì‚¬ìš©í•œë‹¤. í‘œì¤€í™”ê°€ ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ ì»¬ë ‰ì…˜ í´ë˜ìŠ¤ì˜ ë°ì´í„°ë¥¼ ì½ì–´ì˜¬ ë•Œë§ˆë‹¤ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ë°ì´í„°ë¥¼ êº¼ë‚´ì˜¤ëŠ” ë©”ì†Œë“œë“¤ì„ ë‹¤ ì•Œê³  ìˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— Iteratorì´ ì¡´ì¬í•œë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  import java.util.Iterator; import java.util.LinkedList; public class Test { public static void main(String[] args) { LinkedList\u0026lt;String\u0026gt; list = new LinkedList\u0026lt;\u0026gt;(); list.add(\u0026#34;Lee\u0026#34;); list.add(\u0026#34;ekk\u0026#34;); list.add(\u0026#34;eww\u0026#34;); Iterator it = list.iterator(); while (it.hasNext()) { System.out.print(it.next() + \u0026#34; \u0026#34;); } } }   ì´ì²˜ëŸ¼ ê³µí†µ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•´ì„œ í‘œì¤€ì„ ì •ì˜í•˜ê³  êµ¬í˜„í•˜ì—¬ í‘œì¤€ì„ ë”°ë¥´ë„ë¡ í•¨ìœ¼ë¡œì¨ ì½”ë“œì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ì—¬ ì¬ì‚¬ìš©ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” ê²ƒì´ ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì˜ ì¤‘ìš”í•œ ëª©ì  ì¤‘ì˜ í•˜ë‚˜ì´ë‹¤. ì¶œì²˜ https://devlog-wjdrbs96.tistory.com/84 ","permalink":"https://youngeun-in.github.io/iterable-and-iterator/","tags":["iterable","iterator"],"title":"Iterable ì¸í„°í˜ì´ìŠ¤ì™€ Iterator ì¸í„°í˜ì´ìŠ¤"},{"categories":["java"],"contents":"Comparable ì¸í„°í˜ì´ìŠ¤ JAVAì—ì„œëŠ” ì•„ë˜ì˜ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì„ í†µí•´ ì •ë ¬ì˜ ê¸°ì¤€ì„ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ ì •ì˜í•  ê²ƒì„ ìš”êµ¬í•˜ê³  ìˆë‹¤. 1 2 3  public interface Comparable\u0026lt;T\u0026gt; { int compareTo(T obj); }   ì‚¬ìš© ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32  import java.util.Iterator; import java.util.TreeSet; class Person implements Comparable\u0026lt;Person\u0026gt; { String name; int age; public Person(String name, int age) { this.name = name; this.age = age; } public void showData() { System.out.printf(\u0026#34;%s %d \\n\u0026#34;, name, age); } public int compareTo(Person p) { if (age \u0026gt; p.age) return 1; else if (age \u0026lt; p.age) return -1; else return 0; } } class ComparablePerson { public static void main(String[] args) { TreeSet\u0026lt;Person\u0026gt; sTree = new TreeSet\u0026lt;Person\u0026gt;(); sTree.add(new Person(\u0026#34;Lee\u0026#34;, 24)); sTree.add(new Person(\u0026#34;Hong\u0026#34;, 29)); sTree.add(new Person(\u0026#34;Choi\u0026#34;, 21)); Iterator\u0026lt;Person\u0026gt; itr = sTree.iterator(); while (itr.hasNext()) itr.next().showData(); } }   Comparator ì¸í„°í˜ì´ìŠ¤ String í´ë˜ìŠ¤ëŠ” ì´ë¯¸ compareTo ë©”ì†Œë“œë¥¼ êµ¬í˜„í•˜ê³  ìˆë‹¤. ì´ ë•Œ ì •ë ¹ê¸°ì¤€ì„ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œ String í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒˆë¡œ ì •ì˜í•˜ëŠ” ê²ƒì€ ë²ˆê±°ë¡­ë‹¤ ë”°ë¼ì„œ ìƒˆë¡œìš´ ì •ë ¬ ê¸°ì¤€ì„ íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆë„ë¡ ì •ì˜ëœ ê²ƒì´ Comparator ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. 1 2 3  public interface Comparator\u0026lt;T\u0026gt; { int compare(T o1, T o2); }   ì‚¬ìš© ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  import java.util.TreeSet; import java.util.Iterator; import java.util.Comparator; class StrLenComparator implements Comparator\u0026lt;String\u0026gt; { public int compare(String str1, String str2) { if (str1.length() \u0026gt; str2.length()) return 1; else if (str1.length() \u0026lt; str2.length()) return -1; else return 0; /* * return str1.length()-str2.length(); */ } } class IntroComparator { public static void main(String[] args) { TreeSet\u0026lt;String\u0026gt; tSet = new TreeSet\u0026lt;String\u0026gt;(new StrLenComparator()); tSet.add(\u0026#34;Orange\u0026#34;); tSet.add(\u0026#34;Apple\u0026#34;); tSet.add(\u0026#34;Dog\u0026#34;); tSet.add(\u0026#34;Individual\u0026#34;); Iterator\u0026lt;String\u0026gt; itr = tSet.iterator(); while (itr.hasNext()) System.out.println(itr.next()); } }   ","permalink":"https://youngeun-in.github.io/comparable-and-comparator/","tags":["comparable","comparator"],"title":"Comparable ì¸í„°í˜ì´ìŠ¤ì™€ Comparator ì¸í„°í˜ì´ìŠ¤ì˜ ì°¨ì´"},{"categories":["spring"],"contents":"Springì˜ ëŒ€í‘œì ì¸ í•µì‹¬ê°€ì¹˜ 3ê°€ì§€ë¡œ IoC, AOP, PSAê°€ ìˆë‹¤. PSA (Portable Service Abstraction) @Transactional ì–´ë…¸í…Œì´ì…˜ì„ ì„ ì–¸í•˜ëŠ” ê²ƒ ë§Œìœ¼ë¡œ ë³„ë„ì˜ ì½”ë“œ ì¶”ê°€ ì—†ì´ íŠ¸ëœì­ì…˜ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë‚´ë¶€ì ìœ¼ë¡œ íŠ¸ëœì­ì…˜ ì½”ë“œê°€ ì¶”ìƒí™”ë˜ì–´ ìˆ¨ê²¨ì ¸ ìˆëŠ” ê²ƒì´ë‹¤. ì´ë ‡ê²Œ ì¶”ìƒí™” ê³„ì¸µì„ ì‚¬ìš©í•˜ì—¬ ì–´ë–¤ ê¸°ìˆ ì„ ë‚´ë¶€ì— ìˆ¨ê¸°ê³  ê°œë°œìì—ê²Œ í¸ì˜ì„±ì„ ì œê³µí•´ì£¼ëŠ” ê²ƒì´ ì„œë¹„ìŠ¤ ì¶”ìƒí™”(Service Abstraction)ì´ë©°, í•˜ë‚˜ì˜ ì¶”ìƒí™”ë¡œ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ ë¬¶ì–´ë‘” ê²ƒì„ Springì—ì„œ Portable Service Abstractionì´ë¼ê³  í•œë‹¤. PSAì˜ ì›ë¦¬ íŠ¸ëœì­ì…˜ì„ ì˜ˆë¡œ ë“¤ì–´ ì„¤ëª…í•˜ê² ë‹¤. ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ Springì˜ @Transactionalì€ ê° TransactionManagerë¥¼ ê°ê° êµ¬í˜„í•˜ê³  ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìµœìƒìœ„ PlatformTransactionManagerë¥¼ ì´ìš©í•˜ê³  í•„ìš”í•œ TransactionManagerë¥¼ DIë¡œ ì£¼ì…ë°›ì•„ ì‚¬ìš©í•˜ê³  ìˆë‹¤. PlatformTransactionManager ì¸í„°í˜ì´ìŠ¤ì˜ ì†ŒìŠ¤ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3 4 5 6 7 8  public interface PlatformTransactionManager extends TransactionManager { TransactionStatus getTransaction(@Nullable TransactionDefinition definition) throws TransactionException; void commit(TransactionStatus status) throws TransactionException; void rollback(TransactionStatus status) throws TransactionException; }   ","permalink":"https://youngeun-in.github.io/spring-psa/","tags":["PSA"],"title":"Spring PSA"},{"categories":["java"],"contents":"Javaì—ì„œ Stringì„ ìƒì„±í•˜ëŠ” ë°©ì‹ Javaì—ì„œ Stringì„ ìƒì„±í•˜ëŠ” ë°©ì‹ì€ ë‘ê°€ì§€ê°€ ìˆë‹¤.  new ì—°ì‚°ìë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•  String str = new String(\u0026ldquo;Hello\u0026rdquo;);   ë¦¬í„°ëŸ´ì„ ì´ìš©í•˜ëŠ” ë°©ë²•  String str = \u0026ldquo;Hello\u0026rdquo;;    new ì—°ì‚°ìë¥¼ í†µí•´ì„œ ìƒì„±í•˜ê²Œ ë˜ë©´ Stringì€ Heapì˜ì—­ì— ì¡´ì¬í•˜ê²Œ ëœë‹¤. í•˜ì§€ë§Œ ë¦¬í„°ëŸ´ì„ ì´ìš©í•  ê²½ìš° Heap ì˜ì—­ì˜ String poolì´ë¼ëŠ” ì˜ì—­ì— ì¡´ì¬í•˜ê²Œ ëœë‹¤. 1 2 3 4 5 6 7  String a = \u0026#34;apple\u0026#34;; String b = new String(\u0026#34;apple\u0026#34;); String c = \u0026#34;apple\u0026#34;; String d = new String(\u0026#34;apple\u0026#34;); System.out.println(a==b); // false System.out.prrintln(a==c); // true   ì²« ë²ˆì§¸ ì¤„ì—ì„œ String aê°€ ìƒì„±ë  ë•Œ, \u0026lsquo;apple\u0026rsquo;ì€ ë¦¬í„°ëŸ´ ë¬¸ìì—´ì´ë¯€ë¡œ Heapì˜ì—­ ì¤‘ì—ì„œ String poolì— ìœ„ì¹˜í•˜ê²Œ ëœë‹¤. ë‘ ë²ˆì§¸ ì¤„ì—ì„œ String bëŠ” newì—°ì‚°ìë¥¼ í†µí•´ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. Heapì˜ì—­ì— ìœ„ì¹˜í•˜ì§€ë§Œ String poolì´ ì•„ë‹Œ ë‹¤ë¥¸ ì£¼ì†Œê°’ì„ ì°¸ì¡°í•œë‹¤. \u0026lsquo;==\u0026lsquo;ì—°ì‚°ìëŠ” ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ì°¸ì¡°í•˜ëŠ”ê°€ë¥¼ ë¹„êµí•œë‹¤. ë•Œë¬¸ì— aì™€ bì˜ ë¹„êµ(a==b)ëŠ” falseë¥¼ ë°˜í™˜í•˜ê²Œ ëœë‹¤. ì„¸ë²ˆì§¸ ì¤„ì—ì„œ cê°€ ê°€ë¦¬í‚¤ëŠ” \u0026lsquo;apple\u0026rsquo;ì„ String poolì— ë„£ìœ¼ë ¤ê³  ë³´ë‹ˆ ì´ë¯¸ \u0026lsquo;apple\u0026rsquo;ì´ ì¡´ì¬í•œë‹¤. ê·¸ëŸ¬ë©´ cëŠ” aì™€ ê°™ì€ String poolì˜ \u0026lsquo;apple\u0026rsquo;ì„ ê°€ë¦¬í‚¤ê²Œ ëœë‹¤. aì™€ cê°€ ê°™ì€ ê°’ì„ ì°¸ì¡°í•˜ë¯€ë¡œ a==cëŠ” trueë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. ë¦¬í„°ëŸ´ë¡œ ì„ ì–¸ ì‹œ ë©”ëª¨ë¦¬ì—ì„œì˜ ë™ì‘ Stringì„ ë¦¬í„°ëŸ´ë¡œ ì„ ì–¸í•  ê²½ìš° ë‚´ë¶€ì ìœ¼ë¡œ Stringì˜ intern()ë©”ì„œë“œê°€ í˜¸ì¶œë˜ê²Œ ëœë‹¤. intern() ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ ë¬¸ìì—´ì´ String poolì— ì¡´ì¬í•˜ëŠ”ì§€ ê²€ìƒ‰í•˜ê³  ìˆë‹¤ë©´ ê·¸ ì£¼ì†Œê°’ì„ ë°˜í™˜, ì—†ë‹¤ë©´ ë¬¸ìì—´ì„ String poolì— ë„£ê³  ê·¸ ì£¼ì†Œê°’ì„ ë°˜í™˜í•œë‹¤. 1 2 3 4 5 6  String a = \u0026#34;apple\u0026#34;; String b = new String(\u0026#34;apple\u0026#34;); String c = b.intern() System.out.println(a==b); // false System.out.prrintln(a==c); // true   ë•Œë¬¸ì— cì˜ ê²½ìš° bì˜ ê°’ì¸ \u0026lsquo;apple\u0026rsquo;ì´ String poolì— ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ê°€ë¥¼ ì°¾ê³ , ì´ë¯¸ ì¡´ì¬í•˜ë¯€ë¡œ í•´ë‹¹ ë¬¸ìì—´ì„ ë°˜í™˜í•´ c=\u0026lsquo;apple\u0026rsquo;ì´ ë˜ê³ , aì™€ cëŠ” ê²°êµ­ ê°™ì€ ì£¼ì†Œë¥¼ ì°¸ì¡°í•˜ê²Œ ë˜ì–´ a==cëŠ” trueê°€ ëœë‹¤. ì¶œì²˜ https://simple-ing.tistory.com/3 ","permalink":"https://youngeun-in.github.io/java%EC%97%90%EC%84%9C-string%EC%9D%84-%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94-%EB%B0%A9%EC%8B%9D/","tags":["string","intern()"],"title":"Javaì—ì„œ Stringì„ ìƒì„±í•˜ëŠ” ë°©ì‹"},{"categories":["java"],"contents":"ë°ì´í„° ê·¸ë£¹ê´€ë¦¬ ê²°ì œë¥¼ ì˜ˆë¡œ ë“¤ì–´ Enumì˜ í™œìš©ë²•ì„ ì•Œì•„ë³´ê³ ì í•œë‹¤. ê²°ì œë¼ëŠ” ë°ì´í„°ëŠ” ê²°ì œ ì¢…ë¥˜ì™€ ê²°ì œ ìˆ˜ë‹¨ì´ë¼ëŠ” 2ê°€ì§€ í˜•íƒœë¡œ í‘œí˜„ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì‹ ìš©ì¹´ë“œ ê²°ì œëŠ” ì‹ ìš©ì¹´ë“œ ê²°ì œë¼ëŠ” ê²°ì œ ìˆ˜ë‹¨ì´ë©°, ì¹´ë“œë¼ëŠ” ê²°ì œ ì¢…ë¥˜ì— í¬í•¨ëœë‹¤. ì´ ì¹´ë“œ ê²°ì œëŠ” í˜ì´ì½”, ì¹´ì¹´ì˜¤í˜ì´ë“± ì—¬ëŸ¬ ê²°ì œ ìˆ˜ë‹¨ì´ í¬í•¨ë˜ì–´ ìˆë‹¤. ê²°ì œì¢…ë¥˜, ê²°ì œìˆ˜ë‹¨ë“±ì˜ ê´€ê³„ë¥¼ ëª…í™•íˆ í‘œí˜„í•˜ë©°, ê° íƒ€ì…ì€ ë³¸ì¸ì´ ìˆ˜í–‰í•´ì•¼í•  ê¸°ëŠ¥ê³¼ ì±…ì„ë§Œ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ Enumì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ ë•Œ DB í…Œì´ë¸”ì˜ ê²°ì œìˆ˜ë‹¨ ì»¬ëŸ¼ì— ì˜ëª»ëœ ê°’ì„ ë“±ë¡í•˜ê±°ë‚˜, íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ëœ ê°’ì´ ì˜ëª»ë˜ì—ˆì„ ê²½ìš°ì—ë„ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ê²°ì œìˆ˜ë‹¨ ì—­ì‹œ Enumìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  public enum PayType { ACCOUNT_TRANSFER(\u0026#34;ê³„ì¢Œì´ì²´\u0026#34;), REMITTANCE(\u0026#34;ë¬´í†µì¥ì…ê¸ˆ\u0026#34;), ON_SITE_PAYMENT(\u0026#34;í˜„ì¥ê²°ì œ\u0026#34;), TOSS(\u0026#34;í† ìŠ¤\u0026#34;), PAYCO(\u0026#34;í˜ì´ì½”\u0026#34;), CARD(\u0026#34;ì‹ ìš©ì¹´ë“œ\u0026#34;), KAKAO_PAY(\u0026#34;ì¹´ì¹´ì˜¤í˜ì´\u0026#34;), BAEMIN_PAY(\u0026#34;ë°°ë¯¼í˜ì´\u0026#34;), POINT(\u0026#34;í¬ì¸íŠ¸\u0026#34;), COUPON(\u0026#34;ì¿ í°\u0026#34;); private final String title; PayType(String title) { this.title = title; } public String getTitle() { return title; } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  import lombok.Getter; import java.util.Arrays; import java.util.Collections; import java.util.List; @Getter public enum PayGroup { CASH(\u0026#34;í˜„ê¸ˆ\u0026#34;, Arrays.asList(PayType.ACCOUNT_TRANSFER, PayType.REMITTANCE, PayType.ON_SITE_PAYMENT, PayType.TOSS)), CARD(\u0026#34;ì¹´ë“œ\u0026#34;, Arrays.asList(PayType.PAYCO, PayType.CARD, PayType.KAKAO_PAY, PayType.BAEMIN_PAY)), ETC(\u0026#34;ê¸°íƒ€\u0026#34;, Arrays.asList(PayType.POINT, PayType.COUPON)), EMPTY(\u0026#34;ì—†ìŒ\u0026#34;, Collections.EMPTY_LIST); private final String title; private final List\u0026lt;PayType\u0026gt; payList; PayGroup(String title, List\u0026lt;PayType\u0026gt; payList) { this.title = title; this.payList = payList; } public static PayGroup findByPayType(PayType payType){ return Arrays.stream(PayGroup.values()) .filter(payGroup -\u0026gt; payGroup.hasPayType(payType)) .findAny() .orElse(EMPTY); } private boolean hasPayType(PayType payType){ return payList.stream() .anyMatch(pay -\u0026gt; pay == payType); } }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  import org.junit.jupiter.api.Test; import static org.junit.jupiter.api.Assertions.*; class PayGroupTest { @Test public void PayGroupì—ê²Œ_ì§ì ‘_ê²°ì œì¢…ë¥˜_ë¬¼ì–´ë³´ê¸°_PayType () { PayType payType = selectPayType(); PayGroup payGroup = PayGroup.findByPayType(payType); assertEquals(payGroup.name(), \u0026#34;CARD\u0026#34;); assertEquals(payGroup.getTitle(), \u0026#34;ì¹´ë“œ\u0026#34;); } private PayType selectPayType(){ return PayType.BAEMIN_PAY; } }   DB í˜¹ì€ APIì—ì„œ PayTypeìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„, íƒ€ì… ì•ˆì „ì„±ê¹Œì§€ í™•ë³´í•˜ì—¬ PayGroup ê´€ë ¨ëœ ì²˜ë¦¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ì°¸ê³  https://github.com/jojoldu/blog-code/tree/master/enum-settler ","permalink":"https://youngeun-in.github.io/enum-usage-2/","tags":["enum"],"title":"Enum ì‚¬ìš© (í™œìš©)"},{"categories":["java"],"contents":"ìƒíƒœì™€ í–‰ìœ„ë¥¼ í•œê³³ì—ì„œ ê´€ë¦¬ ì˜ˆë¥¼ ë“¤ì–´ DBì— ì €ì¥ëœ codeì˜ ê°’ì´ \u0026ldquo;CALC_A\u0026quot;ì¼ ê²½ìš°ì—” ê°’ ê·¸ëŒ€ë¡œ, \u0026ldquo;CALC_B\u0026quot;ì¼ ê²½ìš°ì—” 10 í•œ ê°’ì„, \u0026ldquo;CALC_C\u0026quot;ì¼ ê²½ìš°ì—” 3ì„ ê³„ì‚°í•˜ì—¬ ì „ë‹¬í•˜ëŠ” ê²½ìš°ë¥¼ ìƒê°í•´ë³´ì. ì´ ë•Œ \u0026ldquo;DBì˜ í…Œì´ë¸”ì—ì„œ ë½‘ì€ íŠ¹ì • ê°’ì€ ì§€ì •ëœ ë©”ì†Œë“œì™€ ê´€ê³„ê°€ ìˆë‹¤.\u0026ldquo;ëŠ” ì‚¬ì‹¤ì„ ì½”ë“œë¡œ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ Enumì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì¦‰ JAVAì—ì„œ Enumì„ í†µí•´ ìƒíƒœì™€ í–‰ìœ„ë¥¼ í•œê³³ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  import java.util.function.Function; public enum CalculatorType { CALC_A(value -\u0026gt; value), CALC_B(value -\u0026gt; value * 10), CALC_C(value -\u0026gt; value * 30), CALC_ETC(value -\u0026gt; 0L); private Function\u0026lt;Long, Long\u0026gt; expression; CalculatorType(Function\u0026lt;Long, Long\u0026gt; expression) { this.expression = expression; } public long calculate(long value) { return expression.apply(value); } }   1 2 3 4 5 6 7 8 9 10  import javax.persistence.Column; import javax.persistence.EnumType; import javax.persistence.Enumerated; public class Entity { @Column //@Enumerated(EnumType.STRING)ë¥¼ ì„ ì–¸í•˜ë©´ Enum í•„ë“œê°€ í…Œì´ë¸”ì— ì €ì¥ì‹œ ìˆ«ìí˜•ì¸ 1,2,3ì´ ì•„ë‹Œ, Enumì˜ nameì´ ì €ì¥ëœë‹¤.  @Enumerated(EnumType.STRING) private CalculatorType calculatorType; }   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  import org.testng.annotations.Test; import static org.junit.jupiter.api.Assertions.assertEquals; public class CalculatorTypeTest { private CalculatorType selectType() { return CalculatorType.CALC_B; } @Test public void ì½”ë“œì—_ë”°ë¼_ì„œë¡œë‹¤ë¥¸_ê³„ì‚°í•˜ê¸°_Enum() { CalculatorType code = selectType(); long originValue = 10000L; long result = code.calculate(originValue); assertEquals(result, 100000L); } }   ê°’(ìƒíƒœ)ê³¼ ë©”ì†Œë“œ(í–‰ìœ„)ê°€ ì–´ë–¤ ê´€ê³„ê°€ ìˆëŠ”ì§€ì— ëŒ€í•´ ë”ì´ìƒ ë‹¤ë¥¸ ê³³ì„ ì°¾ì„ í•„ìš”ê°€ ì—†ê²Œ ë˜ì—ˆë‹¤. ì½”ë“œë‚´ì— ì „ë¶€ í‘œí˜„ë˜ì–´ ìˆê³ , Enum ìƒìˆ˜ì—ê²Œ ì§ì ‘ ë¬¼ì–´ë³´ë©´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ","permalink":"https://youngeun-in.github.io/enum-usage-1/","tags":["enum"],"title":"Enum ì‚¬ìš© (ê°œë…)"},{"categories":["spring"],"contents":"@RequestBody  í´ë¼ì´ì–¸íŠ¸ê°€ bodyì— JSON ë˜ëŠ” XML í˜•íƒœë¡œ ê°’(ë³´í†µ ê°ì²´)ì„ ë‹´ì•„ ì „ì†¡í•˜ë©´, bodyì˜ ë‚´ìš©ì„ ë‹¤ì‹œ Java Object(ê°ì²´)ë¡œ ë³€í™˜í•´ì£¼ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤. ì´ ë°ì´í„°ëŠ” Springì—ì„œ ê´€ë¦¬í•˜ëŠ” MessageConverterë“¤ ì¤‘ í•˜ë‚˜ì¸ Jackson2HttpMessageConverterë¥¼ í†µí•´ Java ê°ì²´ë¡œ ë³€í™˜ëœë‹¤.  @Request Body ì‚¬ìš© ì‹œ DTOì— @NoArgsConstructorê°€ í•„ìš”í•œ ì´ìœ   RestControllerì—ì„œ @RequestBodyì˜ ë°”ì¸ë”©ì€ Jacksonë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ObjectMapperê°€ í•´ì¤€ë‹¤. ObjectMapperëŠ” @RequestBodyê°€ Propertyë¡œ êµ¬í˜„ë˜ì–´ ìˆê±°ë‚˜ ìƒì„±ì„ ìœ„ì„í•œ ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ ê¸°ë³¸ ìƒì„±ìë¡œ ìƒì„±í•œë‹¤. ë”°ë¼ì„œ ë‘ ìƒí™©ì´ ì•„ë‹ˆë¼ë©´ ê¸°ë³¸ ìƒì„±ìëŠ” ê¼­ í•„ìš”í•˜ë‹¤.  @Request Bodyì—ì„œëŠ” Setterê°€ í•„ìš”ì—†ëŠ” ì´ìœ  ObjectMapperëŠ” Setter ë˜ëŠ” Getterë¡œ DTOì˜ í•„ë“œë¥¼ ê°€ì ¸ì˜¨ë‹¤. ê·¸ë¦¬ê³  setterë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” reflectionì„ ì‚¬ìš©í•´ì„œ í•„ë“œ ê°’ë“¤ì„ ë„£ì–´ì¤€ë‹¤. @ModelAttribute  í´ë¼ì´ì–¸íŠ¸ê°€ ì „ì†¡í•˜ëŠ” HTTP parameter(URL ëì— ì¶”ê°€í•˜ëŠ” íŒŒë¼ë¯¸í„°), HTTP Body ë‚´ìš©ì„ 1:1ë¡œ ê°ì²´ì— ë°ì´í„°ë¥¼ ë°”ì¸ë”©í•œë‹¤. ê°ì²´ ë°”ì¸ë”© ì‹œ ë³„ë‹¤ë¥¸ ì„¤ì •ì´ ì—†ë‹¤ë©´ Spring ì—ì„œëŠ” WebDataBinderì˜ ê¸°ë³¸ ê°’ í• ë‹¹ ë°©ë²•ì¸ Java Bean ë°©ì‹ì„ ì‚¬ìš©í•˜ë‹ˆ Setterê°€ ì—†ìœ¼ë©´ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤. HTTP Body ë‚´ìš©ì€ multipart/form-data í˜•íƒœì´ë‹¤. ë”°ë¼ì„œ Form ì•ˆì— input ê°’ì„ ë‹´ì•„ ë³´ë‚¼ ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ëœë‹¤.  @RequestParam  HTTP ìš”ì²­ parameterë¥¼ ë³€ìˆ˜ë¡œ 1ëŒ€ 1ë¡œ Mapping í•´ì¤€ë‹¤. defaultëŠ” required = true ì´ë‹¤. ì˜ëª»ëœ íŒŒë¼ë¯¸í„°ê°’ì´ ë“¤ì–´ì˜¤ë©´ 400 BadRequestë¥¼ ë°œìƒì‹œí‚¨ë‹¤.  ì°¸ê³  https://parkadd.tistory.com/70 ","permalink":"https://youngeun-in.github.io/requestbody-modelattribute-requestparam-%EB%B9%84%EA%B5%90/","tags":["request-body","model-attribute","request-param"],"title":"RequestBody, ModelAttribute, RequestParam ë¹„êµ"},{"categories":["ML"],"contents":"Step Function í™œì„±í™” í•¨ìˆ˜ëŠ” ì‹ ê²½ë§ì˜ í–‰ë™ì„ ê²°ì •í•˜ëŠ” ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ê°€ì¥ ê°„ë‹¨í•œ í˜•íƒœì˜ í™œì„±í™” í•¨ìˆ˜ëŠ” ê³„ë‹¨ í•¨ìˆ˜(Step function) ë¼ê³  í•©ë‹ˆë‹¤. ê³„ë‹¨ í•¨ìˆ˜ëŠ” ì…ë ¥ê°’ì˜ í•©ì´ ì„ê³„ê°’ì„ ë„˜ìœ¼ë©´ $0$ ì„, ë„˜ì§€ ëª»í•˜ë©´ $1$ ì„ ì¶œë ¥í•˜ê²Œ ë©ë‹ˆë‹¤. ê³„ë‹¨ í•¨ìˆ˜ì˜ ê·¸ë˜í”„ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ìƒê²¼ìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ ì¶œì²˜ : wikipedia - Heaviside step function ê³„ë‹¨ í•¨ìˆ˜ëŠ” í™œì„±í™” í•¨ìˆ˜ì˜ ì¡°ê±´ì„ ê°€ì¥ ì˜ ë§Œì¡±í•˜ëŠ” í•¨ìˆ˜ì´ê³  ì§ê´€ì ìœ¼ë¡œë„ ì´í•´í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë¶ˆì—°ì† í•¨ìˆ˜ë¼ëŠ” ë‹¨ì  ë•Œë¬¸ì— ì‹¤ì œ ì‹ ê²½ë§ì— ì‚¬ìš©ë˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ê·¸ë˜í”„ë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆë“¯ ì„ê³„ê°’ ì§€ì ì—ì„œ ë¶ˆì—°ì†ì ì„ ê°–ê²Œ ë˜ëŠ”ë° ì´ ì ì—ì„œ ë¯¸ë¶„ì´ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— í•™ìŠµì´ í•„ìš”í•œ ì‹ ê²½ë§ì— ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ëŸ° ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë“±ì¥í•œ ê²ƒì´ ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜(Sigmoid) ì…ë‹ˆë‹¤. Sigmoid Function ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ $S$ ëª¨ì–‘ì„ ê·¸ë¦¬ëŠ” ê³¡ì„  í•¨ìˆ˜ë¥¼ í†µì¹­í•˜ì—¬ ë¶€ë¥´ëŠ” ë§ì…ë‹ˆë‹¤. ì´ ì¤‘ ëŒ€í‘œì ì¸ í•¨ìˆ˜ëŠ” ë¡œì§€ìŠ¤í‹±(Logistic) í•¨ìˆ˜ì™€ í•˜ì´í¼íƒ„ì  íŠ¸(Hyper tangent, $\\tanh$) í•¨ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤. ë‘ í•¨ìˆ˜ì˜ ìˆ˜ì‹ê³¼ ê·¸ë˜í”„ë¥¼ ë³´ë©° ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ì™€ ê³„ë‹¨ í•¨ìˆ˜ê°€ ë‹¤ë¥¸ ì ì´ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ë¡œì§€ìŠ¤í‹± í•¨ìˆ˜(Logistic Function) $$ \\text{Logistic} : \\frac{1}{1+e^{-x}} $$ ì´ë¯¸ì§€ ì¶œì²˜ : wikipedia - Logistic function í•˜ì´í¼íƒ„ì  íŠ¸ í•¨ìˆ˜(Hypertangent Function) $$ \\text{Hypertangent} : \\frac{e^x-e^{-x}}{e^x+e^{-x}} = \\frac{e^{2x}-1}{e^{2x}+1} $$ ì´ë¯¸ì§€ ì¶œì²˜ : mathworld.wolfram.com ë‘ í•¨ìˆ˜ëŠ” ëª¨ë‘ ì—°ì†í•¨ìˆ˜ì…ë‹ˆë‹¤. ê³„ë‹¨ í•¨ìˆ˜ì˜ ì¹˜ëª…ì ì¸ ë‹¨ì ì´ì—ˆë˜ ë¶ˆì—°ì†ì„ í•´ê²°í–ˆì§€ìš”. ê³„ë‹¨ í•¨ìˆ˜ì™€ ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ì˜ ì¤‘ìš”í•œ ê³µí†µì ì€ ë¹„ì„ í˜• í•¨ìˆ˜(Non-linear) ë¼ëŠ” ì ì…ë‹ˆë‹¤. í™œì„±í™” í•¨ìˆ˜ëŠ” ë¹„ì„ í˜• í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. í™œì„±í™” í•¨ìˆ˜ê°€ ì„ í˜• í•¨ìˆ˜ì´ë©´ ì•ˆë˜ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”? ì„ í˜•ì¸ í™œì„±í™” í•¨ìˆ˜ $l(x) = ax + b$ ê°€ ìˆë‹¤ê³  í•´ë³´ê² ìŠµë‹ˆë‹¤. ì´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ 3ê°œì˜ ì¸µì„ ìŒ“ëŠ”ë‹¤ë©´ ìµœì¢…ì ì¸ í™œì„±í™” í•¨ìˆ˜ëŠ” $l(l(l(x))) = l^3(x) = a(a(ax+b)+b)+b = a^3x+a^2b+ab+b$ê°€ ë©ë‹ˆë‹¤. $a^3 = c, d = a^2b+ab+b$ë¼ê³  í•˜ë©´ $l^3(x) = cx+d$ë¡œ ì—¬ì „íˆ ê°™ì€ í˜•íƒœì˜ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ë ‡ë“¯ ì¸µì„ ì•„ë¬´ë¦¬ ê¹Šê²Œ ìŒ“ì•„ë„ ì—¬ëŸ¬ ì¸µì„ ìŒ“ëŠ” ì´ì ì„ ì‚´ë¦¬ì§€ ëª»í•˜ê²Œ ë˜ì§€ìš”. ì—¬ëŸ¬ ì¸µì„ ìŒ“ì„ ë•Œì˜ ì¥ì ì„ ì‚´ë¦¬ê¸° ìœ„í•´ ë¹„ì„ í˜• í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ” ê²ƒì´ì§€ìš”. ReLU Function ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ëŠ” ë¶ˆì—°ì†ì´ë¼ëŠ” ê³„ë‹¨ í•¨ìˆ˜ì˜ ë‹¨ì ì„ í•´ê²°í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹œê·¸ëª¨ì´ë“œëŠ” ëŒ€ë¶€ë¶„ì˜ ì ì—ì„œ ê¸°ìš¸ê¸° ê°’ì´ 0ì´ ë©ë‹ˆë‹¤. ì´ ë•Œë¬¸ì— **ê¸°ìš¸ê¸° ì†Œì‹¤(Gradient vanishing)**ì´ë¼ëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤. ê¸°ìš¸ê¸° ì†Œì‹¤ì€ ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ë¥¼ í™œì„±í™” í•¨ìˆ˜ë¡œ ì‚¬ìš©í•˜ì—¬ ì¸µì„ ê¹Šê²Œ ìŒ“ì•˜ì„ ë•Œ í•™ìŠµì´ ì˜ ë˜ì§€ ì•ŠëŠ” í˜„ìƒì…ë‹ˆë‹¤. ì´ëŸ° í˜„ìƒì´ ì™œ ë°œìƒí•˜ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. ë¡œì§€ìŠ¤í‹± í•¨ìˆ˜ $L(x)$ë¥¼ ë¯¸ë¶„í•œ í•¨ìˆ˜ $L^\\prime(x)$ ì˜ ìˆ˜ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. $$ L^\\prime(x) = \\bigg(\\frac{1}{1+e^{-x}}\\bigg)^\\prime = \\frac{e^x}{(1+e^{-x})^2} $$ ìœ„ í•¨ìˆ˜ì˜ ê·¸ë˜í”„ëŠ” ì•„ë˜ì™€ ê°™ì´ ìƒê²¼ìŠµë‹ˆë‹¤. ê·¸ë˜í”„ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ ìµœëŒ“ê°’ì´ $0.25$ ë°–ì— ë˜ì§€ ì•Šê³  $x\u0026lt;-5, x\u0026gt;5$ ë²”ìœ„ì—ì„œëŠ” ê±°ì˜ $0$ ì— ê°€ê¹ìŠµë‹ˆë‹¤. ì—­ì „íŒŒ(Back propagation) ê³¼ì •ì—ì„œëŠ” ë¯¸ë¶„ê°’ì„ ì‚¬ìš©í•˜ì—¬ í•™ìŠµì„ í•˜ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ê°’ì´ 0ì— ê°€ê¹Œì›Œ ì§€ë©´ ì •ë³´ê°€ ìœ ì‹¤ë˜ë©´ì„œ í•™ìŠµì´ ì˜ ì•ˆë˜ê²Œ ë©ë‹ˆë‹¤. íŠ¹íˆ ì¸µì„ ê¹Šê²Œ ìŒ“ì„ ê²½ìš°ì—ëŠ” ì •ë³´ê°€ ëª¨ë‘ ìœ ì‹¤ë˜ëŠ” ì‚¬íƒœê°€ ë°œìƒí•˜ê²Œ ë˜ì§€ìš”. ê·¸ë ‡ë‹¤ë©´ í•˜ì´í¼íƒ„ì  íŠ¸ í•¨ìˆ˜ëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”? í•˜ì´í¼íƒ„ì  íŠ¸ í•¨ìˆ˜ $\\tanh$ë¥¼ ë¯¸ë¶„í•œ í•¨ìˆ˜ì˜ ìˆ˜ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. $$ \\tanh^\\prime(x) = \\bigg(\\frac{e^x-e^{-x}}{e^x+e^{-x}}\\bigg)^\\prime = \\frac{4e^{2x}}{(1+e^{2x})^2} $$ ìœ„ í•¨ìˆ˜ì˜ ê·¸ë˜í”„ëŠ” ì•„ë˜ì™€ ê°™ì´ ìƒê²¼ìŠµë‹ˆë‹¤. í•˜ì´í¼íƒ„ì  íŠ¸ í•¨ìˆ˜ë¥¼ ë¯¸ë¶„í•œ í•¨ìˆ˜ì˜ ìµœëŒ“ê°’ì€ $1$ ì…ë‹ˆë‹¤. ìµœëŒ“ê°’ì´ $0.25$ ë°–ì— ì•ˆë˜ì—ˆë˜ ë¡œì§€ìŠ¤í‹± í•¨ìˆ˜ ë³´ë‹¤ëŠ” ì •ë³´ë¥¼ ì˜ ì „ë‹¬í•˜ê²Œ ë˜ì§€ìš”. í•˜ì§€ë§Œ ì—¬ì „íˆ $x$ ê°€ 0ì—ì„œ ë©€ì–´ì§ˆìˆ˜ë¡ ì›ë˜ í•¨ìˆ˜ì˜ ë¯¸ë¶„ê°’ì€ 0ì— ê°€ê¹Œì›Œì§‘ë‹ˆë‹¤. ê·¸ë˜ì„œ í•˜ì´í¼íƒ„ì  íŠ¸ í•¨ìˆ˜ë¥¼ í™œì„±í™” í•¨ìˆ˜ë¡œ í•˜ë”ë¼ë„ í¼ì…‰íŠ¸ë¡ ì„ ì—¬ëŸ¬ ì¸µìœ¼ë¡œ ìŒ“ëŠ”ë‹¤ë©´ í•™ìŠµì´ ì œëŒ€ë¡œ ì•ˆë˜ê²Œ ë˜ì§€ìš”. ì´ë ‡ê²Œ ì‹œê·¸ëª¨ì´ë“œ í•¨ìˆ˜ë¥¼ í™œì„±í™” í•¨ìˆ˜ë¡œ ì‚¬ìš©í•  ë•Œ ì—­ì „íŒŒì‹œ í•™ìŠµì´ ì œëŒ€ë¡œ ì§„í–‰ë˜ì§€ ì•ŠëŠ” í˜„ìƒì„ ê¸°ìš¸ê¸° ì†Œì‹¤ì´ë¼ê³  í•©ë‹ˆë‹¤. ê¸°ìš¸ê¸° ì†Œì‹¤ ë¬¸ì œë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ì„œ ë“±ì¥í•œ í•¨ìˆ˜ê°€ ë°”ë¡œ ReLU(Rectified Linear Unit)í•¨ìˆ˜ì…ë‹ˆë‹¤. ReLUí•¨ìˆ˜ëŠ” ì…ë ¥ê°’ì´ 0ë³´ë‹¤ ì‘ì„ ê²½ìš°ì—ëŠ” 0ì„ ë°˜í™˜í•˜ê³ , 0ë³´ë‹¤ í´ ê²½ìš°ì—ëŠ” ì…ë ¥ê°’ì„ ê·¸ëŒ€ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. ì•„ë˜ëŠ” ReLUí•¨ìˆ˜ì˜ ê·¸ë˜í”„ë¥¼ ë‚˜íƒ€ë‚¸ ê²ƒì…ë‹ˆë‹¤. ì´ë¯¸ì§€ ì¶œì²˜ : medium.com ReLUí•¨ìˆ˜ëŠ” $x$ ê°€ $0$ ë³´ë‹¤ í´ ë•Œ, ë¯¸ë¶„ê°’ì´ í•­ìƒ $1$ ì…ë‹ˆë‹¤. ê·¸ë˜ì„œ ì¸µì´ ì•„ë¬´ë¦¬ ê¹Šì–´ì ¸ë„ ì†ì‹¤ì—†ì´ ì •ë³´ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¯¸ë¶„ê°’ì´ í•­ìƒ $0$ê³¼ $1$ ì´ê¸° ë•Œë¬¸ì— ì—°ì‚°ì´ ë¹ ë¥´ë‹¤ëŠ” ì ë„ ReLUí•¨ìˆ˜ì˜ ì¥ì ì…ë‹ˆë‹¤. ë•ë¶„ì— ReLUí•¨ìˆ˜ëŠ” ì€ë‹‰ì¸µì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” í™œì„±í™” í•¨ìˆ˜ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ë¬¼ë¡  ReLUí•¨ìˆ˜ì—ê²Œë„ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. 0ì´í•˜ì˜ ê°’ì´ ê·¸ëŒ€ë¡œ ë³´ì¡´ë˜ì§€ ì•Šê³  ë²„ë ¤ì§„ë‹¤ëŠ” ê²ƒì´ì§€ìš”. ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ Leaky ReLUí•¨ìˆ˜ê°€ ê³ ì•ˆë˜ì–´ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œëŠ” $a=0.01$ì„ ì‚¬ìš©í•˜ë©° ê·¸ë˜í”„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ ì¶œì²˜ : medium.com ","permalink":"https://youngeun-in.github.io/%ED%99%9C%EC%84%B1%ED%99%94-%ED%95%A8%EC%88%98/","tags":["step-function","sigmoid","relu"],"title":"í™œì„±í™” í•¨ìˆ˜"},{"categories":["web"],"contents":"Originì˜ ì˜ë¯¸ Originì€ URLì—ì„œ í”„ë¡œí† ì½œ, ë„ë©”ì¸, í¬íŠ¸ ë²ˆí˜¸ë¥¼ í•©ì¹œ ë¶€ë¶„ì„ ì˜ë¯¸í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ URLì´ https://youngeun-in.github.io/posts/ ì¼ ë•Œ, ë„ë©”ì¸ì€ https://youngeun-in.github.io:80 ì´ë‹¤. SOP SOP(Same Origin Policy)ëŠ” ë‹¤ë¥¸ Originìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ì—†ë„ë¡ ê¸ˆì§€í•˜ëŠ” ë¸Œë¼ìš°ì €ì˜ ê¸°ë³¸ì ì¸ ë³´ì•ˆ ì •ì±…ì´ë‹¤. ì¦‰, ë™ì¼í•œ Originìœ¼ë¡œë§Œ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒì´ë‹¤. ì‹¤ì œë¡œ ì•„ì£¼ ì˜›ë‚ ì—ëŠ” ì´ê²ƒì´ ì ˆëŒ€ì ì¸ ê·œì¹™ì´ì—ˆê¸° ë•Œë¬¸ì—, ë‹¤ë¥¸ Originìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê±´ ì• ì´ˆì— ë¶ˆê°€ëŠ¥í•˜ì˜€ë‹¤. ê·¸ëŸ¬ë‚˜ ê¸°ìˆ ì´ ë°œë‹¬í•˜ë©´ì„œ ì„œë¡œ ë‹¤ë¥¸ Originë¼ë¦¬ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì•„ì•¼ í•˜ëŠ” ì¼ì´ ë§ì•„ì¡Œê³ , ì´ë¡œ ì¸í•´ SOPëŠ” ë³„ë„ì˜ ì˜ˆì™¸ ì‚¬í•­ì„ ë‘ê²Œ ë˜ì—ˆë‹¤. ì¦‰, ëª‡ ê°€ì§€ ì˜ˆì™¸ ìƒí™©ì— ëŒ€í•´ì„œëŠ” ë‹¤ë¥¸ Originìœ¼ë¡œë„ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒì´ë‹¤. RFC 6454ì—ì„œëŠ” ê·¸ëŸ¬í•œ ì˜ˆì™¸ ìƒí™©ì„ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•˜ê³  ìˆë‹¤.  Generally, reading information from another origin is forbidden. However, an origin is permitted to use some kinds of resources retrieved from other origins. For example, an origin is permitted to execute script, render images, and apply style sheets from any origin. Likewise, an origin can display content from another origin, such as an HTML document in an HTML frame. Network resources can also opt into letting other origins read their information, for example, using Cross-Origin Resource Sharing.  í•´ì„í•´ë³´ë©´, ë‹¤ìŒê³¼ ê°™ë‹¤.  \u0026lt;script\u0026gt; íƒœê·¸ë¡œ JavaScriptë¥¼ ì‹¤í–‰í•˜ëŠ” ê²½ìš°, ì´ë¯¸ì§€ë¥¼ ë Œë”ë§ í•˜ëŠ” ê²½ìš° \u0026lt;link\u0026gt; íƒœê·¸ë¡œ ìŠ¤íƒ€ì¼ ì‹œíŠ¸ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê²½ìš° HTML ë¬¸ì„œë¥¼ í™”ë©´ì— ë³´ì—¬ì£¼ëŠ” ê²½ìš° CORS ì •ì±…ì„ ì§€í‚¤ëŠ” ìš”ì²­ì˜ ê²½ìš°  CORS RFC 6454 ë¬¸ì„œì—ì„œëŠ” SOPì˜ CORS ì •ì±…ì„ ì§€í‚¤ëŠ” ìš”ì²­ì˜ ê²½ìš°ë¥¼ SOPì˜ ì˜ˆì™¸ì‚¬í•­ìœ¼ë¡œ ì •í•˜ê³  ìˆë‹¤. ì¦‰ CORS(Cross Origin Resource Sharing)ëŠ” ë‹¤ë¥¸ Originìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ê¸° ìœ„í•´ ì§€ì¼œì•¼ í•˜ëŠ” ì •ì±…ìœ¼ë¡œ, ì›ë˜ëŒ€ë¡œë¼ë©´ SOPì— ì˜í•´ ë§‰íˆê²Œ ë  ìš”ì²­ì„ í’€ì–´ì£¼ëŠ” ì •ì±…ì´ë‹¤. ì—¬ê¸°ì„œ ì£¼ëª©í•  ë§Œí•œ ì ì€, CORSëŠ” \u0026lsquo;ë¸Œë¼ìš°ì €\u0026rsquo;ì˜ ì •ì±…ì´ë¼ëŠ” ê²ƒì´ë‹¤. ì¦‰, ì„œë²„ëŠ” í‰ì†Œì²˜ëŸ¼ ìš”ì²­ì´ ì˜¤ë©´ ì‘ë‹µì„ í•´ì¤„ ë¿ì´ê³ , ë¸Œë¼ìš°ì €ê°€ ìì‹ ì´ ë³´ë‚¸ ìš”ì²­ ë° ì„œë²„ë¡œë¶€í„° ë°›ì€ ì‘ë‹µì˜ ë°ì´í„°ê°€ CORS ì •ì±…ì„ ì§€í‚¤ëŠ”ì§€ ê²€ì‚¬í•˜ì—¬ ì•ˆì „í•œ ìš”ì²­ì„ ë³´ë‚¸ ê±´ì§€ ê²€ì‚¬í•˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µì„ í•´ì¤¬ë”ë¼ë„, ì•Œê³  ë³´ë‹ˆ ì•ˆì „í•œ ìš”ì²­ì´ ì•„ë‹ˆë¼ê³  íŒë‹¨ë˜ë©´ í•´ë‹¹ ì‘ë‹µì„ ë²„ë¦°ë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì„œë²„ ê°„ í†µì‹ ì—ì„œëŠ” ì´ëŸ¬í•œ ì •ì±…ì´ ì „í˜€ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì°¸ê³ ë¡œ, ìœ„ì—ì„œ ì–¸ê¸‰í•œ ì˜ˆì™¸ ìƒí™© ì¤‘ CORS ìš”ì²­ì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ê²½ìš°ëŠ” ìš”ì²­ ì‹œ Sec-Fetch-Mode í—¤ë”ì˜ ê°’ì„ no-corsë¡œ ì„¤ì •í•œë‹¤. ì´ëŠ” ì„œë²„ê°€ ë³´ë‚´ì¤€ ì‘ë‹µì— ëŒ€í•´ CORS ì •ì±…ì„ ê²€ì‚¬í•˜ì§€ ì•Šê²Œ í•˜ëŠ” ëŒ€ì‹ , í•´ë‹¹ ì‘ë‹µì„ JavaScript ë‹¨ì—ì„œ ì½ì„ ìˆ˜ ì—†ë„ë¡ í•œë‹¤. CORSì˜ í•„ìš”ì„± CORSëŠ” CSRF ê³µê²©ì„ ë§‰ëŠ”ë‹¤. CSRF ê³µê²©ì˜ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. ì•…ì˜ì ì¸ ë§ˆìŒì„ í’ˆì€ í•´ì»¤ê°€ ìì‹ ì˜ ì›¹ì‚¬ì´íŠ¸ë¥¼ êµ¬ì¶•í•´ë†“ê³ , ì´ ì›¹ì‚¬ì´íŠ¸ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë§í¬ë¥¼ ë‹´ì€ ë©”ì¼ì„ ì‚¬ìš©ìì—ê²Œ ë³´ë‚´ëŠ” ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì´ ì‚¬ìš©ìëŠ” Aë¼ëŠ” ì›¹ì‚¬ì´íŠ¸ì— ë¡œê·¸ì¸ì´ ë˜ì–´ ìˆì–´ì„œ ë¸Œë¼ìš°ì € ë‹¨ì— ì¸ì¦ ì •ë³´ê°€ ì¡´ì¬í•œë‹¤ê³  í•´ë³´ì. ë§Œì•½ ê·¸ ì‚¬ìš©ìê°€ ì‹¤ìˆ˜ë¡œ í•´ë‹¹ ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ í•´ì»¤ì˜ ì›¹ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ë©´, í•´ì»¤ê°€ ì‹¬ì–´ë‘” JavaScript ì½”ë“œê°€ ì‹¤í–‰ë˜ì–´ ìê¸°ë„ ëª¨ë¥´ê²Œ A ì›¹ì‚¬ì´íŠ¸ë¡œ ê°œì¸ ì •ë³´ë¥¼ ì¡°íšŒí•˜ëŠ” API ìš”ì²­ì„ ë³´ë‚¼ ê²ƒì´ë‹¤. ì´ ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì € ë‹¨ì—ëŠ” ì¸ì¦ ì •ë³´ê°€ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì—, ì´ê²ƒì´ í•´ë‹¹ ìš”ì²­ì— í•¨ê»˜ ì‹¤ì–´ì„œ ì „ì†¡ë˜ë©´ ì„œë²„ëŠ” ì¸ì¦ëœ ìš”ì²­ì´ë¼ ìƒê°í•˜ì—¬ ê°œì¸ ì •ë³´ë¥¼ ì‘ë‹µí•´ì¤„ ê²ƒì´ë‹¤. ê·¸ëŸ¬ê³  ë‚˜ë©´ ê·¸ ê°œì¸ ì •ë³´ë¥¼ í•´ì»¤ê°€ ë¹¼ëŒë¦´ ìˆ˜ ìˆê²Œ ëœë‹¤. ë§Œì•½ ë‹¤ë¥¸ Originìœ¼ë¡œì˜ ìš”ì²­ì„ ë§‰ëŠ” ì •ì±…, ì¦‰ SOPê°€ ì¡´ì¬í•œë‹¤ë©´ ë¬¸ì œë¥¼ ì–´ëŠ ì •ë„ ì˜ˆë°©í•  ìˆ˜ ìˆë‹¤. í•´ì»¤ê°€ êµ¬ì¶•í•œ ì›¹ì‚¬ì´íŠ¸ì™€ A ì›¹ì‚¬ì´íŠ¸ëŠ” ë‹¹ì—°íˆ Originì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, í•´ì»¤ì˜ ì›¹ì‚¬ì´íŠ¸ì—ì„œ A ì›¹ì‚¬ì´íŠ¸ë¡œ API ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ SOPëŠ” ë¸Œë¼ìš°ì €ì˜ ì•„ì£¼ ê¸°ë³¸ì ì¸ ë³´ì•ˆ ì •ì±…ìœ¼ë¡œì„œ ê¸°ëŠ¥í•œë‹¤. CORS ë™ì‘ ì›ë¦¬ CORS ìš”ì²­ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„¸ ê°€ì§€ ìœ í˜•ìœ¼ë¡œ ë‚˜ëˆ ì„œ ìƒê°í•´ë³¼ ìˆ˜ ìˆë‹¤. ë‹¨ìˆœ ìš”ì²­ (Simple Request) ë‹¨ìˆœ ìš”ì²­ì´ ë˜ê¸° ìœ„í•œ ì¡°ê±´ì€ ëŒ€ëµ ë‹¤ìŒê³¼ ê°™ë‹¤.  ë©”ì†Œë“œê°€ GET, HEAD, POST ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•œë‹¤. User Agentê°€ ìë™ìœ¼ë¡œ ì„¤ì •í•œ í—¤ë”ë¥¼ ì œì™¸í•˜ë©´, ì•„ë˜ì™€ ê°™ì€ í—¤ë”ë“¤ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  Accept Accept-Language Content-Language Content-Type DPR Downlink (en-US) Save-Data Viewport-Width Width   Content-Type í—¤ë”ì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ê°’ë“¤ë§Œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.  application/x-www-form-urlencode multipart/form-data text/plain    ìœ„ì™€ ê°™ì€ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë‹¨ìˆœ ìš”ì²­ì€ ì•ˆì „í•œ ìš”ì²­ìœ¼ë¡œ ì·¨ê¸‰ë˜ì–´, ë‹¨ í•œ ë²ˆì˜ ìš”ì²­ë§Œì„ ì „ì†¡í•œë‹¤. ë¸Œë¼ìš°ì €ëŠ” ë‹¤ë¥¸ Originìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ Origin í—¤ë”ì— ìì‹ ì˜ Originì„ ì„¤ì •í•˜ê³ , ì„œë²„ë¡œë¶€í„° ì‘ë‹µì„ ë°›ìœ¼ë©´ ì‘ë‹µì˜ Allow-Control-Allow-Origin í—¤ë”ì— ì„¤ì •ëœ Originì˜ ëª©ë¡ì— ìš”ì²­ì˜ Origin í—¤ë” ê°’ì´ í¬í•¨ë˜ëŠ”ì§€ ê²€ì‚¬í•œë‹¤. CORSí—ˆìš©ì„ ìœ„í•´ì„œëŠ” ì„œë²„ì—ì„œ ì‘ë‹µì˜ Allow-Control-Allow-Origin í—¤ë”ì— í—ˆìš©ë˜ëŠ” Originì˜ ëª©ë¡ í˜¹ì€ ì™€ì¼ë“œì¹´ë“œ(*)ë¥¼ ì„¤ì •í•´ì£¼ë©´ ëœë‹¤. í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­ (Preflight Request) ë‹¨ìˆœ ìš”ì²­ì˜ ì¡°ê±´ì— ë²—ì–´ë‚˜ëŠ”(= ì•ˆì „í•˜ì§€ ì•Šì€) ìš”ì²­ì˜ ê²½ìš°, ì„œë²„ì— ì‹¤ì œ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì— ì˜ˆë¹„ ìš”ì²­ì— í•´ë‹¹í•˜ëŠ” í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­(Preflight Request)ì„ ë¨¼ì € ë³´ë‚´ì„œ ì‹¤ì œ ìš”ì²­ì´ ì „ì†¡í•˜ê¸°ì— ì•ˆì „í•œì§€ í™•ì¸í•œë‹¤. ë§Œì•½ ì•ˆì „í•œ ìš”ì²­ì´ë¼ê³  í™•ì¸ì´ ëœë‹¤ë©´, ê·¸ë•Œì„œì•¼ ì‹¤ì œ ìš”ì²­ì„ ì„œë²„ì—ê²Œ ë³´ë‚¸ë‹¤. ë”°ë¼ì„œ ì´ ë‘ ë²ˆì˜ ìš”ì²­ì„ ì „ì†¡í•œë‹¤. í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­ì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  ë©”ì†Œë“œë¡œ OPTIONSë¥¼ ì‚¬ìš©í•œë‹¤. Origin í—¤ë”ì— ìì‹ ì˜ Originì„ ì„¤ì •í•œë‹¤. Access-Control-Request-Method í—¤ë”ì— ì‹¤ì œ ìš”ì²­ì— ì‚¬ìš©í•  ë©”ì†Œë“œë¥¼ ì„¤ì •í•œë‹¤. Access-Control-Request-Headers í—¤ë”ì— ì‹¤ì œ ìš”ì²­ì— ì‚¬ìš©í•  í—¤ë”ë“¤ì„ ì„¤ì •í•œë‹¤.  ì„œë²„ëŠ” ì´ëŸ¬í•œ í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­ì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§„ ì‘ë‹µì„ ì œê³µí•´ì•¼ í•œë‹¤.  Access-Control-Allow-Origin í—¤ë”ì— í—ˆìš©ë˜ëŠ” Originë“¤ì˜ ëª©ë¡ í˜¹ì€ ì™€ì¼ë“œì¹´ë“œ(*)ë¥¼ ì„¤ì •í•œë‹¤. Access-Control-Allow-Methods í—¤ë”ì— í—ˆìš©ë˜ëŠ” ë©”ì†Œë“œë“¤ì˜ ëª©ë¡ í˜¹ì€ ì™€ì¼ë“œì¹´ë“œ(*)ë¥¼ ì„¤ì •í•œë‹¤. Access-Control-Allow-Headers í—¤ë”ì— í—ˆìš©ë˜ëŠ” í—¤ë”ë“¤ì˜ ëª©ë¡ í˜¹ì€ ì™€ì¼ë“œì¹´ë“œ(*)ë¥¼ ì„¤ì •í•œë‹¤. Access-Control-Max-Age í—¤ë”ì— í•´ë‹¹ í”„ë¦¬í”Œë¼ì´íŠ¸ ìš”ì²­ì´ ë¸Œë¼ìš°ì €ì— ìºì‹œ ë  ìˆ˜ ìˆëŠ” ì‹œê°„ì„ ì´ˆ ë‹¨ìœ„ë¡œ ì„¤ì •í•œë‹¤.  ì´ëŸ¬í•œ ì‘ë‹µì„ ë°›ê³  ë‚˜ë©´ ë¸Œë¼ìš°ì €ëŠ” ì´ ì‘ë‹µì˜ ì •ë³´ë¥¼ ìì‹ ì´ ì „ì†¡í•œ ìš”ì²­ì˜ ì •ë³´ì™€ ë¹„êµí•˜ì—¬ ì‹¤ì œ ìš”ì²­ì˜ ì•ˆì „ì„±ì„ ê²€ì‚¬í•œë‹¤. ë§Œì•½ ì´ ì•ˆì „ì„± ê²€ì‚¬ì— í†µê³¼í•˜ê²Œ ëœë‹¤ë©´, ê·¸ë•Œì„œì•¼ ì‹¤ì œ ìš”ì²­ì„ ì„œë²„ì—ê²Œ ë³´ë‚¸ë‹¤. ì¸ì¦ ì •ë³´ë¥¼ í¬í•¨í•œ ìš”ì²­ (Credentialed Request) ì¸ì¦ ì •ë³´(Credential)ë€ ì¿ í‚¤(Cookie) í˜¹ì€ Authorization í—¤ë”ì— ì„¤ì •í•˜ëŠ” í† í° ê°’ ë“±ì„ ì¼ì»«ëŠ”ë‹¤. ë§Œì•½ ì´ëŸ¬í•œ ì¸ì¦ ì •ë³´ë¥¼ í•¨ê»˜ ë³´ë‚´ì•¼ í•˜ëŠ” ìš”ì²­(Credentialed Request)ì´ë¼ë©´, ë³„ë„ë¡œ ë”°ë¼ì¤˜ì•¼ í•˜ëŠ” CORS ì •ì±…ì´ ì¡´ì¬í•œë‹¤. ì¿ í‚¤ ë“±ì˜ ì¸ì¦ ì •ë³´ë¥¼ ë³´ë‚´ê¸° ìœ„í•´ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œ ìš”ì²­ ì‹œ ë³„ë„ì˜ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤. ì´ëŠ” Ajax ìš”ì²­ì„ ìœ„í•´ ì–´ë– í•œ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠëƒì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤. ë§Œì•½ XMLHttpRequest, jQueryì˜ ajax, ë˜ëŠ” axiosë¥¼ ì‚¬ìš©í•œë‹¤ë©´ withCredentials ì˜µì…˜ì„ trueë¡œ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤. ë°˜ë©´, fetch APIë¥¼ ì‚¬ìš©í•œë‹¤ë©´ credentials ì˜µì…˜ì„ includeë¡œ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤. ì´ëŸ¬í•œ ë³„ë„ì˜ ì„¤ì •ì„ í•´ì£¼ì§€ ì•Šìœ¼ë©´ ì¿ í‚¤ ë“±ì˜ ì¸ì¦ ì •ë³´ëŠ” ì ˆëŒ€ë¡œ ìë™ìœ¼ë¡œ ì„œë²„ì—ê²Œ ì „ì†¡ë˜ì§€ ì•ŠëŠ”ë‹¤. ìœ„ì™€ ê°™ì€ ì„¤ì •ì„ í†µí•´ ì¸ì¦ ì •ë³´ë¥¼ ìš”ì²­ì— í¬í•¨ì‹œì¼°ë‹¤ë©´, ì´ ìš”ì²­ì€ ì´ì œ ì¸ì¦ ì •ë³´ë¥¼ í¬í•¨í•œ ìš”ì²­ì´ ëœë‹¤. ê·¸ë¦¬ê³  ì„œë²„ëŠ” ì´ëŸ¬í•œ ìš”ì²­ì— ëŒ€í•´ ì¼ë°˜ì ì¸ CORS ìš”ì²­ê³¼ëŠ” ë‹¤ë¥´ê²Œ ëŒ€ì‘í•´ì¤˜ì•¼ í•œë‹¤. ì‘ë‹µì˜ Allow-Control-Allow-Origin í—¤ë”ê°€ ì™€ì¼ë“œì¹´ë“œ(*)ê°€ ì•„ë‹Œ ë¶„ëª…í•œ Originìœ¼ë¡œ ì„¤ì •ë˜ì–´ì•¼ í•˜ê³ , Allow-Control-Allow-Credentials í—¤ë”ëŠ” trueë¡œ ì„¤ì •ë˜ì–´ì•¼ í•œë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë¸Œë¼ìš°ì €ì— ì˜í•´ ì‘ë‹µì´ ê±°ë¶€ëœë‹¤. ì¶œì²˜ https://it-eldorado.tistory.com/163 ","permalink":"https://youngeun-in.github.io/cors/","tags":["cors"],"title":"CORS"},{"categories":["web"],"contents":"ETagë€ ë¬´ì—‡ì¼ê¹Œ? ETag(entity tag)ëŠ” ì›¹ ì„œë²„ê°€ ì£¼ì–´ì§„ URLì˜ ì½˜í…ì¸ ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ ì•Œë ¤ì£¼ê³  ì´ë¥¼ ë°˜í™˜í•˜ëŠ” HTTP ì‘ë‹µ í—¤ë”ì´ë‹¤. ìºì‹œë¥¼ ì‚¬ìš©í•˜ë©´ ë¶ˆí•„ìš”í•œ ìš”ì²­ì„ ì¤„ì´ë©´ì„œ ì„œë²„ì˜ ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆê³ , ë¯¸ë¦¬ ìºì‹œì— ì €ì¥í•´ ë†“ì€ ê°’ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë¹ ë¥¸ ì‘ë‹µì„ í•  ìˆ˜ ìˆë‹¤. ETagëŠ” ì‚¬ìš©í•˜ëŠ” ìºì‹œê°€ ìœ íš¨í•œì§€ ê²€ì¦í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. Static file(js, css, image) ë¿ë§Œ ì•„ë‹ˆë¼ APIì™€ ê°™ì€ Dynamic contentì—ë„ ê°„ë‹¨í•˜ê²Œ Cacheê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê²Œ ì„¤ì •í•˜ë©´ APIì†ë„ë„ ì¦ê°€ë˜ê³  ìœ ì € ì…ì¥ì—ì„œëŠ” ë„¤íŠ¸ì› íŠ¸ë˜í”½ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤. APIì™€ ê°™ì´ ì–¸ì œ ë°”ë€”ì§€ ëª¨ë¥´ëŠ” ë°ì´í„°ì˜ CacheëŠ” ì‰½ì§€ ì•Šì€ë°, Etagë¥¼ ì´ìš©í•˜ë©´ ì„œë²„ì—ì„œ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë¨¼ì € í™•ì¸í•˜ê³  ì¤„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— APIì—ë„ ì¶©ë¶„íˆ ì ìš©ê°€ëŠ¥í•˜ë‹¤. ETagë¥¼ ì‚¬ìš©í•œ ìš”ì²­ê³¼ ì‘ë‹µ ì˜ˆì‹œ  í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.  1 2  curl -H \u0026#34;Accept: application/json\u0026#34; -i http://localhost:8080/spring-boot-rest/foos/1   ê·¸ëŸ¬ë©´ ì„œë²„ëŠ” ETagë¥¼ ì‘ë‹µ headerì— ë‹´ì•„ì„œ ë³´ë‚¸ë‹¤. 1 2 3 4  HTTP/1.1 200 OK ETag: \u0026#34;f88dd058fe004909615a64f01be66a7\u0026#34; Content-Type: application/json;charset=UTF-8 Content-Length: 52   í´ë¼ì´ì–¸íŠ¸ëŠ” ì¬ìš”ì²­í•  ë•Œ ETagë¥¼ headerì˜ If-None-Matchì— ë‹´ì•„ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. ì—¬ê¸°ì„œ If-None-MatchëŠ” ë­˜ê¹Œ? ETagë¥¼ ì‚¬ìš©í•  ë•Œ Conditional headersë¡œ If-None-Matchì™€ If-Matchê°€ ìˆë‹¤. ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. If-None-Match - í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìºì‹±ëœ ETagì™€ ì„œë²„ì˜ ETagê°€ ë‹¤ë¥¼ ë•Œ ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤. If-Match - í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìºì‹±ëœ ETagì™€ ì„œë²„ì˜ ETagê°€ ê°™ì„ ë•Œ ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” If-None-Matchí—¤ë”ë¥¼ í¬í•¨í•˜ì—¬ ì„œë²„ì— ìš”ì²­ì„ ë‹¤ì‹œ í•œë‹¤.  1 2 3  curl -H \u0026#34;Accept: application/json\u0026#34; -H \u0026#39;If-None-Match: \u0026#34;f88dd058fe004909615a64f01be66a7\u0026#34;\u0026#39; -i http://localhost:8080/spring-boot-rest/foos/1   ë¦¬ì†ŒìŠ¤ê°€ ë°”ë€Œì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì„œë²„ëŠ” 304 Not Modifiedë¥¼ ì‘ë‹µí•œë‹¤. ETagëŠ” ì´ì „ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µê³¼ ê°™ë‹¤. 1 2  HTTP/1.1 304 Not Modified ETag: \u0026#34;f88dd058fe004909615a64f01be66a7\u0026#34;    í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì— ëŒ€í•´ ë‹¤ë¥¸ ì‘ë‹µì„ í•˜ë„ë¡ ì„œë²„ì˜ ë°ì´í„°ë¥¼ ë°”ê¾¼ë‹¤.   í´ë¼ì´ì–¸íŠ¸ëŠ” ê°™ì€ ìš”ì²­ì„ ë‹¤ì‹œ í•œë‹¤. ìš”ì²­ì„ ë‹¤ì‹œ í•  ë•ŒëŠ” ë§ˆì§€ë§‰ìœ¼ë¡œ ê°€ì§€ê³  ìˆë˜ ETagë¥¼ ë‹´ì•„ì„œ ë³´ë‚¼ ê²ƒì´ë‹¤.   1 2 3  curl -H \u0026#34;Accept: application/json\u0026#34; -H \u0026#39;If-None-Match: \u0026#34;f88dd058fe004909615a64f01be66a7\u0026#34;\u0026#39; -i http://localhost:8080/spring-boot-rest/foos/1   í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë³´ë‚¸ ETagì™€ ì„œë²„ì˜ ETagê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤. ë¦¬ì†ŒìŠ¤ê°€ ë°”ë€Œì—ˆìœ¼ë‹ˆ ìƒˆë¡œìš´ ETagë¥¼ headerì— ë‹´ì•„ ë³´ë‚¸ë‹¤. ìƒˆë¡œìš´ ìš”ì²­ì„ ì²˜ë¦¬í–ˆê¸° ë•Œë¬¸ì— ì„œë²„ëŠ” 200 OKë¥¼ ì‘ë‹µí•œë‹¤. 1 2 3 4  HTTP/1.1 200 OK ETag: \u0026#34;03cb37ca667706c68c0aad4cb04c3a211\u0026#34; Content-Type: application/json;charset=UTF-8 Content-Length: 56   ETagë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ API vs ì‚¬ìš©í•œ API ETag ì‚¬ìš© ì˜ˆì‹œì™€ ETagë¥¼ ì‚¬ìš©í•œ APIì™€ ì‚¬ìš©í•˜ì§€ ì•Šì€ APIë¥¼ ë¹„êµë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ê°„ë‹¨í•˜ê²Œ Controllerë¥¼ ì‘ì„±í•´ ë³´ì•˜ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  @RequestMapping(\u0026#34;/posts\u0026#34;) @RestController public class PostController { // ...  @GetMapping(\u0026#34;/no-etag\u0026#34;) public ResponseEntity\u0026lt;List\u0026lt;PostResponse\u0026gt;\u0026gt; findAllWhenNoETag() { return ResponseEntity.ok().body(postService.findAll()); } @GetMapping(\u0026#34;/etag\u0026#34;) public ResponseEntity\u0026lt;List\u0026lt;PostResponse\u0026gt;\u0026gt; findAllWhenETag() { return ResponseEntity.ok().body(postService.findAll()); } // ... }   ê·¸ë¦¬ê³  ETag ì„¤ì •ìœ¼ë¡œ ShallowEtagHeaderFilterë¥¼ Beanìœ¼ë¡œ ë“±ë¡í•´ì¤€ë‹¤. 1 2 3 4 5 6 7 8  @Configuration public class ETagHeaderFilter { @Bean public ShallowEtagHeaderFilter shallowEtagHeaderFilter() { return new ShallowEtagHeaderFilter(); } }   ì¶”ê°€ í•„í„°ë¥¼ êµ¬ì„±í•  í•„ìš” ì—†ë‹¤ë©´ ìœ„ì˜ ì½”ë“œì™€ ê°™ì´ ì‘ì„±í•´ë„ ëœë‹¤. í•˜ì§€ë§Œ ETagë¥¼ ì‚¬ìš©í•œ APIì™€ ì‚¬ìš©í•˜ì§€ ì•Šì€ APIë¥¼ ë¹„êµí•˜ê¸° ìœ„í•´ í•„í„°ë¥¼ ì‚¬ìš©í–ˆë‹¤. ì¶”ê°€ í•„í„° êµ¬ì„±ì„ í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•´ì£¼ë©´ ëœë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12  @Configuration public class ETagHeaderFilter { @Bean public FilterRegistrationBean\u0026lt;ShallowEtagHeaderFilter\u0026gt; shallowEtagHeaderFilter() { FilterRegistrationBean\u0026lt;ShallowEtagHeaderFilter\u0026gt; filterRegistrationBean = new FilterRegistrationBean\u0026lt;\u0026gt;( new ShallowEtagHeaderFilter()); filterRegistrationBean.addUrlPatterns(\u0026#34;/posts/etag\u0026#34;); filterRegistrationBean.setName(\u0026#34;PostAPIFilter\u0026#34;); return filterRegistrationBean; } }   í˜„ì¬ PostControllerì—ì„œ /posts/etagë§Œ etagë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ì„¤ì •ì´ë‹¤. ë§Œì•½ /post/ì— ëŒ€í•´ ì „ë¶€ ETagë¥¼ ì„¤ì •í•˜ê³  ì‹¶ë‹¤ë©´ filterRegistrationBean.addUrlPatterns(\u0026quot;/posts/*\u0026quot;) ì´ë ‡ê²Œ ì„¤ì •í•˜ë©´ ëœë‹¤. ê·¸ëŸ¼ ì´ì œ /no-etagì™€ /etagë¥¼ í˜¸ì¶œí•´ ë³´ì. ì–¼í• ë³´ë©´ ë‘˜ì˜ ì°¨ì´ê°€ ì•ˆ ë³´ì¸ë‹¤. í•˜ì§€ë§Œ Response Headersë¥¼ ë³´ë©´ ì°¨ì´ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. ë‘ ì‘ë‹µì˜ ì°¨ì´ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ê³³ì€ ETagì¼ ê²ƒì´ë‹¤. /etagëŠ” ETagë¥¼ ì‚¬ìš©í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì‘ë‹µìœ¼ë¡œ ETagë¥¼ headerì— í•´ì‹œê°’ìœ¼ë¡œ ë³´ë‚´ì¤€ë‹¤. ì´ëŠ” ì¬ìš”ì²­í•  ë•Œ headerì˜ If-None-Matchì˜ ê°’ìœ¼ë¡œ ë³´ë‚´ ì¤„ ê²ƒì´ë‹¤. 1  If-None-Match: \u0026#34;0fad8e1b47f45fa4ce7fef400e87c9289\u0026#34;   ì´ë ‡ê²Œ ETagë¥¼ /etag ìš”ì²­ headerì˜ If-None-Matchì— ë‹´ì•„ ì¬ìš”ì²­í•´ ë³´ê² ë‹¤. etagë¥¼ ë³´ë©´ ì•ì„œ ì„¤ëª…í–ˆë“¯ì´ ê°™ì€ ìš”ì²­ì— ëŒ€í•´ì„œ 304 ìƒíƒœ ì½”ë“œë¥¼ ì‘ë‹µí•œë‹¤. ì´ëŠ” ì„œë²„ì—ì„œ ìºì‹œ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•œ ê²°ê³¼ ë³€ê²½ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ë‹¤. ì—¬ê¸°ì„œ ë´ì•¼ í•  ê²ƒì€ ì‚¬ì´ì¦ˆë‹¤. no-etagëŠ” ì¬ìš”ì²­ì— ëŒ€í•´ì„œ 796B -\u0026gt; 796Bì¸ ë°˜ë©´ì— etagëŠ” 820B -\u0026gt; 145Bì´ë‹¤. ì´ìœ ëŠ” ETagë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ í–ˆë˜ ì¼ì„ ë˜‘ê°™ì´ ë˜ í•˜ì§€ë§Œ, ETagë¥¼ ì‚¬ìš©í•˜ë©´ ê°™ì€ ìš”ì²­ì— ëŒ€í•´ì„œ ë³€ê²½ëœ ë¦¬ì†ŒìŠ¤ê°€ ì—†ë‹¤ë©´ 304 ìƒíƒœ ì½”ë“œì™€ ETagë¥¼ headerì— ë‹´ì•„ ë³´ë‚´ì¤„ ë¿ ìš”ì²­ì— ëŒ€í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ë˜ ë³´ë‚´ì§€ ì•ŠëŠ”ë‹¤. ì°¸ê³  https://tecoble.techcourse.co.kr/post/2020-09-30-ETag-with-Spring/ ","permalink":"https://youngeun-in.github.io/etag/","tags":["http-cache","etag"],"title":"Etag"},{"categories":["spring"],"contents":"Spring mocking ì—†ì´ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´? ì•„ë˜ ì½”ë“œë¥¼ mocking ì—†ì´ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ? 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  package com.example.demo; import org.kohsuke.github.GHIssueState; import org.kohsuke.github.GHRepository; import org.kohsuke.github.GitHub; import java.io.IOException; public class RepositoryRank { public int getPoint(String repositoryName) throws IOException { GitHub github = GitHub.connect(); GHRepository repository = github.getRepository(repositoryName); int points = 0; if (repository.hasIssues()) { points += 1; } if (repository.getPullRequests(GHIssueState.CLOSED).size() \u0026gt; 0) { points += 1; } points += repository.getStargazersCount(); points += repository.getForksCount(); return points; } public static void main(String[] args) throws IOException { RepositoryRank repositoryRank = new RepositoryRank(); int point = repositoryRank.getPoint(\u0026#34;whiteship/live-study\u0026#34;); System.out.println(point); } }   Repository ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„± ì‹œì— ì™¸ë¶€ì—ì„œ ìƒì„±í•œ GitHubService ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì£¼ì…í•˜ë©´ ëœë‹¤. ì„¤ëª…ê³¼ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58  package com.example.demo; import org.kohsuke.github.GHIssueState; import org.kohsuke.github.GHRepository; import org.kohsuke.github.GitHub; import org.kohsuke.github.GitHubBuilder; import java.io.IOException; public class RepositoryRank { //ì¸í„°í˜ì´ìŠ¤ ì„ ì–¸  interface GitHubService { GitHub connect() throws IOException; } //ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ ìƒì„±í•˜ê³  ëª¨í‚¹í•˜ê³ ì í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•œë‹¤.  static class DefaultGitHubService implements GitHubService { @Override public GitHub connect() throws IOException { return new GitHubBuilder().build(); } } private final GitHubService gitHubService; //ì„œë¹„ìŠ¤ë¥¼ ì£¼ì…ë°›ëŠ”ë‹¤.  public RepositoryRank(GitHubService gitHubService) { this.gitHubService = gitHubService; } public int getPoint(String repositoryName) throws IOException { GitHub github = gitHubService.connect(); GHRepository repository = github.getRepository(repositoryName); int points = 0; if (repository.hasIssues()) { points += 1; } if (repository.getPullRequests(GHIssueState.CLOSED).size() \u0026gt; 0) { points += 1; } points += repository.getStargazersCount(); points += repository.getForksCount(); return points; } public void main(String[] args) throws IOException { GitHubService gitHubService = new DefaultGitHubService(); //Repository ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„± ì‹œì— ì™¸ë¶€ì—ì„œ ìƒì„±í•œ GitHubService ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì£¼ì…  RepositoryRank repositoryRank = new RepositoryRank(gitHubService); int point = repositoryRank.getPoint(\u0026#34;whiteship/live-study\u0026#34;); System.out.println(point); } }   ì°¸ê³  ë°±ê¸°ì„ ë‹˜ì˜ ìœ íŠœë¸Œë¥¼ ì°¸ê³ í–ˆë‹¤. https://youtu.be/bJfbPWEMj_c ","permalink":"https://youngeun-in.github.io/spring-mocking-%EC%97%86%EC%9D%B4-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EB%8A%94%EB%B2%95/","tags":["test","psa"],"title":"Spring mocking ì—†ì´ í…ŒìŠ¤íŠ¸í•˜ëŠ”ë²•"},{"categories":null,"contents":"","permalink":"https://youngeun-in.github.io/search/","tags":null,"title":"Search"}]