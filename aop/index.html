<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="noodp">
<meta http-equiv=x-ua-compatible content="IE=edge, chrome=1">
<title>AOP - </title><meta name=Description content="About LoveIt Theme"><meta property="og:title" content="AOP">
<meta property="og:description" content="AOP는 기능을 핵심 비즈니스 로직과 공통 모듈로 구분하고 핵심 로직에 영향을 미치지 않고 사이사이에 공통 모듈을 효과적으로 잘 끼워 넣어 중복성을 감소시킬 수 있는 개발 방법이다.
AOP 용어    용어 설명     Advice Joinpoint에서 실행되어야 하는 프로그램 코드
독립된 클래스의 메소드로 작성함
실질적으로 어떤 일을 해야할 지에 대한 것, 실질적인 부가기능을 담은 구현체
BEFORE, AROUND, AFTER의 실행 위치 지정   Joinpoint Advice를 적용할 수 있는 후보 지점 혹은 호출 이벤트">
<meta property="og:type" content="article">
<meta property="og:url" content="https://youngeun-in.github.io/aop/"><meta property="og:image" content="https://youngeun-in.github.io/logo.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-02-24T15:12:26+09:00">
<meta property="article:modified_time" content="2022-02-24T15:12:26+09:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://youngeun-in.github.io/logo.png">
<meta name=twitter:title content="AOP">
<meta name=twitter:description content="AOP는 기능을 핵심 비즈니스 로직과 공통 모듈로 구분하고 핵심 로직에 영향을 미치지 않고 사이사이에 공통 모듈을 효과적으로 잘 끼워 넣어 중복성을 감소시킬 수 있는 개발 방법이다.
AOP 용어    용어 설명     Advice Joinpoint에서 실행되어야 하는 프로그램 코드
독립된 클래스의 메소드로 작성함
실질적으로 어떤 일을 해야할 지에 대한 것, 실질적인 부가기능을 담은 구현체
BEFORE, AROUND, AFTER의 실행 위치 지정   Joinpoint Advice를 적용할 수 있는 후보 지점 혹은 호출 이벤트">
<meta name=application-name content="DevLog">
<meta name=apple-mobile-web-app-title content="DevLog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://youngeun-in.github.io/aop/><link rel=prev href=https://youngeun-in.github.io/%EC%9E%90%EB%B0%94%EC%9D%98-nested-class/><link rel=next href=https://youngeun-in.github.io/db-%EC%9D%B8%EB%8D%B1%EC%8A%A4/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"AOP","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/youngeun-in.github.io\/aop\/"},"image":["https:\/\/youngeun-in.github.io\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"aop","wordcount":780,"url":"https:\/\/youngeun-in.github.io\/aop\/","datePublished":"2022-02-24T15:12:26+09:00","dateModified":"2022-02-24T15:12:26+09:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"yyoungeunin","logo":"https:\/\/youngeun-in.github.io\/images\/avatar.png"},"author":{"@type":"Person","name":"yyoungeunin"},"description":""}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3861606141423582" crossorigin=anonymous></script>
<style>.search{position:relative;padding-top:3.5rem;padding-bottom:1rem;width:57.5%;margin:0 auto;background:#fff;opacity:.95}[theme=dark] .search{background:#3a3535}[theme=dark] .search header,.search header{background-color:#f8f8f8}[theme=dark] .search header:hover,.search header:hover{-webkit-box-shadow:none;box-shadow:none}.search header h1{padding-left:1rem;background:#fff}[theme=dark] .search header h1{background:#3a3535}[theme=dark] .search input,.search input{height:initial;width:initial;color:initial;background-color:#fff;margin:0 0 0 1rem;border-width:2px;border-style:inset;border-color:initial;border-image:initial;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.search #search-results{padding-left:1rem;padding-right:1rem}[theme=dark] a:active,[theme=dark] a:hover{color:#2d96bd}.search hr{margin-left:1rem;margin-right:1rem}</style>
</head>
<body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script>
<div id=mask></div><div class=wrapper><header class=desktop id=header-desktop>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title><span id=id-1 class=typeit></span></a>
</div>
<div class=menu>
<div class=menu-inner><a class=menu-item href=/posts/> Posts </a><a class=menu-item href=/categories/> Categories </a><a class=menu-item href=/tags/> Tags </a><a class=menu-item href=/search/><i class="fas fa-fw fa-search"></i> Search </a><a class=menu-item href=https://github.com/YouneEun-IN title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i> </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a>
</div>
</div>
</div>
</header><header class=mobile id=header-mobile>
<div class=header-container>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title><span id=id-2 class=typeit></span></a>
</div>
<div class=menu-toggle id=menu-toggle-mobile>
<span></span><span></span><span></span>
</div>
</div>
<div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/search/ title><i class="fas fa-fw fa-search"></i>Search</a><a class=menu-item href=https://github.com/YouneEun-IN title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a></div>
</div>
</header>
<div class="search-dropdown desktop">
<div id=search-dropdown-desktop></div>
</div>
<div class="search-dropdown mobile">
<div id=search-dropdown-mobile></div>
</div>
<main class=main>
<div class=container>
<div class=toc id=toc-auto>
<h2 class=toc-title>Contents</h2>
<div class="toc-content always-active" id=toc-content-auto></div>
</div><article class="page single"><h1 class="single-title animated flipInX">AOP</h1><div class=post-meta>
<div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>yyoungeunin</a></span>&nbsp;<span class=post-category>included in <a href=/categories/%EC%84%A4%EA%B3%84%EB%B0%A9%EB%B2%95%EB%A1%A0/><i class="far fa-folder fa-fw"></i>설계방법론</a></span></div>
<div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2022-02-24>2022-02-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;780 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;</div>
</div><div class="details toc" id=toc-static kept>
<div class="details-summary toc-title">
<span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span>
</div>
<div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents>
<ul>
<li><a href=#aop-용어>AOP 용어</a></li>
<li><a href=#aop-구현>AOP 구현</a>
<ul>
<li><a href=#일반적인-구현>일반적인 구현</a></li>
<li><a href=#어노테이션으로-구현>어노테이션으로 구현</a></li>
<li><a href=#빈으로-구현>빈으로 구현</a></li>
</ul>
</li>
<li><a href=#aop-pointcut-설정>AOP PointCut 설정</a>
<ul>
<li><a href=#execution-포인트-컷-리턴>execution 포인트 컷 리턴</a></li>
<li><a href=#execution-포인트-컷-패키지>execution 포인트 컷 패키지</a></li>
<li><a href=#execution-포인트-컷-클래스>execution 포인트 컷 클래스</a></li>
<li><a href=#execution-execution-포인트-컷-메서드>execution execution 포인트 컷 메서드</a>
<ul>
<li><a href=#execution-포인트-컷-매개변수>execution 포인트 컷 매개변수</a></li>
</ul>
</li>
</ul>
</li>
<li><a href=#aop-구현체>AOP 구현체</a></li>
<li><a href=#참고>참고</a></li>
</ul>
</nav></div>
</div><div class=content id=content><p>AOP는 기능을 핵심 비즈니스 로직과 공통 모듈로 구분하고 <strong>핵심 로직에 영향을 미치지 않고 사이사이에 공통 모듈을 효과적으로 잘 끼워 넣어 중복성을 감소시킬 수 있는 개발 방법</strong>이다.</p>
<h2 id=aop-용어>AOP 용어</h2>
<table>
<thead>
<tr>
<th>용어</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>Advice</td>
<td><strong><code>Joinpoint</code>에서 실행되어야 하는 프로그램 코드</strong><br>독립된 클래스의 메소드로 작성함<br>실질적으로 어떤 일을 해야할 지에 대한 것, 실질적인 부가기능을 담은 구현체<br>BEFORE, AROUND, AFTER의 실행 위치 지정</td>
</tr>
<tr>
<td>Joinpoint</td>
<td><strong><code>Advice</code>를 적용할 수 있는 후보 지점 혹은 호출 이벤트</strong><br>관심사를 구현한 코드를 끼워 넣을 수 있는 프로그램의 이벤트를 말하며, 예로는 call events, execution events, initialization events 등이 있음</td>
</tr>
<tr>
<td>Pointcut</td>
<td>언제 <code>Advice</code>를 실행할지를 정의<br><code>Target</code> 클래스와 <code>Advice</code>가 결합(<code>Weaving</code>)될 때 둘 사이의 결합규칙을 정의<br><strong>특정 조건에 의해 필터링된 조인포인트</strong>, 수많은 조인포인트 중에 특정 메소드에서만 횡단 공통기능을 수행시키기 위해서 사용한다.</td>
</tr>
<tr>
<td>Target</td>
<td><strong>실질적인 비지니스 로직을 구현하고 있는 코드</strong><br><code>JoinPoint</code>에서 실제 <code>Advice</code>가 적용될 지점</td>
</tr>
<tr>
<td>Weaving</td>
<td><strong><code>PointCut</code>에 <code>Advice</code> 메서드가 삽입되는 과정</strong></td>
</tr>
</tbody>
</table>
<p><img class=lazyload src=/svg/loading.min.svg data-src=https://user-images.githubusercontent.com/50267433/126900960-e0ed4a26-9521-49ac-bfd3-c9a915c12772.png data-srcset="https://user-images.githubusercontent.com/50267433/126900960-e0ed4a26-9521-49ac-bfd3-c9a915c12772.png, https://user-images.githubusercontent.com/50267433/126900960-e0ed4a26-9521-49ac-bfd3-c9a915c12772.png 1.5x, https://user-images.githubusercontent.com/50267433/126900960-e0ed4a26-9521-49ac-bfd3-c9a915c12772.png 2x" data-sizes=auto alt=https://user-images.githubusercontent.com/50267433/126900960-e0ed4a26-9521-49ac-bfd3-c9a915c12772.png title=AOP></p>
<h2 id=aop-구현>AOP 구현</h2>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-gradle data-lang=gradle><span class=n>implementation</span> <span class=s1>&#39;org.springframework.boot:spring-boot-starter-aop&#39;</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=c1>// @EnableAspectJAutoProxy 생략 가능 
</span><span class=c1></span><span class=nd>@SpringBootApplication</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>Application</span> <span class=o>{</span>
    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span> <span class=n>SpringApplication</span><span class=o>.</span><span class=na>run</span><span class=o>(</span><span class=n>Application</span><span class=o>.</span><span class=na>class</span><span class=o>,</span><span class=n>args</span><span class=o>);</span> <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=nd>@Service</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>AuthServiceImpl</span> <span class=o>{</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>businessLogicMethod</span><span class=o>(){</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;businessLogicMethod process!&#34;</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=일반적인-구현>일반적인 구현</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=kn>import</span> <span class=nn>org.aspectj.lang.ProceedingJoinPoint</span><span class=o>;</span>

<span class=nd>@Aspect</span>
<span class=nd>@Configuration</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>UselessAspect</span> <span class=o>{</span>

    <span class=n>Logger</span> <span class=n>log</span> <span class=o>=</span> <span class=n>LoggerFactory</span><span class=o>.</span><span class=na>getLogger</span><span class=o>(</span><span class=n>UselessAdvisor</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>

    <span class=nd>@Around</span><span class=o>(</span><span class=s>&#34;execution(* com.demo.study.service.AuthServiceImpl.*(..))&#34;</span><span class=o>)</span>
    <span class=kd>public</span> <span class=n>Object</span> <span class=nf>stopWatch</span><span class=o>(</span><span class=n>ProceedingJoinPoint</span> <span class=n>joinPoint</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Throwable</span> <span class=o>{</span>
        <span class=n>StopWatch</span> <span class=n>stopWatch</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StopWatch</span><span class=o>();</span>
        <span class=k>try</span> <span class=o>{</span>
            <span class=n>stopWatch</span><span class=o>.</span><span class=na>start</span><span class=o>();</span>
            <span class=k>return</span> <span class=n>joinPoint</span><span class=o>.</span><span class=na>proceed</span><span class=o>();</span>
        <span class=o>}</span> <span class=k>finally</span> <span class=o>{</span>
            <span class=n>stopWatch</span><span class=o>.</span><span class=na>stop</span><span class=o>();</span>
            <span class=n>log</span><span class=o>.</span><span class=na>info</span><span class=o>(</span><span class=s>&#34;request spent {} ms&#34;</span><span class=o>,</span> <span class=n>stopWatch</span><span class=o>.</span><span class=na>getLastTaskTimeMillis</span><span class=o>());</span>
        <span class=o>}</span>
    <span class=o>}</span>

    <span class=cm>/** 
</span><span class=cm>     * @Before
</span><span class=cm>     * @AfterReturning
</span><span class=cm>     * @AfterThrowing
</span><span class=cm>     */</span>
    <span class=nd>@After</span><span class=o>(</span><span class=s>&#34;execution(* com.demo.study.service.AuthServiceImpl.*(..))&#34;</span><span class=o>)</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>After</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>Throwable</span> <span class=o>{</span>
        <span class=n>log</span><span class=o>.</span><span class=na>info</span><span class=o>(</span><span class=s>&#34;After 어드바이스&#34;</span><span class=o>);</span>
    <span class=o>}</span>

<span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=어노테이션으로-구현>어노테이션으로 구현</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=nd>@Target</span><span class=o>(</span><span class=n>ElementType</span><span class=o>.</span><span class=na>METHOD</span><span class=o>)</span>
<span class=nd>@Retention</span><span class=o>(</span><span class=n>RetentionPolicy</span><span class=o>.</span><span class=na>CLASS</span><span class=o>)</span>
<span class=kd>public</span> <span class=nd>@interface</span> <span class=n>PerformanceCheck</span> <span class=o>{</span>
<span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=nd>@Service</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>AuthServiceImpl</span> <span class=o>{</span>
    <span class=nd>@PerformanceCheck</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>businessLogicMethod</span><span class=o>(){</span>
        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;businessLogicMethod process!&#34;</span><span class=o>);</span>
    <span class=o>}</span>
<span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=kn>import</span> <span class=nn>org.aspectj.lang.ProceedingJoinPoint</span><span class=o>;</span>

<span class=nd>@Aspect</span>
<span class=nd>@Component</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>UselessAspect</span> <span class=o>{</span>

    <span class=n>Logger</span> <span class=n>log</span> <span class=o>=</span> <span class=n>LoggerFactory</span><span class=o>.</span><span class=na>getLogger</span><span class=o>(</span><span class=n>UselessAdvisor</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>

    <span class=nd>@Around</span><span class=o>(</span><span class=s>&#34;@annotation(com.demo.study.annotation.PerformanceCheck)&#34;</span><span class=o>)</span>
    <span class=kd>public</span> <span class=n>Object</span> <span class=nf>stopWatch</span><span class=o>(</span><span class=n>ProceedingJoinPoint</span> <span class=n>joinPoint</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Throwable</span> <span class=o>{</span>
        <span class=n>StopWatch</span> <span class=n>stopWatch</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StopWatch</span><span class=o>();</span>
        <span class=k>try</span> <span class=o>{</span>
            <span class=n>stopWatch</span><span class=o>.</span><span class=na>start</span><span class=o>();</span>
            <span class=k>return</span> <span class=n>joinPoint</span><span class=o>.</span><span class=na>proceed</span><span class=o>();</span>
        <span class=o>}</span> <span class=k>finally</span> <span class=o>{</span>
            <span class=n>stopWatch</span><span class=o>.</span><span class=na>stop</span><span class=o>();</span>
            <span class=n>log</span><span class=o>.</span><span class=na>info</span><span class=o>(</span><span class=s>&#34;request spent {} ms&#34;</span><span class=o>,</span> <span class=n>stopWatch</span><span class=o>.</span><span class=na>getLastTaskTimeMillis</span><span class=o>());</span>
        <span class=o>}</span>
    <span class=o>}</span>

    <span class=cm>/** 
</span><span class=cm>     * @Before
</span><span class=cm>     * @AfterReturning
</span><span class=cm>     * @AfterThrowing
</span><span class=cm>     */</span>
    <span class=nd>@After</span><span class=o>(</span><span class=s>&#34;@annotation(com.demo.study.annotation.PerformanceCheck)&#34;</span><span class=o>)</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>After</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>Throwable</span> <span class=o>{</span>
        <span class=n>log</span><span class=o>.</span><span class=na>info</span><span class=o>(</span><span class=s>&#34;After 어드바이스&#34;</span><span class=o>);</span>
    <span class=o>}</span>

<span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>어노테이션</code>과 <code>Aspect</code>가 동일 위치면 어노테이션만 적어도 된다.</li>
<li>패키지가 다르면 FQCN(Fully qualified Class Name)을 다 입력해주어야 한다.</li>
</ul>
<h3 id=빈으로-구현>빈으로 구현</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=kn>import</span> <span class=nn>org.aspectj.lang.ProceedingJoinPoint</span><span class=o>;</span>

<span class=nd>@Aspect</span>
<span class=nd>@Component</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>UselessAspect</span> <span class=o>{</span>

    <span class=n>Logger</span> <span class=n>log</span> <span class=o>=</span> <span class=n>LoggerFactory</span><span class=o>.</span><span class=na>getLogger</span><span class=o>(</span><span class=n>UselessAdvisor</span><span class=o>.</span><span class=na>class</span><span class=o>);</span>

    <span class=nd>@Around</span><span class=o>(</span><span class=s>&#34;bean(com.demo.study.service.AuthServiceImpl)&#34;</span><span class=o>)</span>
    <span class=kd>public</span> <span class=n>Object</span> <span class=nf>stopWatch</span><span class=o>(</span><span class=n>ProceedingJoinPoint</span> <span class=n>joinPoint</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>Throwable</span> <span class=o>{</span>
        <span class=n>StopWatch</span> <span class=n>stopWatch</span> <span class=o>=</span> <span class=k>new</span> <span class=n>StopWatch</span><span class=o>();</span>
        <span class=k>try</span> <span class=o>{</span>
            <span class=n>stopWatch</span><span class=o>.</span><span class=na>start</span><span class=o>();</span>
            <span class=k>return</span> <span class=n>joinPoint</span><span class=o>.</span><span class=na>proceed</span><span class=o>();</span>
        <span class=o>}</span> <span class=k>finally</span> <span class=o>{</span>
            <span class=n>stopWatch</span><span class=o>.</span><span class=na>stop</span><span class=o>();</span>
            <span class=n>log</span><span class=o>.</span><span class=na>info</span><span class=o>(</span><span class=s>&#34;request spent {} ms&#34;</span><span class=o>,</span> <span class=n>stopWatch</span><span class=o>.</span><span class=na>getLastTaskTimeMillis</span><span class=o>());</span>
        <span class=o>}</span>
    <span class=o>}</span>

    <span class=cm>/** 
</span><span class=cm>     * @Before
</span><span class=cm>     * @AfterReturning
</span><span class=cm>     * @AfterThrowing
</span><span class=cm>     */</span>
    <span class=nd>@After</span><span class=o>(</span><span class=s>&#34;bean(com.demo.study.service.AuthServiceImpl)&#34;</span><span class=o>)</span>
    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>After</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>Throwable</span> <span class=o>{</span>
        <span class=n>log</span><span class=o>.</span><span class=na>info</span><span class=o>(</span><span class=s>&#34;After 어드바이스&#34;</span><span class=o>);</span>
    <span class=o>}</span>

<span class=o>}</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>빈</code>과 <code>Aspect</code>가 동일 위치면 어노테이션만 적어도 된다.</li>
<li>패키지가 다르면 FQCN(Fully qualified Class Name)을 다 입력해주어야 한다.</li>
</ul>
<h2 id=aop-pointcut-설정>AOP PointCut 설정</h2>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=n>execution</span><span class=o>(*</span> <span class=n>com</span><span class=o>.</span><span class=na>springbook</span><span class=o>.</span><span class=na>biz</span><span class=o>..*</span><span class=n>Impl</span><span class=o>.</span><span class=na>get</span><span class=o>*(..))</span><span class=err>&#34;</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>*</code> : 리턴값</li>
<li><code>com.springbook.biz..</code> : 패키지</li>
<li><code>*Impl</code>: 클래스 이름</li>
<li><code>get*</code> : 메서드 이름</li>
<li><code>(..)</code> : 매개변수</li>
<li>중간마다의 <code>.</code> : 구분점</li>
</ul>
<h3 id=execution-포인트-컷-리턴>execution 포인트 컷 리턴</h3>
<table>
<thead>
<tr>
<th>표현식</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*</code></td>
<td>모든 리턴타입 허용</td>
</tr>
<tr>
<td><code>void</code></td>
<td>리턴타입이 void인 메서드 선택</td>
</tr>
<tr>
<td><code>!void</code></td>
<td>리턴타입이 void가 아닌 메서드 선택</td>
</tr>
</tbody>
</table>
<h3 id=execution-포인트-컷-패키지>execution 포인트 컷 패키지</h3>
<table>
<thead>
<tr>
<th>표현식</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>com.springbook.biz</code></td>
<td>정학하게 해당 패키지만 선택</td>
</tr>
<tr>
<td><code>com.springbook.biz..</code></td>
<td>해당 패키지 및 모든 하위 패키지 선택</td>
</tr>
<tr>
<td><code>com.springbook..impl</code></td>
<td><code>..</code>앞 패키지로 시작하면서 마지막 패키지 이름이 <code>..</code>뒤로 끝나는 패키지 선택</td>
</tr>
</tbody>
</table>
<h3 id=execution-포인트-컷-클래스>execution 포인트 컷 클래스</h3>
<table>
<thead>
<tr>
<th>표현식</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BoardServiceImpl</code></td>
<td>정학하게 해당 클래스만 선택</td>
</tr>
<tr>
<td><code>*Impl</code></td>
<td>클래스 이름이 <code>*</code>뒷 글자로 끝나는 클래스만 선택</td>
</tr>
<tr>
<td><code>BoardService+</code></td>
<td>해당 클래스는 물론 파생된 모든 자식 클래스도 선택 가능</td>
</tr>
<tr>
<td><code>variable+</code></td>
<td>해당 인터페이스를 구현한 모든 클래스 선택 가능</td>
</tr>
</tbody>
</table>
<h3 id=execution-execution-포인트-컷-메서드>execution execution 포인트 컷 메서드</h3>
<table>
<thead>
<tr>
<th>표현식</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*(..)</code></td>
<td>가장 기본 설정으로 모든 메서드 선택</td>
</tr>
<tr>
<td><code>get*(..)</code></td>
<td>메서드 이름이 get으로 시작하는 모든 메서드 선택</td>
</tr>
<tr>
<td><code>매서드이름(..)</code></td>
<td>특정 메서드 이름을 가진 메서드 선택</td>
</tr>
</tbody>
</table>
<h4 id=execution-포인트-컷-매개변수>execution 포인트 컷 매개변수</h4>
<table>
<thead>
<tr>
<th>표현식</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>(..)</code></td>
<td>가장 기본 설정으로서 매개변수 타입의 제한이 없음을 의미</td>
</tr>
<tr>
<td><code>(*)</code></td>
<td>반드시 1개의 매개변수를 가지는 메서드만 허용한다는 의미</td>
</tr>
<tr>
<td><code>(com.spring.user.User)</code></td>
<td>해당 패키지의 클래스를 가지는 메서드만 허용한다는 의미</td>
</tr>
<tr>
<td><code>(!com.spring.user.User)</code></td>
<td>해당 패키지의 클래스를 가지지 않는 메서드만 허용한다는 의미</td>
</tr>
<tr>
<td><code>(Integer, ..)</code></td>
<td>한 개 이상의 매개변수를 가지되, 첫 번째 매개변수의 타입이 integer인 메서드만 허용</td>
</tr>
<tr>
<td><code>(Integer, *)</code></td>
<td>반드시 두 개의 매개변수를 가지되, 첫 번째 매개변수의 타입이 integer인 메서드만 허용</td>
</tr>
</tbody>
</table>
<h2 id=aop-구현체>AOP 구현체</h2>
<table>
<thead>
<tr>
<th></th>
<th>SpringAOP</th>
<th>AspectJ</th>
</tr>
</thead>
<tbody>
<tr>
<td>목표</td>
<td>간단한 AOP 제공</td>
<td>완벽한 AOP 제공</td>
</tr>
<tr>
<td>join point</td>
<td>메서드 레벨만 지원</td>
<td>생성자, 필드, 메서드 등 다양하게 지원</td>
</tr>
<tr>
<td>weaving</td>
<td>런타임 시에만 가능</td>
<td>런타임은 제공하지 않음, compile-time, post-compile, load-time 제공</td>
</tr>
<tr>
<td>대상</td>
<td>Spring Container가 관리하는 Bean에만 가능</td>
<td>모든 JAVA Object에 가능</td>
</tr>
</tbody>
</table>
<h2 id=참고>참고</h2>
<p><a href=https://github.com/kwj1270/TIL_Seminar/blob/master/AOP.md target=_blank rel="noopener noreffer">https://github.com/kwj1270/TIL_Seminar/blob/master/AOP.md</a></p>
<p><a href=https://swingswing.tistory.com/m/272 target=_blank rel="noopener noreffer">https://swingswing.tistory.com/m/272</a></p>
</div><div class=post-footer id=post-footer>
<div class=post-info>
<div class=post-info-line>
<div class=post-info-mod>
<span>Updated on 2022-02-24</span>
</div>
<div class=post-info-license></div>
</div>
<div class=post-info-line>
<div class=post-info-md><span>
<a class=link-to-markdown href=/aop/index.md target=_blank>Read Markdown</a>
</span></div>
<div class=post-info-share>
<span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://youngeun-in.github.io/aop/ data-title=AOP data-hashtags=aop><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://youngeun-in.github.io/aop/ data-hashtag=aop><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://youngeun-in.github.io/aop/ data-title=AOP><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://youngeun-in.github.io/aop/ data-title=AOP><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://youngeun-in.github.io/aop/ data-title=AOP><i class="fab fa-weibo fa-fw"></i></a></span>
</div>
</div>
</div>
<div class=post-info-more>
<section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/aop/>aop</a></section>
<section>
<span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span>
</section>
</div>
<div class=post-nav><a href=/%EC%9E%90%EB%B0%94%EC%9D%98-nested-class/ class=prev rel=prev title="자바의 Nested Class"><i class="fas fa-angle-left fa-fw"></i>자바의 Nested Class</a>
<a href=/db-%EC%9D%B8%EB%8D%B1%EC%8A%A4/ class=next rel=next title="DB 인덱스">DB 인덱스<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id=comments><div id=utterances></div><noscript>
Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.
</noscript></div></article></div>
</main><footer class=footer>
<div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.92.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
</div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>yyoungeunin</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div>
</div>
</footer>
</div>
<div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top">
<i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments">
<i class="fas fa-comment fa-fw"></i>
</a>
</div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@7.0.4/dist/typeit.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:-1},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"",lightTheme:"github-light",repo:"YoungEun-IN/blog-comment"}},data:{"id-1":"DevLog","id-2":"DevLog"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"],"id-2":["id-2"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/theme.min.js></script></body>
</html>